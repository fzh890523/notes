<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Memory barrier - Wikipedia</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Memory_barrier","wgTitle":"Memory barrier","wgCurRevisionId":774258025,"wgRevisionId":774258025,"wgArticleId":728216,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles lacking in-text citations from February 2016","All articles lacking in-text citations","Computer memory","Consistency models","Instruction processing"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Memory_barrier","wgRelevantArticleId":728216,"wgRequestId":"WWgyrQpAMEkAABmbLeQAAABA","wgIsProbablyEditable":true,"wgRelevantPageIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgFlaggedRevsParams":{"tags":{}},"wgStableRevisionId":null,"wgWikiEditorEnabledModules":{"toolbar":true,"preview":false,"publish":false},"wgBetaFeaturesFeatures":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":false,"wgPopupsShouldSendModuleToUser":false,"wgPopupsConflictsWithNavPopupGadget":false,"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","usePageImages":true,"usePageDescriptions":true},"wgPreferredVariant":"en","wgMFExpandAllSectionsUserOption":false,"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgRelatedArticles":null,"wgRelatedArticlesUseCirrusSearch":true,"wgRelatedArticlesOnlyUseCirrusSearch":false,"wgULSCurrentAutonym":"English","wgNoticeProject":"wikipedia","wgCentralNoticeCookiesToDelete":[],"wgCentralNoticeCategoriesUsingLegacy":["Fundraising","fundraising"],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgWikibaseItemId":"Q875051","wgCentralAuthMobileDomain":false,"wgVisualEditorToolbarScrollOffset":0,"wgVisualEditorUnsupportedEditParams":["preload","preloadparams","preloadtitle","undo","undoafter","veswitched"],"wgEditSubmitButtonLabelPublish":false});mw.loader.state({"ext.globalCssJs.user.styles":"ready","ext.globalCssJs.site.styles":"ready","site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.pygments":"ready","ext.cite.styles":"ready","wikibase.client.init":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.uls.interlanguage":"ready","ext.wikimediaBadges":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready","ext.globalCssJs.user":"ready","ext.globalCssJs.site":"ready"});mw.loader.implement("user.options@0gii3s4",function($,jQuery,require,module){mw.user.options.set([]);});mw.loader.implement("user.tokens@1dqfd7l",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["ext.cite.a11y","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","ext.gadget.teahouse","ext.gadget.ReferenceTooltips","ext.gadget.watchlist-notice","ext.gadget.DRN-wizard","ext.gadget.charinsert","ext.gadget.refToolbar","ext.gadget.extra-toolbar-buttons","ext.gadget.switcher","ext.gadget.featured-articles-links","ext.centralauth.centralautologin","mmv.head","mmv.bootstrap.autostart","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.eventLogging.subscriber","ext.wikimediaEvents","ext.navigationTiming","ext.uls.eventlogger","ext.uls.init","ext.uls.interface","ext.centralNotice.geoIP","ext.centralNotice.startUp","skins.vector.js"]);});</script>
<link rel="stylesheet" href="/w/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cext.pygments%2CwikimediaBadges%7Cext.uls.interlanguage%7Cext.visualEditor.desktopArticleTarget.noscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles%7Cwikibase.client.init&amp;only=styles&amp;skin=vector"/>
<script async="" src="/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.30.0-wmf.7"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<link rel="alternate" href="android-app://org.wikipedia/http/en.m.wikipedia.org/wiki/Memory_barrier"/>
<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Memory_barrier&amp;action=edit"/>
<link rel="edit" title="Edit this page" href="/w/index.php?title=Memory_barrier&amp;action=edit"/>
<link rel="apple-touch-icon" href="/static/apple-touch/wikipedia.png"/>
<link rel="shortcut icon" href="/static/favicon/wikipedia.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//en.wikipedia.org/w/api.php?action=rsd"/>
<link rel="copyright" href="//creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="canonical" href="https://en.wikipedia.org/wiki/Memory_barrier"/>
<link rel="dns-prefetch" href="//login.wikimedia.org"/>
<link rel="dns-prefetch" href="//meta.wikimedia.org" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Memory_barrier rootpage-Memory_barrier skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice" class="mw-body-content"><!-- CentralNotice --></div>
						<div class="mw-indicators mw-body-content">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Memory barrier</h1>
									<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Wikipedia, the free encyclopedia</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><table class="plainlinks metadata ambox ambox-style ambox-More_footnotes" role="presentation">
<tr>
<td class="mbox-image">
<div style="width:52px"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Text_document_with_red_question_mark.svg/40px-Text_document_with_red_question_mark.svg.png" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Text_document_with_red_question_mark.svg/60px-Text_document_with_red_question_mark.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Text_document_with_red_question_mark.svg/80px-Text_document_with_red_question_mark.svg.png 2x" data-file-width="48" data-file-height="48" /></div>
</td>
<td class="mbox-text"><span class="mbox-text-span">This article includes a <a href="/wiki/Wikipedia:Citing_sources" title="Wikipedia:Citing sources">list of references</a>, but <b>its sources remain unclear</b> because it has <b>insufficient <a href="/wiki/Wikipedia:Citing_sources#Inline_citations" title="Wikipedia:Citing sources">inline citations</a></b>. <span class="hide-when-compact">Please help to <a href="/wiki/Wikipedia:WikiProject_Fact_and_Reference_Check" title="Wikipedia:WikiProject Fact and Reference Check">improve</a> this article by <a href="/wiki/Wikipedia:When_to_cite" title="Wikipedia:When to cite">introducing</a> more precise citations.</span> <small><i>(February 2016)</i></small> <small class="hide-when-compact"><i>(<a href="/wiki/Help:Maintenance_template_removal" title="Help:Maintenance template removal">Learn how and when to remove this template message</a>)</i></small></span></td>
</tr>
</table>
<p>A <b>memory barrier</b>, also known as a <b>membar</b>, <b>memory fence</b> or <b>fence instruction</b>, is a type of <a href="/wiki/Barrier_(computer_science)" title="Barrier (computer science)">barrier</a> <a href="/wiki/Instruction_(computer_science)" class="mw-redirect" title="Instruction (computer science)">instruction</a> that causes a <a href="/wiki/Central_processing_unit" title="Central processing unit">central processing unit</a> (CPU) or <a href="/wiki/Compiler" title="Compiler">compiler</a> to enforce an <a href="/wiki/Memory_ordering" title="Memory ordering">ordering</a> constraint on <a href="/wiki/Random-access_memory" title="Random-access memory">memory</a> operations issued before and after the barrier instruction. This typically means that operations issued prior to the barrier are guaranteed to be performed before operations issued after the barrier.</p>
<p>Memory barriers are necessary because most modern CPUs employ performance optimizations that can result in <a href="/wiki/Out-of-order_execution" title="Out-of-order execution">out-of-order execution</a>. This reordering of memory operations (loads and stores) normally goes unnoticed within a single <a href="/wiki/Thread_(computer_science)" class="mw-redirect" title="Thread (computer science)">thread of execution</a>, but can cause unpredictable behaviour in <a href="/wiki/Concurrent_computing" title="Concurrent computing">concurrent programs</a> and <a href="/wiki/Device_driver" title="Device driver">device drivers</a> unless carefully controlled. The exact nature of an ordering constraint is hardware dependent and defined by the architecture's <a href="/wiki/Memory_model_(programming)" title="Memory model (programming)">memory ordering model</a>. Some architectures provide multiple barriers for enforcing different ordering constraints.</p>
<p>Memory barriers are typically used when implementing low-level <a href="/wiki/Machine_code" title="Machine code">machine code</a> that operates on memory shared by multiple devices. Such code includes <a href="/wiki/Synchronization_(computer_science)" title="Synchronization (computer science)">synchronization</a> primitives and <a href="/wiki/Non-blocking_synchronization" class="mw-redirect" title="Non-blocking synchronization">lock-free</a> data structures on <a href="/wiki/Multiprocessing" title="Multiprocessing">multiprocessor</a> systems, and device drivers that communicate with <a href="/wiki/Personal_computer_hardware" class="mw-redirect" title="Personal computer hardware">computer hardware</a>.</p>
<p></p>
<div id="toc" class="toc">
<div class="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#An_illustrative_example"><span class="tocnumber">1</span> <span class="toctext">An illustrative example</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Low-level_architecture-specific_primitives"><span class="tocnumber">2</span> <span class="toctext">Low-level architecture-specific primitives</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Multithreaded_programming_and_memory_visibility"><span class="tocnumber">3</span> <span class="toctext">Multithreaded programming and memory visibility</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Out-of-order_execution_versus_compiler_reordering_optimizations"><span class="tocnumber">4</span> <span class="toctext">Out-of-order execution versus compiler reordering optimizations</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#References"><span class="tocnumber">6</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#External_links"><span class="tocnumber">7</span> <span class="toctext">External links</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="An_illustrative_example">An illustrative example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=1" title="Edit section: An illustrative example">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>When a program runs on a single-CPU machine, the hardware performs the necessary bookkeeping to ensure that the program executes as if all memory operations were performed in the order specified by the programmer (program order), so memory barriers are not necessary. However, when the memory is shared with multiple devices, such as other CPUs in a multiprocessor system, or <a href="/wiki/Memory-mapped_I/O" title="Memory-mapped I/O">memory mapped</a> peripherals, out-of-order access may affect program behavior. For example, a second CPU may see memory changes made by the first CPU in a sequence which differs from program order.</p>
<p>The following two-processor program gives an example of how such out-of-order execution can affect program behavior:</p>
<p>Initially, memory locations <code>x</code> and <code>f</code> both hold the value <code>0</code>. The program running on processor #1 loops while the value of <code>f</code> is zero, then it prints the value of <code>x</code>. The program running on processor #2 stores the value <code>42</code> into <code>x</code> and then stores the value <code>1</code> into <code>f</code>. Pseudo-code for the two program fragments is shown below. The steps of the program correspond to individual processor instructions.</p>
<p>Processor #1:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
 <span class="k">while</span> <span class="p">(</span><span class="n">f</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
 <span class="c1">// Memory fence required here</span>
 <span class="n">print</span> <span class="n">x</span><span class="p">;</span>
</pre></div>
<p>Processor #2:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
 <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
 <span class="c1">// Memory fence required here</span>
 <span class="n">f</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
<p>One might expect the print statement to always print the number "42"; however, if processor #2's store operations are executed out-of-order, it is possible for <code>f</code> to be updated <i>before</i> <code>x</code>, and the print statement might therefore print "0". Similarly, processor #1's load operations may be executed out-of-order and it is possible for <code>x</code> to be read <i>before</i> <code>f</code> is checked, and again the print statement might therefore print an unexpected value. For most programs neither of these situations are acceptable. A memory barrier can be inserted before processor #2's assignment to <code>f</code> to ensure that the new value of <code>x</code> is visible to other processors at or prior to the change in the value of <code>f</code>. Another can be inserted before processor #1's access to <code>x</code> to ensure the value of <code>x</code> is not read prior to seeing the change in the value of <code>f</code>.</p>
<p>For another illustrative example (a non-trivial one that arises in actual practice), see <a href="/wiki/Double-checked_locking" title="Double-checked locking">double-checked locking</a>.</p>
<h2><span class="mw-headline" id="Low-level_architecture-specific_primitives">Low-level architecture-specific primitives</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=2" title="Edit section: Low-level architecture-specific primitives">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Memory barriers are low-level primitives and part of an architecture's <a href="/wiki/Memory_ordering" title="Memory ordering">memory model</a>, which, like <a href="/wiki/Instruction_set" class="mw-redirect" title="Instruction set">instruction sets</a>, vary considerably between architectures, so it is not appropriate to generalize about memory barrier behavior. The conventional wisdom is that using memory barriers correctly requires careful study of the architecture manuals for the hardware being programmed. That said, the following paragraph offers a glimpse of some memory barriers which exist in contemporary products.</p>
<p>Some architectures, including the ubiquitous <a href="/wiki/X86_instruction_listings" title="X86 instruction listings">x86/x64</a>, provide several memory barrier instructions including an instruction sometimes called "full fence". A full fence ensures that all load and store operations prior to the fence will have been committed prior to any loads and stores issued following the fence. Other architectures, such as the <a href="/wiki/Itanium" title="Itanium">Itanium</a>, provide separate "acquire" and "release" memory barriers which address the visibility of read-after-write operations from the point of view of a reader (sink) or writer (source) respectively. Some architectures provide separate memory barriers to control ordering between different combinations of system memory and <a href="/wiki/I/O" class="mw-redirect" title="I/O">I/O</a> memory. When more than one memory barrier instruction is available it is important to consider that the cost of different instructions may vary considerably.</p>
<h2><span class="mw-headline" id="Multithreaded_programming_and_memory_visibility">Multithreaded programming and memory visibility</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=3" title="Edit section: Multithreaded programming and memory visibility">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div role="note" class="hatnote navigation-not-searchable">See also: <a href="/wiki/Memory_model_(programming)" title="Memory model (programming)">Memory model (programming)</a></div>
<p>Multithreaded programs usually use synchronization <a href="/wiki/Language_primitive" title="Language primitive">primitives</a> provided by a high-level programming environment, such as <a href="/wiki/Java_(programming_language)" title="Java (programming language)">Java</a> and <a href="/wiki/.NET_Framework" title=".NET Framework">.NET Framework</a>, or an <a href="/wiki/Application_programming_interface" title="Application programming interface">application programming interface</a> (API) such as <a href="/wiki/POSIX_Threads" title="POSIX Threads">POSIX Threads</a> or <a href="/wiki/Windows_API" title="Windows API">Windows API</a>. Synchronization Primitives such as <a href="/wiki/Mutual_exclusion" title="Mutual exclusion">mutexes</a> and <a href="/wiki/Semaphore_(programming)" title="Semaphore (programming)">semaphores</a> are provided to synchronize access to resources from parallel threads of execution. These primitives are usually implemented with the memory barriers required to provide the expected memory visibility <a href="/wiki/Semantics#Computer_science" title="Semantics">semantics</a>. In such environments explicit use of memory barriers is not generally necessary.</p>
<p>Each API or programming environment in principle has its own high-level memory model that defines its memory visibility semantics. Although programmers do not usually need to use memory barriers in such high level environments, it is important to understand their memory visibility semantics, to the extent possible. Such understanding is not necessarily easy to achieve because memory visibility semantics are not always consistently specified or documented.</p>
<p>Just as programming language semantics are defined at a different <a href="/wiki/Abstraction_layer" title="Abstraction layer">level of abstraction</a> than <a href="/wiki/Machine_language" class="mw-redirect" title="Machine language">machine language</a> <a href="/wiki/Opcode" title="Opcode">opcodes</a>, a programming environment's memory model is defined at a different level of abstraction than that of a hardware memory model. It is important to understand this distinction and realize that there is not always a simple mapping between low-level hardware memory barrier semantics and the high-level memory visibility semantics of a particular programming environment. As a result, a particular platform's implementation of (say) <a href="/wiki/POSIX_Threads" title="POSIX Threads">POSIX Threads</a> may employ stronger barriers than required by the specification. Programs which take advantage of memory visibility as implemented rather than as specified may not be portable.</p>
<h2><span class="mw-headline" id="Out-of-order_execution_versus_compiler_reordering_optimizations">Out-of-order execution versus compiler reordering optimizations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=4" title="Edit section: Out-of-order execution versus compiler reordering optimizations">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Memory barrier instructions address reordering effects only at the hardware level. Compilers may also reorder instructions as part of the program optimization process. Although the effects on parallel program behavior can be similar in both cases, in general it is necessary to take separate measures to inhibit compiler reordering optimizations for data that may be shared by multiple threads of execution. Note that such measures are usually necessary only for data which is not protected by synchronization primitives such as those discussed in the prior section.</p>
<p>In <a href="/wiki/C_(programming_language)" title="C (programming language)">C</a> and <a href="/wiki/C%2B%2B" title="C++">C++</a>, the <tt>volatile</tt> keyword was intended to allow C and C++ programs to directly access <a href="/wiki/Memory-mapped_I/O" title="Memory-mapped I/O">memory-mapped I/O</a>. Memory-mapped I/O generally requires that the reads and writes specified in source code happen in the exact order specified with no omissions. Omissions or reorderings of reads and writes by the compiler would break the communication between the program and the device accessed by memory-mapped I/O. A C or C++ compiler may not omit reads from and writes to volatile memory locations, nor may it reorder read/writes relative to other such actions for the same volatile location (variable). The keyword <tt>volatile</tt> <i>does not guarantee a memory barrier</i> to enforce cache-consistency. Therefore, the use of "volatile" alone is not sufficient to use a variable for inter-thread communication on all systems and processors.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">[1]</a></sup></p>
<p>The C and C++ standards prior to C11 and C++11 do not address multiple threads (or multiple processors),<sup id="cite_ref-2" class="reference"><a href="#cite_note-2">[2]</a></sup> and as such, the usefulness of <tt>volatile</tt> depends on the compiler and hardware. Although <tt>volatile</tt> guarantees that the volatile reads and volatile writes will happen in the exact order specified in the source code, the compiler may generate code (or the CPU may re-order execution) such that a volatile read or write is reordered with regard to non-volatile reads or writes, thus limiting its usefulness as an inter-thread flag or mutex. Preventing such is compiler specific, but some compilers, like <a href="/wiki/GNU_Compiler_Collection" title="GNU Compiler Collection">gcc</a>, will not reorder operations around in-line assembly code with <tt>volatile</tt> and <tt>"memory"</tt> tags, like in: <tt>asm volatile (""&#160;:&#160;:&#160;: "memory");</tt> (See more examples in <a href="/wiki/Memory_ordering#Compiler_memory_barrier" title="Memory ordering">compiler memory barrier</a>). Moreover, it is not guaranteed that volatile reads and writes will be seen in the same order by other processors or cores due to caching, <a href="/wiki/Cache_coherence" title="Cache coherence">cache coherence</a> protocol and relaxed memory ordering, meaning volatile variables alone may not even work as inter-thread flags or mutexes.</p>
<p>Some languages and compilers may provide sufficient facilities to implement functions which address both the compiler reordering and <a href="/wiki/Out-of-order_execution" title="Out-of-order execution">machine reordering</a> issues. In <a href="/wiki/Java_(programming_language)" title="Java (programming language)">Java</a> version 1.5 (also known as version 5), the <tt>volatile</tt> keyword is now guaranteed to prevent certain hardware <i>and</i> compiler re-orderings, as part of the new <a href="/wiki/Java_Memory_Model" class="mw-redirect" title="Java Memory Model">Java Memory Model</a>. <a href="/wiki/C%2B%2B11" title="C++11">C++11</a> standardizes special atomic types and operations with semantics similar to those of <tt>volatile</tt> in the Java Memory Model.</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=5" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div role="navigation" aria-label="Portals" class="noprint portal plainlist tright" style="margin:0.5em 0 0.5em 1em;border:solid #aaa 1px">
<ul style="display:table;box-sizing:border-box;padding:0.1em;max-width:175px;background:#f9f9f9;font-size:85%;line-height:110%;font-style:italic;font-weight:bold">
<li style="display:table-row"><span style="display:table-cell;padding:0.2em;vertical-align:middle;text-align:center"><a href="/wiki/File:8bit-dynamiclist_(reversed).gif" class="image"><img alt="icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/cc/8bit-dynamiclist_%28reversed%29.gif/28px-8bit-dynamiclist_%28reversed%29.gif" width="28" height="28" class="noviewer" srcset="//upload.wikimedia.org/wikipedia/commons/c/cc/8bit-dynamiclist_%28reversed%29.gif 1.5x" data-file-width="32" data-file-height="32" /></a></span><span style="display:table-cell;padding:0.2em 0.2em 0.2em 0.3em;vertical-align:middle"><a href="/wiki/Portal:Computer_programming" title="Portal:Computer programming">Computer programming portal</a></span></li>
</ul>
</div>
<ul>
<li><a href="/wiki/Lock-free_and_wait-free_algorithms" class="mw-redirect" title="Lock-free and wait-free algorithms">Lock-free and wait-free algorithms</a></li>
</ul>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=6" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="reflist" style="list-style-type: decimal;">
<div class="mw-references-wrap">
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><b><a href="#cite_ref-1">^</a></b></span> <span class="reference-text"><a rel="nofollow" class="external text" href="https://www.kernel.org/doc/Documentation/volatile-considered-harmful.txt">Volatile Considered Harmful - Linux Kernel Documentation</a></span></li>
<li id="cite_note-2"><span class="mw-cite-backlink"><b><a href="#cite_ref-2">^</a></b></span> <span class="reference-text"><cite class="citation conference">Boehm, Hans (June 2005). <a rel="nofollow" class="external text" href="http://dl.acm.org/citation.cfm?id=1065042"><i>Threads cannot be implemented as a library</i></a>. <i>Proceedings of the 2005 ACM SIGPLAN conference on Programming language design and implementation</i>. <a href="/wiki/Association_for_Computing_Machinery" title="Association for Computing Machinery">Association for Computing Machinery</a>. <a href="/wiki/Digital_object_identifier" title="Digital object identifier">doi</a>:<a rel="nofollow" class="external text" href="//doi.org/10.1145%2F1065010.1065042">10.1145/1065010.1065042</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMemory+barrier&amp;rft.atitle=Threads+cannot+be+implemented+as+a+library&amp;rft.aufirst=Hans&amp;rft.aulast=Boehm&amp;rft.date=2005-06&amp;rft.genre=conference&amp;rft.jtitle=Proceedings+of+the+2005+ACM+SIGPLAN+conference+on+Programming+language+design+and+implementation&amp;rft_id=http%3A%2F%2Fdl.acm.org%2Fcitation.cfm%3Fid%3D1065042&amp;rft_id=info%3Adoi%2F10.1145%2F1065010.1065042&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal" class="Z3988"><span style="display:none;">&#160;</span></span></span></li>
</ol>
</div>
</div>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Memory_barrier&amp;action=edit&amp;section=7" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf">Memory Barriers: a Hardware View for Software Hackers</a></li>
<li><a rel="nofollow" class="external text" href="http://www.microsoft.com/whdc/driver/kernel/MPmem-barrier.mspx">Microsoft Driver Development: Memory Barriers on Multiprocessor Architectures</a></li>
<li><a rel="nofollow" class="external text" href="http://www.hpl.hp.com/techreports/2004/HPL-2004-209.html">HP technical report HPL-2004-209: Threads Cannot be Implemented as a Library</a></li>
<li><a rel="nofollow" class="external text" href="http://www.linuxjournal.com/article/8211">Linux kernel memory barrier issues on multiple types of CPUs</a></li>
<li><a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/memory-barriers.txt">Documentation on memory barriers in the Linux kernel</a></li>
<li><a rel="nofollow" class="external text" href="http://www.oracle.com/technetwork/server-storage/solarisstudio/documentation/oss-compiler-barriers-176055.pdf">Handling Memory Ordering in Multithreaded Applications with Oracle Solaris Studio 12 Update 2: Part 1, Compiler Barriers</a></li>
<li><a rel="nofollow" class="external text" href="http://www.oracle.com/technetwork/server-storage/solarisstudio/documentation/oss-memory-barriers-fences-176056.pdf">Handling Memory Ordering in Multithreaded Applications with Oracle Solaris Studio 12 Update 2: Part 2, Memory Barriers and Memory Fences</a></li>
<li><a rel="nofollow" class="external text" href="https://lwn.net/Articles/573436/">User-space RCU: Memory-barrier menagerie</a></li>
</ul>


<!-- 
NewPP limit report
Parsed by mw1246
Cached time: 20170714025245
Cache expiry: 2592000
Dynamic content: false
CPU time usage: 0.076 seconds
Real time usage: 0.245 seconds
Preprocessor visited node count: 277/1000000
Preprocessor generated node count: 0/1500000
Post‐expand include size: 7757/2097152 bytes
Template argument size: 98/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 1/500
Lua time usage: 0.033/10.000 seconds
Lua memory usage: 1.8 MB/50 MB
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  222.193      1 -total
 19.02%   42.272      1 Template:More_footnotes
 14.68%   32.610      1 Template:Reflist
 12.89%   28.631      1 Template:Cite_conference
 10.44%   23.199      1 Template:Ambox
  4.16%    9.254      1 Template:See_also
  2.96%    6.570      1 Template:Portal
  0.79%    1.763      1 Template:Main_other
-->
</div>
<!-- Saved in parser cache with key enwiki:pcache:idhash:728216-0!canonical and timestamp 20170714025245 and revision id 774258025
 -->
<noscript><img src="//en.wikipedia.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;" /></noscript></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://en.wikipedia.org/w/index.php?title=Memory_barrier&amp;oldid=774258025">https://en.wikipedia.org/w/index.php?title=Memory_barrier&amp;oldid=774258025</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Help:Category" title="Help:Category">Categories</a>: <ul><li><a href="/wiki/Category:Computer_memory" title="Category:Computer memory">Computer memory</a></li><li><a href="/wiki/Category:Consistency_models" title="Category:Consistency models">Consistency models</a></li><li><a href="/wiki/Category:Instruction_processing" title="Category:Instruction processing">Instruction processing</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul><li><a href="/wiki/Category:Articles_lacking_in-text_citations_from_February_2016" title="Category:Articles lacking in-text citations from February 2016">Articles lacking in-text citations from February 2016</a></li><li><a href="/wiki/Category:All_articles_lacking_in-text_citations" title="Category:All articles lacking in-text citations">All articles lacking in-text citations</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-anonuserpage">Not logged in</li><li id="pt-anontalk"><a href="/wiki/Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n">Talk</a></li><li id="pt-anoncontribs"><a href="/wiki/Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y">Contributions</a></li><li id="pt-createaccount"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Memory+barrier" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Memory+barrier" title="You're encouraged to log in; however, it's not mandatory. [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/Memory_barrier"  title="View the content page [c]" accesskey="c">Article</a></span></li>
															<li  id="ca-talk"><span><a href="/wiki/Talk:Memory_barrier"  title="Discussion about the content page [t]" accesskey="t" rel="discussion">Talk</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span><div></div>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="/wiki/Memory_barrier" >Read</a></span></li>
															<li id="ca-edit"><span><a href="/w/index.php?title=Memory_barrier&amp;action=edit"  title="Edit this page [e]" accesskey="e">Edit</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=Memory_barrier&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><div></div></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="/w/index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search Wikipedia" title="Search Wikipedia [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search Wikipedia for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="/wiki/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
			<h3 id='p-navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
						<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li><li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content – the best of Wikipedia">Featured content</a></li><li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li><li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li><li id="n-sitesupport"><a href="https://donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=C13_en.wikipedia.org&amp;uselang=en" title="Support us">Donate to Wikipedia</a></li><li id="n-shoplink"><a href="//shop.wikimedia.org" title="Visit the Wikipedia store">Wikipedia store</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-interaction' aria-labelledby='p-interaction-label'>
			<h3 id='p-interaction-label'>Interaction</h3>

			<div class="body">
									<ul>
						<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li><li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li><li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-contactpage"><a href="//en.wikipedia.org/wiki/Wikipedia:Contact_us" title="How to contact Wikipedia">Contact page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
						<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Memory_barrier" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Memory_barrier" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-upload"><a href="/wiki/Wikipedia:File_Upload_Wizard" title="Upload files [u]" accesskey="u">Upload file</a></li><li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-permalink"><a href="/w/index.php?title=Memory_barrier&amp;oldid=774258025" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="/w/index.php?title=Memory_barrier&amp;action=info" title="More information about this page">Page information</a></li><li id="t-wikibase"><a href="https://www.wikidata.org/wiki/Special:EntityPage/Q875051" title="Link to connected data repository item [g]" accesskey="g">Wikidata item</a></li><li id="t-cite"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Memory_barrier&amp;id=774258025" title="Information on how to cite this page">Cite this page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
						<li id="coll-create_a_book"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Memory+barrier">Create a book</a></li><li id="coll-download-as-rdf2latex"><a href="/w/index.php?title=Special:ElectronPdf&amp;page=Memory+barrier&amp;action=show-selection-screen&amp;coll-download-url=%2Fw%2Findex.php%3Ftitle%3DSpecial%3ABook%26bookcmd%3Drender_article%26arttitle%3DMemory%2Bbarrier%26returnto%3DMemory%2Bbarrier%26oldid%3D774258025%26writer%3Drdf2latex">Download as PDF</a></li><li id="t-print"><a href="/w/index.php?title=Memory_barrier&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-lang' aria-labelledby='p-lang-label'>
			<h3 id='p-lang-label'>Languages</h3>

			<div class="body">
									<ul>
						<li class="interlanguage-link interwiki-ko"><a href="https://ko.wikipedia.org/wiki/%EB%A9%94%EB%AA%A8%EB%A6%AC_%EB%B0%B0%EB%A6%AC%EC%96%B4" title="메모리 배리어 – Korean" lang="ko" hreflang="ko" class="interlanguage-link-target">한국어</a></li><li class="interlanguage-link interwiki-ja"><a href="https://ja.wikipedia.org/wiki/%E3%83%A1%E3%83%A2%E3%83%AA%E3%83%90%E3%83%AA%E3%82%A2" title="メモリバリア – Japanese" lang="ja" hreflang="ja" class="interlanguage-link-target">日本語</a></li><li class="interlanguage-link interwiki-pl"><a href="https://pl.wikipedia.org/wiki/Bariera_pami%C4%99ci" title="Bariera pamięci – Polish" lang="pl" hreflang="pl" class="interlanguage-link-target">Polski</a></li><li class="interlanguage-link interwiki-zh"><a href="https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C" title="内存屏障 – Chinese" lang="zh" hreflang="zh" class="interlanguage-link-target">中文</a></li>					</ul>
				<div class="after-portlet after-portlet-lang"><span class="wb-langlinks-edit wb-langlinks-link"><a href="https://www.wikidata.org/wiki/Special:EntityPage/Q875051#sitelinks-wikipedia" title="Edit interlanguage links" class="wbc-editpage">Edit links</a></span></div>			</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last edited on 7 April 2017, at 07:40.</li>
											<li id="footer-info-copyright">Text is available under the <a rel="license" href="//en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">Creative Commons Attribution-ShareAlike License</a><a rel="license" href="//creativecommons.org/licenses/by-sa/3.0/" style="display:none;"></a>;
additional terms may apply.  By using this site, you agree to the <a href="//wikimediafoundation.org/wiki/Terms_of_Use">Terms of Use</a> and <a href="//wikimediafoundation.org/wiki/Privacy_policy">Privacy Policy</a>. Wikipedia® is a registered trademark of the <a href="//www.wikimediafoundation.org/">Wikimedia Foundation, Inc.</a>, a non-profit organization.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://wikimediafoundation.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-contact"><a href="//en.wikipedia.org/wiki/Wikipedia:Contact_us">Contact Wikipedia</a></li>
											<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
											<li id="footer-places-cookiestatement"><a href="https://wikimediafoundation.org/wiki/Cookie_statement">Cookie statement</a></li>
											<li id="footer-places-mobileview"><a href="//en.m.wikipedia.org/w/index.php?title=Memory_barrier&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
							<a href="https://wikimediafoundation.org/"><img src="/static/images/wikimedia-button.png" srcset="/static/images/wikimedia-button-1.5x.png 1.5x, /static/images/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation"/></a>						</li>
											<li id="footer-poweredbyico">
							<a href="//www.mediawiki.org/"><img src="/static/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/poweredby_mediawiki_132x47.png 1.5x, /static/images/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>						</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.076","walltime":"0.245","ppvisitednodes":{"value":277,"limit":1000000},"ppgeneratednodes":{"value":0,"limit":1500000},"postexpandincludesize":{"value":7757,"limit":2097152},"templateargumentsize":{"value":98,"limit":2097152},"expansiondepth":{"value":7,"limit":40},"expensivefunctioncount":{"value":1,"limit":500},"entityaccesscount":{"value":0,"limit":400},"timingprofile":["100.00%  222.193      1 -total"," 19.02%   42.272      1 Template:More_footnotes"," 14.68%   32.610      1 Template:Reflist"," 12.89%   28.631      1 Template:Cite_conference"," 10.44%   23.199      1 Template:Ambox","  4.16%    9.254      1 Template:See_also","  2.96%    6.570      1 Template:Portal","  0.79%    1.763      1 Template:Main_other"]},"scribunto":{"limitreport-timeusage":{"value":"0.033","limit":"10.000"},"limitreport-memusage":{"value":1889510,"limit":52428800}},"cachereport":{"origin":"mw1246","timestamp":"20170714025245","ttl":2592000,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":53,"wgHostname":"mw1238"});});</script>
	</body>
</html>
