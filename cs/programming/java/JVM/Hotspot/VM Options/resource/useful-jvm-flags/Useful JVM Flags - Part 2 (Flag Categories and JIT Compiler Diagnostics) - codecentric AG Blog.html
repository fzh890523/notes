<!doctype html><html lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#" class="no-js"><head><meta charset="UTF-8"><link type="text/css" media="all" href="https://blog.codecentric.de/wp-content/cache/autoptimize/2/autoptimize_06a85d694f971f4152da449e38354fab.php" rel="stylesheet" /><title>Useful JVM Flags - Part 2 (Flag Categories and JIT Compiler Diagnostics) - codecentric AG Blog</title><link href="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/icons/favicon.ico" rel="shortcut icon"><link href="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/icons/touch.png" rel="apple-touch-icon-precomposed"><link rel="profile" href="http://gmpg.org/xfn/11"/><link rel="pingback" href="https://blog.codecentric.de/xmlrpc.php"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="google-site-verification" content="udyUJphOAc3iTldVhEpkEzYUeCNAQm1RJM4xXwKi82Q" /> <script>(function(i,s,o,g,r,a,m){i['InstanaEumObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//eum.instana.io/eum.min.js','ineum'); ineum('apiKey', 'cnkUbWdYSY-gaq4B26lgxw'); // Backend trace ID to facilitate correlation of frontend/backend traces. // Trace ID is available in backend to user code. // User is himself responsible for embedding this trace ID in this snippet. // ineum('traceId', '<backend trace id>'); // free form key/value pairs for advanced end-user tracking // ineum('meta', 'user', 'tom.mason@example.com');</script> <link rel="canonical" href="https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" /><link rel="publisher" href="https://plus.google.com/+codecentricDe"/><meta property="og:locale" content="en_US" /><meta property="og:type" content="article" /><meta property="og:title" content="Useful JVM Flags - Part 2 (Flag Categories and JIT Compiler Diagnostics) - codecentric AG Blog" /><meta property="og:description" content="In the second part of this series, I give an introduction to the different categories of flags offered by the HotSpot JVM. Also, I am going to discuss some interesting flags regarding JIT compiler diagnostics. JVM flag categories The HotSpot JVM offers three categories of flags. The first category contains the standard flags. As the... Read more" /><meta property="og:url" content="https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" /><meta property="og:site_name" content="codecentric AG Blog" /><meta property="article:publisher" content="https://www.facebook.com/codecentric" /><meta property="article:section" content="Java" /><meta property="article:published_time" content="2012-07-15T16:01:41+02:00" /><meta property="article:modified_time" content="2017-05-17T10:11:12+02:00" /><meta property="og:updated_time" content="2017-05-17T10:11:12+02:00" /><meta property="fb:admins" content="828173743" /><meta name="twitter:card" content="summary" /><meta name="twitter:description" content="In the second part of this series, I give an introduction to the different categories of flags offered by the HotSpot JVM. Also, I am going to discuss some interesting flags regarding JIT compiler diagnostics. JVM flag categories The HotSpot JVM offers three categories of flags. The first category contains the standard flags. As the... Read more" /><meta name="twitter:title" content="Useful JVM Flags - Part 2 (Flag Categories and JIT Compiler Diagnostics) - codecentric AG Blog" /><meta name="twitter:site" content="@codecentric" /><meta name="twitter:creator" content="@codecentric" /><link rel='dns-prefetch' href='//ajax.googleapis.com' /><link rel='dns-prefetch' href='//s.w.org' /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blog.codecentric.de\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.1"}}; !function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js?ver=1.11.0'></script> <link rel='https://api.w.org/' href='https://blog.codecentric.de/en/wp-json/' /><link rel="alternate" type="application/json+oembed" href="https://blog.codecentric.de/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblog.codecentric.de%2Fen%2F2012%2F07%2Fuseful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics%2F" /><link rel="alternate" type="text/xml+oembed" href="https://blog.codecentric.de/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblog.codecentric.de%2Fen%2F2012%2F07%2Fuseful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics%2F&#038;format=xml" /><meta name="generator" content="WPML ver:3.2.2 stt:1,3;" /><link rel="alternate" hreflang="en-US" href="https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/"/><link rel="alternate" hreflang="x-default" href="https://blog.codecentric.de/2011/03/nutzliche-jvm-flags-teil-2/"/><link rel="shortcut icon" type="image/x-icon" href="/wp-content/themes/codecentric2015-HP/img/icons/favicon.ico" /> <script type="text/javascript">var analyticsFileTypes = ['']; var analyticsSnippet = 'disabled'; var analyticsEventTracking = 'enabled';</script> <script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2828835-3', 'auto'); ga('send', 'pageview');</script> </head><body class="post-template-default single single-post postid-14413 single-format-standard en useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics"><header class="hidden-xs"><div class="header-top-outer-wrap"><div class="header-search-wrap"><div class="header-search"><div class="container"><div class="row"><div class="col-md-12"><div class="row"><form class="search" method="get" action="https://blog.codecentric.de/en" role="search"> <input class="search-input col-md-10" type="search" name="s" placeholder="To search, type and hit enter."><div class="col-md-2 pull-right text-right"> <input type="image" src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="To search, type and hit enter."/> <span class="searchform-close"></span></div><input type='hidden' name='lang' value='en' /></form></div></div></div></div></div></div><div class="header-top-wrap"><div class="header-top"><div class="container"><div class="row regular"><div class="col-md-3 hidden-sm"> <a href="https://www.codecentric.de/"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo.png" class="cc-logo" alt="codecentric"/> </a></div><div class="col-sm-2 visible-sm"> <a href="https://www.codecentric.de/"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo-mobil-active.png" class="cc-logo" alt="codecentric"/> </a></div><div class="col-sm-10 col-md-9 pull-right"><ul class="list-inline list-unstyled top-nav"><li><a href="https://www.codecentric.de/leistungen/" class="">Services</a></li><li><a href="https://www.codecentric.de/karriere/" class="">Career</a></li><li><a href="https://www.codecentric.de/wissen/" class="">Knowledge</a></li><li><a href="https://blog.codecentric.de/en/" class="active">Blog</a></li><li><a href="https://www.codecentric.de/aktuelles/" class="">News</a></li><li><a href="https://www.codecentric.de/ueber-uns/" class="">About us</a></li><li class="searchform-wrap"> <span class="searchform"></span></li><li class="last"> <a href="https://blog.codecentric.de/2011/03/nutzliche-jvm-flags-teil-2/" class="lang">de</a></li></ul></div></div></div></div></div></div><div class="header-bottom"><div class="container"><div class="row"><div class="col-md-12"><div class="title"><a href="https://blog.codecentric.de/">codecentric Blog</a></div><h1 class="homepage"> IT Knowledge from developers for developers</h1><div class="counterWrap"><div class="counterWrapInner"><p> <span class="counter" data-count="1407">0</span><br/> Posts</p></div></div></div></div></div></div></header><header class="visible-xs"><div class="header-search header-search-mobil"><div class="row"><form class="search" method="get" action="https://blog.codecentric.de/en" role="search"> <input class="search-input col-md-10" type="search" name="s" placeholder="To search, type and hit enter."><div class="col-md-2 pull-right text-right"> <input type="image" src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="To search, type and hit enter."/> <span class="searchform-close"></span></div><input type='hidden' name='lang' value='en' /></form></div></div><div class="header-top header-top-mobil"><div class="container"><div class="row"><div class="col-xs-2"><div class="trigger-menu trigger-menu-mobil"> <span></span></div></div><div class="col-xs-8 text-center"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/images/codecentric-logo.png" class="logo img-responsive" alt="codecentric"></div><div class="col-xs-2 text-right"><span class="search-trigger-mobil"> <img src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="codecentric"/> </span></div></div></div></div><div class="header-bottom"><div class="container"><div class="row"><div class="col-md-12"><div class="title"><a href="https://blog.codecentric.de/">codecentric Blog</a></div></div></div></div></div></header><nav class="category-nav"><div class="container"><div class="row"><div class="col-md-12"><ul id="menu-category-navigation-en" class="list-inline list-unstyled"><li id="menu-item-28513" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-28513"><a href="/en/">New</a></li><li id="menu-item-28518" class="agile menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28518"><a href="https://blog.codecentric.de/en/category/agile-en/">Agile</a></li><li id="menu-item-28519" class="architektur menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28519"><a href="https://blog.codecentric.de/en/category/architecture/">Architecture</a></li><li id="menu-item-28520" class="java menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28520"><a href="https://blog.codecentric.de/en/category/java-en/">Java</a></li><li id="menu-item-28521" class="performance menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28521"><a href="https://blog.codecentric.de/en/category/performance-en/">Performance</a></li><li id="menu-item-28522" class="continuous-delivery menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28522"><a href="https://blog.codecentric.de/en/category/continuous-delivery-agile-en/">Continuous Delivery</a></li><li id="menu-item-28523" class="microservices menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28523"><a href="https://blog.codecentric.de/en/category/architecture/microservices-architecture/">Microservices</a></li><li id="menu-item-28524" class="cloud menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28524"><a href="https://blog.codecentric.de/en/category/architecture/cloud-architecture/">Cloud</a></li></ul><div class="close-category-nav"></div><div class="open-category-nav"></div><div class="rssLink"><a href="" class="hidden-xs"><i class="fa fa-rss" aria-hidden="true"></i> RSS-Feed</a></div></div></div></div></nav><main role="main"><section class="article-single-item"><div class="container"><div class="row"><div class="col-lg-3 col-md-2"> <a href="https://blog.codecentric.de/en/category/java-en/" title="Java" class="back">Overview</a><div class="banner hidden-sm hidden-xs"><div id="instanaBanner"> <span class="hs-cta-wrapper" id="hs-cta-wrapper-cab37222-7327-4b41-8534-bd8c4154b2d1"> <span class="hs-cta-node hs-cta-cab37222-7327-4b41-8534-bd8c4154b2d1" id="hs-cta-cab37222-7327-4b41-8534-bd8c4154b2d1"> <!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--> <a href="http://cta-redirect.hubspot.com/cta/redirect/1918859/cab37222-7327-4b41-8534-bd8c4154b2d1" target="_blank" ><img class="hs-cta-img img-responsive" id="hs-cta-img-cab37222-7327-4b41-8534-bd8c4154b2d1" style="border-width:0px;" src="https://no-cache.hubspot.com/cta/default/1918859/cab37222-7327-4b41-8534-bd8c4154b2d1.png" alt="The instana robot complete"/></a> </span> <script charset="utf-8" src="https://js.hscta.net/cta/current.js"></script> <script type="text/javascript">hbspt.cta.load(1918859, 'cab37222-7327-4b41-8534-bd8c4154b2d1', {});</script> </span></div></div></div><div class="col-lg-6 col-md-8"><article id="post-14413" class="post-14413 post type-post status-publish format-standard hentry category-java-en category-performance-en category-uncategorized"><h1> <a href="https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" title="Useful JVM Flags &#8211; Part 2 (Flag Categories and JIT Compiler Diagnostics)">Useful JVM Flags &#8211; Part 2 (Flag Categories and JIT Compiler Diagnostics)</a></h1><p class="article-details pull-left"> <span class="post-date">07/15/12</span> <span class="post-author">by <a href="https://blog.codecentric.de/en/author/patrick-peschlow/" title="Posts by Patrick Peschlow" rel="author">Patrick Peschlow</a> </span></p><p class="article-comments pull-right"> <a href="https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/#comments" title="Useful JVM Flags &#8211; Part 2 (Flag Categories and JIT Compiler Diagnostics)">No Comments </a></p><div class="clearfix"></div><p>In the second part of this series, I give an introduction to the different categories of flags offered by the HotSpot JVM. Also, I am going to discuss some interesting flags regarding JIT compiler diagnostics.</p><p><strong>JVM flag categories</strong></p><p>The HotSpot JVM offers three categories of flags. The first category contains the <em>standard flags</em>. As the name suggests, both the functionality and the output of a standard flag are stable and will most likely not change in future releases of the JVM. You can retrieve a list of all standard flags by running <code>java</code> without any parameter (or with the parameter <code>-help</code>, which incidentally is a standard flag itself). We have already seen some of the standard flags, e.g., <code>-server</code>, in the <a href="http://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-1-jvm-types-and-compiler-modes/" title="Useful JVM Flags – Part 1 (JVM Types and Compiler Modes)">first part</a> of this series.</p><p><span id="more-14413"></span></p><p>The second category are the <em>X flags</em>, non-standardized flags the behavior or availability of which may change with future releases. All flags of this category start with &#8220;-X&#8221; and can be listed with <code>java -X</code>. Note that the list is not guaranteed to be complete, one notable missing flag being <code>-Xcomp</code>.</p><p>The third (and by far the largest) category consists of the <em>XX flags</em>, which are also non-standardized and could not even be listed for a long time (recently, this has changed, and we will return to this topic in the third part of the series). For practical use, however, there is no real difference between X flags and XX flags. The behavior of the X flags is quite stable, whereas many of the XX flags are rather experimental (and are primarily used by JVM developers for debugging and tuning of the JVM implementation itself). A worthwhile read is the <a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">HotSpot JVM documentation</a> for non-standardized flags which explicitly states that XX flags should not be used in a careless fashion. This is true, but in my view this recommendation equally holds for the X flags (and some of the standard flags as well). Regardless of the category, it pays off to try to understand the intended behavior (and possible side effects) of a flag before using it.</p><p>One word about the syntax of XX flags. All XX flags start with &#8220;-XX:&#8221;, but then the syntax differs depending on the type of flag.</p><ul><li>For a boolean flag, we either have a &#8220;+&#8221; or a &#8220;-&#8221; and only then the actual name of the JVM option to set. For example, <code>-XX:+&lt;name&gt;</code> activates the option <code>&lt;name&gt;</code> while <code>-XX:-&lt;name&gt;</code> deactives that option.</li><li>For a flag that takes a non-boolean value like a text string or an integer number, we first have the name of the flag followed by a &#8220;=&#8221;, and then the value to set. For example, <code>-XX:&lt;name&gt;=&lt;value&gt;</code> sets the option <code>&lt;name&gt;</code> to the value <code>&lt;value&gt;</code>.</li></ul><p>Now let us take a look at some XX flags from the area of JIT compilation.</p><p><strong>-XX:+PrintCompilation and -XX:+CITime</strong></p><p>It is quite revealing to watch the JIT compiler work while a Java application is running. By setting the flag <code>-XX:+PrintCompilation</code> we can enable some simple output regarding the bytecode to native code compilation. Let us consider an example (output shortened) for a run of the server VM:</p><div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">$ <span style="color: #c20cb9; font-weight: bold;">java</span> <span style="color: #660033;">-server</span> -XX:+PrintCompilation Benchmark
  <span style="color: #000000;">1</span>       java.lang.String::hashCode <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">64</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">2</span>       java.lang.AbstractStringBuilder::stringSizeOfInt <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">21</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">3</span>       java.lang.Integer::getChars <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">131</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">4</span>       java.lang.Object::<span style="color: #000000; font-weight: bold;">&lt;</span>init<span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">1</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #660033;">---</span>   n   java.lang.System::arraycopy <span style="color: #7a0874; font-weight: bold;">&#40;</span>static<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">5</span>       java.util.HashMap::indexFor <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">6</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">6</span>       java.lang.Math::min <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">11</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">7</span>       java.lang.String::getChars <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">66</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">8</span>       java.lang.AbstractStringBuilder::append <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">60</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
  <span style="color: #000000;">9</span>       java.lang.String::<span style="color: #000000; font-weight: bold;">&lt;</span>init<span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">72</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">10</span>       java.util.Arrays::copyOfRange <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">63</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">11</span>       java.lang.StringBuilder::append <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">8</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">12</span>       java.lang.AbstractStringBuilder::<span style="color: #000000; font-weight: bold;">&lt;</span>init<span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">12</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">13</span>       java.lang.StringBuilder::toString <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">17</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">14</span>       java.lang.StringBuilder::<span style="color: #000000; font-weight: bold;">&lt;</span>init<span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">18</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
 <span style="color: #000000;">15</span>       java.lang.StringBuilder::append <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">8</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #7a0874; font-weight: bold;">&#91;</span>...<span style="color: #7a0874; font-weight: bold;">&#93;</span>
 <span style="color: #000000;">29</span>       java.util.regex.Matcher::reset <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">83</span> bytes<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">$ java -server -XX:+PrintCompilation Benchmark 1 java.lang.String::hashCode (64 bytes) 2 java.lang.AbstractStringBuilder::stringSizeOfInt (21 bytes) 3 java.lang.Integer::getChars (131 bytes) 4 java.lang.Object::&lt;init&gt; (1 bytes) --- n java.lang.System::arraycopy (static) 5 java.util.HashMap::indexFor (6 bytes) 6 java.lang.Math::min (11 bytes) 7 java.lang.String::getChars (66 bytes) 8 java.lang.AbstractStringBuilder::append (60 bytes) 9 java.lang.String::&lt;init&gt; (72 bytes) 10 java.util.Arrays::copyOfRange (63 bytes) 11 java.lang.StringBuilder::append (8 bytes) 12 java.lang.AbstractStringBuilder::&lt;init&gt; (12 bytes) 13 java.lang.StringBuilder::toString (17 bytes) 14 java.lang.StringBuilder::&lt;init&gt; (18 bytes) 15 java.lang.StringBuilder::append (8 bytes) [...] 29 java.util.regex.Matcher::reset (83 bytes)</p></div><p>Whenever a method is compiled, a line is printed to the output of <code>-XX:+PrintCompilation</code>. Each line consists of a running number (a unique compiler task ID) and the name and size of the compiled method. Thus, line 1 represents the compilation of the String::hashCode method to native code. Depending on the type of method and compiler task, additional output characters are printed. For example, the creation of a native wrapper method is marked by an &#8220;n&#8221;, like with System::arraycopy in the example above. Note that such a line does not contain a running number and method size, because nothing is actually compiled to native code. It is also possible to see methods being recompiled, see the output for StringBuilder::append in lines 11 and 15. The output stops at line 29, which means that there were a total of 29 method compilations while this Java application was running.</p><p>There is no official documentation of <code>-XX:+PrintCompilation</code>, but <a href="http://gist.github.com/1165804#file_notes.md">this description</a> is one of the few good resources on the output of this flag. I highly recommend it for further study.</p><p>The JIT compiler output helps us to understand some differences between the client VM and the server VM. With the server VM, our example application produces 29 lines of compilation output while the use of the client VM results in 55 lines (no figure shown). This may seem strange because the server VM is supposed to do &#8220;more&#8221; compilation than the client VM. However, given their respective default settings, the server VM watches methods much longer than the client VM before deciding whether they are hot spots and need to be compiled at all. Thus, it is not surprising that, with the server VM, some potential method compilations may only happen at a later stage.</p><p>By additionally setting the flag <code>-XX:+CITime</code> we request various statistics about compilations to be printed on JVM shutdown. Let us take a look at just one particular section of the statistics:</p><div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">$ <span style="color: #c20cb9; font-weight: bold;">java</span> <span style="color: #660033;">-server</span> -XX:+CITime Benchmark
<span style="color: #7a0874; font-weight: bold;">&#91;</span>...<span style="color: #7a0874; font-weight: bold;">&#93;</span>
Accumulated compiler <span style="color: #7a0874; font-weight: bold;">times</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">for</span> compiled methods only<span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #660033;">------------------------------------------------</span>
  Total compilation <span style="color: #000000; font-weight: bold;">time</span>   :  <span style="color: #000000;">0.178</span> s
    Standard compilation   :  <span style="color: #000000;">0.129</span> s, Average : <span style="color: #000000;">0.004</span>
    On stack replacement   :  <span style="color: #000000;">0.049</span> s, Average : <span style="color: #000000;">0.024</span>
<span style="color: #7a0874; font-weight: bold;">&#91;</span>...<span style="color: #7a0874; font-weight: bold;">&#93;</span></pre></td></tr></table><p class="theCode" style="display:none;">$ java -server -XX:+CITime Benchmark [...] Accumulated compiler times (for compiled methods only) ------------------------------------------------ Total compilation time : 0.178 s Standard compilation : 0.129 s, Average : 0.004 On stack replacement : 0.049 s, Average : 0.024 [...]</p></div><p>A total of 0.178 seconds has been spent (on the 29 compiler tasks). Of these, 0.049 seconds belong to &#8220;on stack replacement&#8221;, i.e., the compilation of a method currently on the stack. This technique is not so simple to implement in a performant fashion, but it is actually highly important. Without &#8220;on stack replacement&#8221;, methods that have a long execution time (for example, because they contain long-running loops) could not be replaced on the fly by their compiled counterparts.</p><p>Once again, the comparison between the client VM and the server VM is interesting. The corresponding statistics for the client VM (no figure shown) indicate that even though 55 methods have been compiled, only a total of 0.021 seconds was spent on these compilations. Thus, the server VM has done less compilations than the client VM, but it spent much more time on them. The reason for this behavior is that the server VM performs more optimizations when generating native code.</p><p>In the first part of this series, we have learned about the flags <code>-Xint</code> and <code>-Xcomp</code>. With <code>-XX:+PrintCompilation</code> and <code>-XX:+CITime</code> we can now get a better picture of how the JIT compiler behaves in both cases. With <code>-Xint</code>, the flag <code>-XX:+PrintCompilation</code> produces exactly zero lines of output in both cases. Also, <code>-XX:+CITime</code> confirms that no time at all has been spent on compilation. Now with <code>-Xcomp</code> things are different. The client VM produces 726 lines of output immediately after startup and then no more because every relevant method has been compiled. With the server VM we even see 993 lines of output, which tells us that more aggressive optimizations are performed. Also, the statistics printed on JVM teardown show a huge difference between the two VMs. Consider the run with the server VM:</p><div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">$ <span style="color: #c20cb9; font-weight: bold;">java</span> <span style="color: #660033;">-server</span> <span style="color: #660033;">-Xcomp</span> -XX:+CITime Benchmark
<span style="color: #7a0874; font-weight: bold;">&#91;</span>...<span style="color: #7a0874; font-weight: bold;">&#93;</span>
Accumulated compiler <span style="color: #7a0874; font-weight: bold;">times</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">for</span> compiled methods only<span style="color: #7a0874; font-weight: bold;">&#41;</span>
<span style="color: #660033;">------------------------------------------------</span>
  Total compilation <span style="color: #000000; font-weight: bold;">time</span>   :  <span style="color: #000000;">1.567</span> s
    Standard compilation   :  <span style="color: #000000;">1.567</span> s, Average : <span style="color: #000000;">0.002</span>
    On stack replacement   :  <span style="color: #000000;">0.000</span> s, Average : -<span style="color: #000000;">1</span>.<span style="color: #666666; font-style: italic;">#IO</span>
<span style="color: #7a0874; font-weight: bold;">&#91;</span>...<span style="color: #7a0874; font-weight: bold;">&#93;</span></pre></td></tr></table><p class="theCode" style="display:none;">$ java -server -Xcomp -XX:+CITime Benchmark [...] Accumulated compiler times (for compiled methods only) ------------------------------------------------ Total compilation time : 1.567 s Standard compilation : 1.567 s, Average : 0.002 On stack replacement : 0.000 s, Average : -1.#IO [...]</p></div><p>The 1.567 seconds spent on compilations using <code>-Xcomp</code> are about 10 times as much as with the default settings, i.e., mixed mode. Still, the application runs slower than with mixed mode. For comparison, the client VM only takes 0.208 seconds to compile its 726 methods using <code>-Xcomp</code>, and it is even slower than the server VM with <code>-Xcomp</code>.</p><p>As a side note, no &#8220;on stack replacement&#8221; takes place because every method gets compiled when it is called for the first time. The corrupted output &#8220;Average: -1.#IO&#8221; (correct would be: 0) demonstrates once more that the output of non-standardized flags is nothing to rely on too much.</p><p><strong>-XX:+UnlockExperimentalVMOptions</strong></p><p>Sometimes when setting a particular JVM flag, the JVM terminates right after startup printing the message &#8220;Unrecognized VM option&#8221;. If that happens, you should first check if you mistyped the flag. However, if the name is spelled correctly and the JVM still does not recognize the flag, you may need to unlock the flag by setting <code>-XX:+UnlockExperimentalVMOptions</code>. It is not quite clear to me why this security mechanism is needed, but I suspect that the flags guarded in this way have a tendency to affect the stability of the JVM if not used properly (for example, because they may write excessive debug output to some log file).</p><p>Some flags are only intended to be used for JVM development but not for actual use with Java applications. If a flag cannot be enabled by <code>-XX:+UnlockExperimentalVMOptions</code>, but you really need to use that flag for whatever reason, then you may try your luck with a debug build of the JVM. For the Java 6 HotSpot JVM you can find debug builds here.</p><p><strong>-XX:+LogCompilation and -XX:+PrintOptoAssembly</strong></p><p>If you find yourself in a situation where the information given by <code>-XX:+PrintCompilation</code> is not detailed enough, you can use the flag <code>-XX:+LogCompilation</code> to write extended compilation output into the file &#8220;hotspot.log&#8221;. In addition to many details about the compiled methods you can also see which compiler threads were started for which tasks. Note that <code>-XX:+LogCompilation</code> needs to be unlocked by <code>-XX:+UnlockExperimentalVMOptions</code>.</p><p>The JVM even allows us to take a look at the native code resulting from bytecode compilation. With the flag <code>-XX:+PrintOptoAssembly</code>, the native code generated by the compiler threads gets written both to stdout and to the file &#8220;hotspot.log&#8221;. Using this flag requires you to run a debug build of the server VM. We can study the output of <code>-XX:+PrintOptoAssembly</code> in order to understand what kind of optimizations the JVM actually performs, for example regarding dead code elimination. An interesting article presenting an example can be found here.</p><p><strong>Further information about XX flags</strong></p><p>If this article tickled your fancy, just take a look at the XX flags of the HotSpot JVM yourself. A good starting point is <a href="http://stas-blogspot.blogspot.de/2011/07/most-complete-list-of-xx-options-for.html" title="The most complete list of -XX options for Java JVM">this list</a>.</p></article></div><div class="col-lg-3 col-md-2 pull-right"> <span class="next-posts"> <a href="https://blog.codecentric.de/en/2012/07/a-debugger-for-the-robot-framework-almost/" rel="next">A Debugger for the Robot Framework (almost)</a> </span><div class="banner hidden-sm hidden-xs"></div></div></div></div><div class="article-single-author"><div class="container"><div class="row"><div class="col-lg-3 col-md-2"><h2><a href="https://blog.codecentric.de/en/author/patrick-peschlow/" title="Posts by Patrick Peschlow" rel="author">Patrick Peschlow</a></h2></div><div class="col-lg-6 col-md-8"><div class="row"><div class="col-md-2 col-xs-3 col-sm-3"> <img src="https://blog.codecentric.de/files/2015/10/patrick_peschlow-250x250.jpg" width="200" height="200" alt="Patrick Peschlow" class="avatar avatar-200 wp-user-avatar wp-user-avatar-200 alignnone photo" /></div><div class="col-md-10 col-xs-9 col-sm-9"></div></div></div></div><div class="row"><div class="col-md-6 col-md-offset-3"><div class="ssba ssba-wrap"><div style="text-align:left"><a data-site="" class="ssba_facebook_share" href="http://www.facebook.com/sharer.php?u=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-facebook.png" title="Facebook" class="ssba ssba-img" alt="Share on Facebook" /></a><a data-site="" class="ssba_google_share" href="https://plus.google.com/share?url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-google.png" title="Share on Google+" class="ssba ssba-img" alt="Google+" /></a><a data-site="linkedin" class="ssba_linkedin_share ssba_share_link" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-linkedin.png" alt="Share on LinkedIn" title="LinkedIn" class="ssba ssba-img" /></a><a data-site="" class="ssba_twitter_share" href="http://twitter.com/share?url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/&amp;text=Useful+JVM+Flags+%E2%80%93+Part+2+%28Flag+Categories+and+JIT+Compiler+Diagnostics%29+%23codecentric" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-twitter.png" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" /></a><a data-site="reddit" class="ssba_reddit_share" href="http://reddit.com/submit?url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/&amp;title=Useful JVM Flags &#8211; Part 2 (Flag Categories and JIT Compiler Diagnostics)" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-reddit.png" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" /></a><a data-site="digg" class="ssba_diggit_share ssba_share_link" href="http://www.digg.com/submit?url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-digg.png" title="Digg" class="ssba ssba-img" alt="Digg this" /></a><a data-site="stumbleupon" class="ssba_stumbleupon_share ssba_share_link" href="http://www.stumbleupon.com/submit?url=https://blog.codecentric.de/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/&#038;title=Useful%20JVM%20Flags%20&#8211;%20Part%202%20(Flag%20Categories%20and%20JIT%20Compiler%20Diagnostics)" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-stumple.png" alt="Share on StumbleUpon" title="StumbleUpon" class="ssba ssba-img" /></a></div></div></div></div></div></div><div class="container"><div class="row article-single-links"><div class="col-md-5 col-md-5"><h2>Post by <strong>Patrick Peschlow</strong></h2><div class="author-post-item"><p><a href="https://blog.codecentric.de/2015/04/elasticon-erste-elasticsearch-user-konferenz-in-san-francisco/">Elastic{ON}: Erste Elasticsearch-User-Konferenz in San Francisco</a></p></div><div class="author-post-item"><span class="cat-name">Search</span><p><a href="https://blog.codecentric.de/en/2015/03/scaling-elasticsearch-index-introduction/">Scaling an Elasticsearch Index &#8211; Introduction</a></p></div></div><div class="col-md-7 col-md-5"><div class="row"><div class="col-md-12"><h2>More content about <strong>Java</strong></h2><div class="row"><div class="col-md-8"><div class="related-post-item"> <span class="cat-name">Java</span><p> <a href="https://blog.codecentric.de/en/2017/08/parsing-of-localdate-query-parameters-in-spring-boot/">Parsing of LocalDate query parameters in Spring Boot</a></p></div><div class="related-post-item"> <span class="cat-name">Java</span><p> <a href="https://blog.codecentric.de/en/2017/08/defence-autistic-tools/">In defence of pedantic tools</a></p></div></div></div></div></div></div></div></div><a id="comments"></a><div class="container article-single-comments"><div class="row"><div class="col-md-3"><h2>Comment</h2></div><div class="col-md-7"><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/en/2012/07/useful-jvm-flags-part-2-flag-categories-and-jit-compiler-diagnostics/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://blog.codecentric.de/wp-comments-post.php" method="post" id="commentform" class="comment-form form-horizontal"><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><div class="form-group"><div class="col-md-12"><textarea autocomplete="nope"  placeholder="Nachricht" id="f4b5f491aa"  name="74c8835c95"  class="form-control"  cols="45" rows="8" aria-required="true"></textarea><textarea id="comment" aria-hidden="true" name="comment" autocomplete="nope" style="clip:rect(1px, 1px, 1px, 1px);position:absolute !important;white-space:nowrap;height:1px;width:1px;overflow:hidden;" tabindex="-1"></textarea><script type="text/javascript">document.getElementById("comment").setAttribute( "id", "52a089dfd0e51f6684fef008a786f00b" );document.getElementById("f4b5f491aa").setAttribute( "id", "comment" );</script></div></div><div class="form-group"><div class="col-md-6"><input id="author" class="form-control" placeholder="Name" name="author" type="text" value="" size="30" /></div><div class="col-md-6"><input placeholder="E-Mail" id="email" name="email" class="form-control" type="text" value="" size="30" /></div></div><p class="form-submit"><input name="submit" type="submit" id="submit" class="btn btn-default pull-right" value="Submit" /> <input type='hidden' name='comment_post_ID' value='14413' id='comment_post_ID' /> <input type='hidden' name='comment_parent' id='comment_parent' value='0' /></p><p class="subscribe-to-doi-comments"> <label for="subscribe"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" /> Notify me of followup comments via e-mail</label></p></form></div></div></div></div></section></main><footer class="footer" role="contentinfo"><div class="container"><div class="row footer-sitemap"><div class="col-md-4 col-sm-12"><h3> Newsletter</h3><form action="https://www.codecentric.de/formulare/newsletter/" class="form-inline" target="_blank" method="post"><div class="form-group"><div class="row"><div class="col-xs-12"> <input type="email" class="form-control" name="email" placeholder="E-Mail Adresse"/><input type="submit" value="Submit" class=" form-control btn btn-default"/></div></div></div></form></div></div><div class="row"><div class="visible-xs col-xs-12"><ul class="list-inline list-unstyled icons-footer"><li class="first"> <a href="https://www.facebook.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/facebook.gif" alt="codecentric - Facebook"/> </a></li><li class="last"> <a href="https://twitter.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/twitter.gif" alt="codecentric - Twitter"/> </a></li></ul></div><div class="col-xs-12 col-sm-10"><ul class="list-inline list-unstyled footer-metanav"><li><a href="https://www.codecentric.de/impressum-datenschutz/" target="_blank" class="">Imprint</a></li><li><a href="https://www.codecentric.de/terms-and-conditions/" target="_blank" class="">Privacy Policy</a></li><li><a href="https://www.codecentric.de/ueber-codecentric/kontakt/" target="_blank" class="">Contact</a></li></ul></div><div class="hidden-xs col-sm-2 pull-right"><ul class="list-inline list-unstyled pull-right icons-footer"><li class="first"> <a href="https://www.facebook.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/facebook.gif" alt="codecentric - Facebook"/> </a></li><li class="last"> <a href="https://twitter.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/twitter.gif" alt="codecentric - Twitter"/> </a></li></ul></div></div></div></footer><div class="searchform-overlay"></div><div class="mobile-navi-overlay"></div><div class="mobile-navi"><div class="container"><div class="row"><div class="col-xs-12"><div class="trigger-menu trigger-menu-mobil-active"> <span>X</span></div><ul class="list-unstyled"><li><a href="https://www.codecentric.de/leistungen/" class="">Services</a></li><li><a href="https://www.codecentric.de/karriere/" class="">Career</a></li><li><a href="https://www.codecentric.de/wissen/" class="">Knowledge</a></li><li><a href="https://blog.codecentric.de/en/" class="active">Blog</a></li><li><a href="https://www.codecentric.de/aktuelles/" class="">News</a></li><li><a href="https://www.codecentric.de/ueber-uns/" class="">About us</a></li><li><a href="https://blog.codecentric.de/2011/03/nutzliche-jvm-flags-teil-2/" class="lang">Deutsch</a></li></ul></div></div></div></div> <script type='text/javascript'>var icl_vars = {"current_language":"en","icl_home":"https:\/\/blog.codecentric.de\/en\/"};</script> <script>(function(h,o,t,j,a,r){ h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)}; h._hjSettings={hjid:325170,hjsv:5}; a=o.getElementsByTagName('head')[0]; r=o.createElement('script');r.async=1; r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv; a.appendChild(r); })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');</script> <script type="text/javascript">(function(d,s,i,r) { if (d.getElementById(i)){return;} var n=d.createElement(s),e=d.getElementsByTagName(s)[0]; n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/1918859.js'; e.parentNode.insertBefore(n, e); })(document,"script","hs-analytics",300000);</script> <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/1918859.js"></script> <script type="application/ld+json">{ "@context" : "http://schema.org", "@type": "LocalBusiness", "geo":{ "@type":"GeoCoordinates", "latitude":51.162073, "longitude":-7.007063 }, "address" : { "addressLocality": "Solingen", "addressRegion": "NRW", "postalCode": "42697", "streetAddress": "Hochstraße 11" }, "name":"codecentric AG", "url":"https://www.codecentric.de/", "email":"info@codecentric.de", "telephone":"+4902122336280", "image":"https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo.png" }</script> <script type="text/javascript" defer src="https://blog.codecentric.de/wp-content/cache/autoptimize/2/autoptimize_e2f30fc27c1231b8c228cc68eac4af9b.php"></script></body></html>

<!--
Cachify | http://cachify.de
Ohne Plugin: 118 DB-Anfragen, 0.37 Sekunden, 16.62 MB
Mit Plugin: 52 DB-Anfragen, 0.14 Sekunden, 13.83 MB
Generiert: 1 hour zuvor
-->