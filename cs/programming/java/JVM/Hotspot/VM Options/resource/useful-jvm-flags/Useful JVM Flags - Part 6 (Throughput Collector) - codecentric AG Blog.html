<!doctype html><html lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#" class="no-js"><head><meta charset="UTF-8"><link type="text/css" media="all" href="https://blog.codecentric.de/wp-content/cache/autoptimize/2/autoptimize_06a85d694f971f4152da449e38354fab.php" rel="stylesheet" /><title>Useful JVM Flags - Part 6 (Throughput Collector) - codecentric AG Blog</title><link href="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/icons/favicon.ico" rel="shortcut icon"><link href="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/icons/touch.png" rel="apple-touch-icon-precomposed"><link rel="profile" href="http://gmpg.org/xfn/11"/><link rel="pingback" href="https://blog.codecentric.de/xmlrpc.php"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="google-site-verification" content="udyUJphOAc3iTldVhEpkEzYUeCNAQm1RJM4xXwKi82Q" /> <script>(function(i,s,o,g,r,a,m){i['InstanaEumObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//eum.instana.io/eum.min.js','ineum'); ineum('apiKey', 'cnkUbWdYSY-gaq4B26lgxw'); // Backend trace ID to facilitate correlation of frontend/backend traces. // Trace ID is available in backend to user code. // User is himself responsible for embedding this trace ID in this snippet. // ineum('traceId', '<backend trace id>'); // free form key/value pairs for advanced end-user tracking // ineum('meta', 'user', 'tom.mason@example.com');</script> <link rel="canonical" href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" /><link rel="publisher" href="https://plus.google.com/+codecentricDe"/><meta property="og:locale" content="en_US" /><meta property="og:type" content="article" /><meta property="og:title" content="Useful JVM Flags - Part 6 (Throughput Collector) - codecentric AG Blog" /><meta property="og:description" content="For most application areas that we find in practice, a garbage collection (GC) algorithm is being evaluated according to two criteria: The higher the achieved throughput, the better the algorithm. The smaller the resulting pause times, the better the algorithm. Let us first clarify the terms &#8220;throughput&#8221; and &#8220;pause times&#8221; in the context of GC.... Read more" /><meta property="og:url" content="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" /><meta property="og:site_name" content="codecentric AG Blog" /><meta property="article:publisher" content="https://www.facebook.com/codecentric" /><meta property="article:section" content="Java" /><meta property="article:published_time" content="2013-01-01T16:00:50+02:00" /><meta property="fb:admins" content="828173743" /><meta name="twitter:card" content="summary" /><meta name="twitter:description" content="For most application areas that we find in practice, a garbage collection (GC) algorithm is being evaluated according to two criteria: The higher the achieved throughput, the better the algorithm. The smaller the resulting pause times, the better the algorithm. Let us first clarify the terms &#8220;throughput&#8221; and &#8220;pause times&#8221; in the context of GC.... Read more" /><meta name="twitter:title" content="Useful JVM Flags - Part 6 (Throughput Collector) - codecentric AG Blog" /><meta name="twitter:site" content="@codecentric" /><meta name="twitter:creator" content="@codecentric" /><link rel='dns-prefetch' href='//ajax.googleapis.com' /><link rel='dns-prefetch' href='//s.w.org' /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blog.codecentric.de\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.1"}}; !function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js?ver=1.11.0'></script> <link rel='https://api.w.org/' href='https://blog.codecentric.de/en/wp-json/' /><link rel="alternate" type="application/json+oembed" href="https://blog.codecentric.de/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblog.codecentric.de%2Fen%2F2013%2F01%2Fuseful-jvm-flags-part-6-throughput-collector%2F" /><link rel="alternate" type="text/xml+oembed" href="https://blog.codecentric.de/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblog.codecentric.de%2Fen%2F2013%2F01%2Fuseful-jvm-flags-part-6-throughput-collector%2F&#038;format=xml" /><meta name="generator" content="WPML ver:3.2.2 stt:1,3;" /><link rel="alternate" hreflang="en-US" href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/"/><link rel="alternate" hreflang="x-default" href="https://blog.codecentric.de/2012/01/nutzliche-jvm-flags-teil-6/"/><link rel="shortcut icon" type="image/x-icon" href="/wp-content/themes/codecentric2015-HP/img/icons/favicon.ico" /> <script type="text/javascript">var analyticsFileTypes = ['']; var analyticsSnippet = 'disabled'; var analyticsEventTracking = 'enabled';</script> <script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2828835-3', 'auto'); ga('send', 'pageview');</script> </head><body class="post-template-default single single-post postid-16541 single-format-standard en useful-jvm-flags-part-6-throughput-collector"><header class="hidden-xs"><div class="header-top-outer-wrap"><div class="header-search-wrap"><div class="header-search"><div class="container"><div class="row"><div class="col-md-12"><div class="row"><form class="search" method="get" action="https://blog.codecentric.de/en" role="search"> <input class="search-input col-md-10" type="search" name="s" placeholder="To search, type and hit enter."><div class="col-md-2 pull-right text-right"> <input type="image" src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="To search, type and hit enter."/> <span class="searchform-close"></span></div><input type='hidden' name='lang' value='en' /></form></div></div></div></div></div></div><div class="header-top-wrap"><div class="header-top"><div class="container"><div class="row regular"><div class="col-md-3 hidden-sm"> <a href="https://www.codecentric.de/"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo.png" class="cc-logo" alt="codecentric"/> </a></div><div class="col-sm-2 visible-sm"> <a href="https://www.codecentric.de/"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo-mobil-active.png" class="cc-logo" alt="codecentric"/> </a></div><div class="col-sm-10 col-md-9 pull-right"><ul class="list-inline list-unstyled top-nav"><li><a href="https://www.codecentric.de/leistungen/" class="">Services</a></li><li><a href="https://www.codecentric.de/karriere/" class="">Career</a></li><li><a href="https://www.codecentric.de/wissen/" class="">Knowledge</a></li><li><a href="https://blog.codecentric.de/en/" class="active">Blog</a></li><li><a href="https://www.codecentric.de/aktuelles/" class="">News</a></li><li><a href="https://www.codecentric.de/ueber-uns/" class="">About us</a></li><li class="searchform-wrap"> <span class="searchform"></span></li><li class="last"> <a href="https://blog.codecentric.de/2012/01/nutzliche-jvm-flags-teil-6/" class="lang">de</a></li></ul></div></div></div></div></div></div><div class="header-bottom"><div class="container"><div class="row"><div class="col-md-12"><div class="title"><a href="https://blog.codecentric.de/">codecentric Blog</a></div><h1 class="homepage"> IT Knowledge from developers for developers</h1><div class="counterWrap"><div class="counterWrapInner"><p> <span class="counter" data-count="1408">0</span><br/> Posts</p></div></div></div></div></div></div></header><header class="visible-xs"><div class="header-search header-search-mobil"><div class="row"><form class="search" method="get" action="https://blog.codecentric.de/en" role="search"> <input class="search-input col-md-10" type="search" name="s" placeholder="To search, type and hit enter."><div class="col-md-2 pull-right text-right"> <input type="image" src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="To search, type and hit enter."/> <span class="searchform-close"></span></div><input type='hidden' name='lang' value='en' /></form></div></div><div class="header-top header-top-mobil"><div class="container"><div class="row"><div class="col-xs-2"><div class="trigger-menu trigger-menu-mobil"> <span></span></div></div><div class="col-xs-8 text-center"> <img src="https://blog.codecentric.de/wp-content/themes/codecentric2015/images/codecentric-logo.png" class="logo img-responsive" alt="codecentric"></div><div class="col-xs-2 text-right"><span class="search-trigger-mobil"> <img src="/wp-content/themes/codecentric2015/img/suche_lupe.png" alt="codecentric"/> </span></div></div></div></div><div class="header-bottom"><div class="container"><div class="row"><div class="col-md-12"><div class="title"><a href="https://blog.codecentric.de/">codecentric Blog</a></div></div></div></div></div></header><nav class="category-nav"><div class="container"><div class="row"><div class="col-md-12"><ul id="menu-category-navigation-en" class="list-inline list-unstyled"><li id="menu-item-28513" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-28513"><a href="/en/">New</a></li><li id="menu-item-28518" class="agile menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28518"><a href="https://blog.codecentric.de/en/category/agile-en/">Agile</a></li><li id="menu-item-28519" class="architektur menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28519"><a href="https://blog.codecentric.de/en/category/architecture/">Architecture</a></li><li id="menu-item-28520" class="java menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28520"><a href="https://blog.codecentric.de/en/category/java-en/">Java</a></li><li id="menu-item-28521" class="performance menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28521"><a href="https://blog.codecentric.de/en/category/performance-en/">Performance</a></li><li id="menu-item-28522" class="continuous-delivery menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28522"><a href="https://blog.codecentric.de/en/category/continuous-delivery-agile-en/">Continuous Delivery</a></li><li id="menu-item-28523" class="microservices menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28523"><a href="https://blog.codecentric.de/en/category/architecture/microservices-architecture/">Microservices</a></li><li id="menu-item-28524" class="cloud menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28524"><a href="https://blog.codecentric.de/en/category/architecture/cloud-architecture/">Cloud</a></li></ul><div class="close-category-nav"></div><div class="open-category-nav"></div><div class="rssLink"><a href="" class="hidden-xs"><i class="fa fa-rss" aria-hidden="true"></i> RSS-Feed</a></div></div></div></div></nav><main role="main"><section class="article-single-item"><div class="container"><div class="row"><div class="col-lg-3 col-md-2"> <a href="https://blog.codecentric.de/en/category/java-en/" title="Java" class="back">Overview</a><div class="banner hidden-sm hidden-xs"><div id="instanaBanner"> <span class="hs-cta-wrapper" id="hs-cta-wrapper-cab37222-7327-4b41-8534-bd8c4154b2d1"> <span class="hs-cta-node hs-cta-cab37222-7327-4b41-8534-bd8c4154b2d1" id="hs-cta-cab37222-7327-4b41-8534-bd8c4154b2d1"> <!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--> <a href="http://cta-redirect.hubspot.com/cta/redirect/1918859/cab37222-7327-4b41-8534-bd8c4154b2d1" target="_blank" ><img class="hs-cta-img img-responsive" id="hs-cta-img-cab37222-7327-4b41-8534-bd8c4154b2d1" style="border-width:0px;" src="https://no-cache.hubspot.com/cta/default/1918859/cab37222-7327-4b41-8534-bd8c4154b2d1.png" alt="The instana robot complete"/></a> </span> <script charset="utf-8" src="https://js.hscta.net/cta/current.js"></script> <script type="text/javascript">hbspt.cta.load(1918859, 'cab37222-7327-4b41-8534-bd8c4154b2d1', {});</script> </span></div></div></div><div class="col-lg-6 col-md-8"><article id="post-16541" class="post-16541 post type-post status-publish format-standard hentry category-java-en category-performance-en"><h1> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" title="Useful JVM Flags &#8211; Part 6 (Throughput Collector)">Useful JVM Flags &#8211; Part 6 (Throughput Collector)</a></h1><p class="article-details pull-left"> <span class="post-date">01/01/13</span> <span class="post-author">by <a href="https://blog.codecentric.de/en/author/patrick-peschlow/" title="Posts by Patrick Peschlow" rel="author">Patrick Peschlow</a> </span></p><p class="article-comments pull-right"> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#comments" title="Useful JVM Flags &#8211; Part 6 (Throughput Collector)">4 Comments </a></p><div class="clearfix"></div><p>For most application areas that we find in practice, a garbage collection (GC) algorithm is being evaluated according to two criteria:</p><ol><li>The higher the achieved throughput, the better the algorithm.</li><li>The smaller the resulting pause times, the better the algorithm.</li></ol><p>Let us first clarify the terms &#8220;throughput&#8221; and &#8220;pause times&#8221; in the context of GC. The JVM always executes a GC in dedicated threads, the &#8220;GC threads&#8221;. Whenever GC threads are active, they compete against the actual &#8220;application threads&#8221; for available processors and thus CPU time. Simplified just a little bit, we refer by &#8220;throughput&#8221; to the fraction of total program execution time at which the application threads are running. For example, a throughput of 99/100 means that on average the application threads are running 99 out of 100 seconds of program execution time, while the GC threads are only running for one second during the same time span.</p><p><span id="more-16541"></span>The term &#8220;pause time&#8221; refers to a time span in which the application threads are paused completely in favor of the GC threads. For example, a pause time of 100 milliseconds during a GC means that no application thread was active during that 100 millisecond interval. If we then refer to an &#8220;average pause time&#8221; of 100 milliseconds for a running application, we state that all pause times observed for that application had an average length of 100 milliseconds. Similarly, a &#8220;maximum pause time&#8221; of 100 milliseconds means that none of the pause times observed were larger than 100 milliseconds.</p><p><strong>Throughput vs. pause times</strong></p><p>A high throughput is desirable because only the application threads perform &#8220;productive&#8221; work in the perception of the end user of the application. Intuitively, an application runs faster if the throughput is higher. Low pause times are desirable as well, because from the end user&#8217;s perspective a hanging application is always undesirable regardless of whether the stalls are being caused by GC or other reasons. Depending on the type of application, even short pauses of 200 milliseconds can disrupt end user experience. Thus, it is important to have a low maximum pause time, in particular for an interactive application.</p><p>Unfortunately, &#8220;high throughput&#8221; and &#8220;low pause times&#8221; are competing goals. Think about it this way, again a bit simplified for the sake of clarity: A GC requires certain preconditions in order to run safely. For example, it must be guaranteed that application threads do not modify the state of objects while the GC threads try to decide which objects are still referenced and which ones are not. For this reason, the application threads must be stopped during a GC (or, depending on the algorithm used, only during certain phases of a GC). This, however, causes additional costs for thread scheduling: direct costs through context switches and indirect costs because of cache effects. Together with the costs for additional JVM-internal safety measures, this means that each GC comes along with some non-negligible overhead, which adds up with the time taken by the GC threads to perform their actual work. Therefore, we can maximize throughput by running the GC as seldom as possible, i.e., only when it is unavoidable, to save all the overhead associated with it.</p><p>However, executing the GC only infrequently means that whenever a GC is run it has much more work to do, as the number of objects that accumulated on the heap in the meantime is much higher. A single GC takes more time until completion, which in turn causes higher average and maximum pause times. Thus, with low pause times in mind, it would be desirable to run the GC more frequently so that each single run completes more quickly. This in turn adds overhead and causes throughput to decline, and we are back where we started.</p><p>In summary, when designing (or using!) a GC algorithm we have to decide what we are aiming for: A GC algorithm may target one of the two goals only (i.e., solely focus on maximum throughput or on minimal pause times) or try to find a compromise between them.</p><p><strong>Garbage collection on the HotSpot JVM</strong></p><p>We already discussed the young generation GC in <a title="Useful JVM Flags – Part 5 (Young Generation Garbage Collection)" href="http://blog.codecentric.de/en/2012/08/useful-jvm-flags-part-5-young-generation-garbage-collection/">part 5</a> of this series. For the old generation, the HotSpot JVM mainly offers two classes of GC algorithms (leaving aside the new G1 GC algorithm for now). The first class contains algorithms that try to maximize throughput while the second class tries to minimize pause times. Today we focus on the first, &#8220;throughput-oriented&#8221; class.</p><p>As we want to focus on configuration flags, I will only give a brief overview of the throughput-oriented GC algorithms offered by HotSpot. The GC algorithm is triggered when an object allocation in the old generation fails due to lack of space (usually, the &#8220;allocation&#8221; is in fact a promotion of an object from the young generation). Starting at so-called &#8220;GC roots&#8221;, the GC then searches the heap for reachable objects and marks them as alive. Afterwards, the GC moves the live objects within the old generation so that they occupy a single, non-fragmented memory block, and takes a note that the remaining memory area is free. That is, we don&#8217;t follow a copying strategy into a different heap area, like the young generation GC algorithm does. Instead, we keep all objects in the same heap area, thereby defragmenting that area. The collectors use one or more threads to perform GC. When more than one thread is used, the different steps of the algorithm are subdivided such that each GC thread mostly works in its own area without interfering with others. During a GC, all application threads are paused, getting restarted only when the GC is finished. Now let us take a look at the most important flags regarding the throughput-oriented GC algorithms.</p><p><strong>-XX:+UseSerialGC</strong></p><p>We use this flag to activate the serial, i.e., single-threaded version of the throughput-oriented garbage collector. Both the young generation and the old generation GC will be executed by a single GC thread only. This flag is to be recommended for JVMs that only have a single processor core available. In such a situation, using multiple GC threads would even be counterproductive because these threads would compete for CPU resources and cause synchronization overhead but never actually run in parallel.</p><p><strong>-XX:+UseParallelGC</strong></p><p>With this flag, we tell the JVM to execute the young generation GC in parallel using multiple GC threads. With Java 6, in my opinion, this flag should not be used because <code>-XX:+UseParallelOldGC</code> is clearly preferable. Note that with Java 7 the situation has changed a bit (see, e.g., <a title="Garbage Collectors Available In JDK 1.7.0_04" href="http://www.fasterj.com/articles/oraclecollectors1.shtml">this overview</a>) so that <code>-XX:+UseParallelGC</code> may be used to the same effect as <code>-XX:+UseParallelOldGC</code>.</p><p><strong>-XX:+UseParallelOldGC</strong></p><p>The naming of this flag is a little unfortunate because &#8220;old&#8221; sounds like &#8220;deprecated&#8221;. However, &#8220;old&#8221; actually refers to the old generation, which explains why <code>-XX:+UseParallelOldGC</code> is preferable over <code>-XX:+UseParallelGC</code>: in addition to a parallel young generation GC, it also activates parallel old generation GC. I recommend using this flag whenever high throughput it desired and the JVM has two or more processor cores available.</p><p>As a sidenote, the parallel versions of the throughput-oriented HotSpot GC algorithms are often called &#8220;throughput collectors&#8221; (or also: &#8220;the Throughput Collector&#8221;) because they aim at increased throughput through parallel execution.</p><p><strong>-XX:ParallelGCThreads</strong></p><p>With <code>-XX:ParallelGCThreads=&lt;value&gt;</code> we can specify the number of GC threads to use for parallel GC. For example, with <code>-XX:ParallelGCThreads=6</code> each parallel GC will be executed with six threads. If we don&#8217;t explicitly set this flag, the JVM will use a default value which is computed based on the number of available (virtual) processors. The determining factor is the value <code>N</code> returned by the Java method <code>Runtime.availableProcessors()</code>. For <code>N &lt;= 8</code> parallel GC will use just as many, i.e., <code>N</code> GC threads. For <code>N &gt; 8</code> available processors, the number of GC threads will be computed as <code>3+5N/8</code>.</p><p>Using the default setting makes most sense when the JVM uses the system and its processors exclusively. However, if more than one JVM (or other CPU-hungry systems) are all running on the same machine, we should use <code>-XX:ParallelGCThreads</code> in order to reduce the number of GC threads to an adequate value. For example, if four server JVMs are running on a machine with 16 processor cores, then <code>-XX:ParallelGCThreads=4</code> is a sensible choice so that GCs of different JVMs don&#8217;t interfere with each other.</p><p><strong>-XX:-UseAdaptiveSizePolicy</strong></p><p>The throughput collectors offer an interesting (but common, at least on modern JVMs) mechanism to improve user-friendliness of GC configuration. This mechanism is part of what is known as &#8220;ergonomics&#8221;, a concept introduced for HotSpot with Java 5. With ergonomics, the garbage collector may dynamically apply modifications to the different heap areas sizes as well as the GC settings if it has evidence that these modifications would improve GC performance. The precise meaning of &#8220;improve GC performance&#8221; may be specified by the user via the flags <code>-XX:GCTimeRatio</code> and <code>-XX:MaxGCPauseMillis</code> (see below).</p><p>It is important to know that ergonomics is activated by default &#8211; which is fine, as adaptive behavior is one of the biggest strengths of the JVM. Still, sometimes we may have a pretty clear idea of what settings are best for a particular application, and in these cases we might not want the JVM to mess around with our settings. Whenever we find ourselves in such a situation, we may consider deactivating some of the ergonomics by setting <code>-XX:-UseAdaptiveSizePolicy</code>.</p><p><strong>-XX:GCTimeRatio</strong></p><p>With <code>-XX:GCTimeRatio=&lt;value&gt;</code> we tell the JVM a target value for the throughput to achieve. More precisely, a value of <code>-XX:GCTimeRatio=N</code> specifies a target fraction of <code>N/(N+1)</code> for the execution time of the application threads (related to the total program execution time). For example, with <code>-XX:GCTimeRatio=9</code> we demand that the application threads should be active for at least 9/10 of the total execution time (and, accordingly, the GC threads for the remaining 1/10). Based on measurements at run time, the JVM will then try to modify the heap and GC configuration such that the the target throughput is reached. The default value for <code>-XX:GCTimeRatio</code> is 99, i.e., the application threads should run for at least 99 percent of the total execution time.</p><p><strong>-XX:MaxGCPauseMillis</strong></p><p>The flag <code>-XX:MaxGCPauseMillis=&lt;value&gt;</code> tells the JVM a target value (in milliseconds) for the maximum pause time. At run time, the throughput collector then computes statistics (a weighted average and the standard deviation) over the pause times it observes. If the statistics suggest that there is a risk of experiencing pause times exceeding the target value, the JVM modifies heap and GC settings in order to reduce them. Note that the statistics are computed separately for the young and old generation GCs. Also note that, by default, there is no target value set for the maximum pause time.</p><p>If both target values for the maximum pause time and the minimum throughput are set, achieving the maximum pause time goal has higher priority. Of course, there is no guarantee at all that the JVM will achieve either goal, even though it will try hard to do so. In the end, everything depends on the behavior of the application at hand.</p><p>When setting a maximum pause time target, we should take care not to choose too small a value. As we know by now, in order to keep pause times low, the JVM has to increase the total number of GCs which may seriously impact the achievable throughput. That&#8217;s why for applications that require low pause times as their primary goal (which is the case for most web applications), I would recommend to not use the throughput collector at all, but instead switch to the CMS collector. The CMS collector will be the topic of the next part of this series.</p></article></div><div class="col-lg-3 col-md-2 pull-right"> <span class="next-posts"> <a href="https://blog.codecentric.de/en/2013/01/text-search-mongodb-stemming/" rel="next">MongoDB Text Search Explained</a> </span><div class="banner hidden-sm hidden-xs"></div></div></div></div><div class="article-single-author"><div class="container"><div class="row"><div class="col-lg-3 col-md-2"><h2><a href="https://blog.codecentric.de/en/author/patrick-peschlow/" title="Posts by Patrick Peschlow" rel="author">Patrick Peschlow</a></h2></div><div class="col-lg-6 col-md-8"><div class="row"><div class="col-md-2 col-xs-3 col-sm-3"> <img src="https://blog.codecentric.de/files/2015/10/patrick_peschlow-250x250.jpg" width="200" height="200" alt="Patrick Peschlow" class="avatar avatar-200 wp-user-avatar wp-user-avatar-200 alignnone photo" /></div><div class="col-md-10 col-xs-9 col-sm-9"></div></div></div></div><div class="row"><div class="col-md-6 col-md-offset-3"><div class="ssba ssba-wrap"><div style="text-align:left"><a data-site="" class="ssba_facebook_share" href="http://www.facebook.com/sharer.php?u=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-facebook.png" title="Facebook" class="ssba ssba-img" alt="Share on Facebook" /></a><a data-site="" class="ssba_google_share" href="https://plus.google.com/share?url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-google.png" title="Share on Google+" class="ssba ssba-img" alt="Google+" /></a><a data-site="linkedin" class="ssba_linkedin_share ssba_share_link" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-linkedin.png" alt="Share on LinkedIn" title="LinkedIn" class="ssba ssba-img" /></a><a data-site="" class="ssba_twitter_share" href="http://twitter.com/share?url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/&amp;text=Useful+JVM+Flags+%E2%80%93+Part+6+%28Throughput+Collector%29+%23codecentric" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-twitter.png" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter" /></a><a data-site="reddit" class="ssba_reddit_share" href="http://reddit.com/submit?url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/&amp;title=Useful JVM Flags &#8211; Part 6 (Throughput Collector)" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-reddit.png" title="Reddit" class="ssba ssba-img" alt="Share on Reddit" /></a><a data-site="digg" class="ssba_diggit_share ssba_share_link" href="http://www.digg.com/submit?url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-digg.png" title="Digg" class="ssba ssba-img" alt="Digg this" /></a><a data-site="stumbleupon" class="ssba_stumbleupon_share ssba_share_link" href="http://www.stumbleupon.com/submit?url=https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/&#038;title=Useful%20JVM%20Flags%20&#8211;%20Part%206%20(Throughput%20Collector)" target="_blank" ><img src="/wp-content/themes/codecentric2015/img/icon-stumple.png" alt="Share on StumbleUpon" title="StumbleUpon" class="ssba ssba-img" /></a></div></div></div></div></div></div><div class="container"><div class="row article-single-links"><div class="col-md-5 col-md-5"><h2>Post by <strong>Patrick Peschlow</strong></h2><div class="author-post-item"><p><a href="https://blog.codecentric.de/2015/04/elasticon-erste-elasticsearch-user-konferenz-in-san-francisco/">Elastic{ON}: Erste Elasticsearch-User-Konferenz in San Francisco</a></p></div><div class="author-post-item"><span class="cat-name">Search</span><p><a href="https://blog.codecentric.de/en/2015/03/scaling-elasticsearch-index-introduction/">Scaling an Elasticsearch Index &#8211; Introduction</a></p></div></div><div class="col-md-7 col-md-5"><div class="row"><div class="col-md-12"><h2>More content about <strong>Java</strong></h2><div class="row"><div class="col-md-8"><div class="related-post-item"> <span class="cat-name">Java</span><p> <a href="https://blog.codecentric.de/en/2017/08/parsing-of-localdate-query-parameters-in-spring-boot/">Parsing of LocalDate query parameters in Spring Boot</a></p></div><div class="related-post-item"> <span class="cat-name">Java</span><p> <a href="https://blog.codecentric.de/en/2017/08/defence-autistic-tools/">In defence of pedantic tools</a></p></div></div></div></div></div></div></div></div><a id="comments"></a><div class="container article-single-comments"><div class="row"><div class="col-md-3"><h2>Kommentare</h2></div><div class="col-md-6"><ul class="list-unstyled"><li class="comment even thread-even depth-1 parent" id="comment-164973"><div id="div-comment-164973" class="comment-body row"><div class="comment-author vcard col-md-2"> <img src="https://secure.gravatar.com/avatar/816d6140f8b988ea5435e1f3a7885da7?s=96&d=mm&r=g" alt="André Cruz"/></div><div class="comment-text col-md-10"><p class="comment-info"> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#comment-164973"> 24. September 2013</a> von André Cruz</p></div><div class="col-md-10 col-md-offset-2"><p>This series is great! When can we expect the next part on the CMS collector?</p><p>Thanks.</p><div class="reply"> <a rel='nofollow' class='comment-reply-link' href='https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/?replytocom=164973#respond' onclick='return addComment.moveForm( "div-comment-164973", "164973", "respond", "16541" )' aria-label='Reply to André Cruz'>Reply</a></div></div></div><ul class="children"><li class="comment byuser comment-author-patrick-peschlow bypostauthor odd alt depth-2" id="comment-164982"><div id="div-comment-164982" class="comment-body row"><div class="comment-author vcard col-md-2"> <img src="https://blog.codecentric.de/files/2015/10/patrick_peschlow-120x120.jpg" alt="Patrick Peschlow"/></div><div class="comment-text col-md-10"><p class="comment-info"> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#comment-164982"> 29. September 2013</a> von <a href='http://blog.codecentric.de' rel='external nofollow' class='url'>Patrick Peschlow</a></p></div><div class="col-md-10 col-md-offset-2"><p>The German version of the CMS Collector blog is available for a while already, but there is no English translation yet. Next week we have a public holiday here in Germany, maybe then I&#8217;ll find the time 😉</p><div class="reply"> <a rel='nofollow' class='comment-reply-link' href='https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/?replytocom=164982#respond' onclick='return addComment.moveForm( "div-comment-164982", "164982", "respond", "16541" )' aria-label='Reply to Patrick Peschlow'>Reply</a></div></div></div></li><li class="comment byuser comment-author-patrick-peschlow bypostauthor even depth-2" id="comment-165020"><div id="div-comment-165020" class="comment-body row"><div class="comment-author vcard col-md-2"> <img src="https://blog.codecentric.de/files/2015/10/patrick_peschlow-120x120.jpg" alt="Patrick Peschlow"/></div><div class="comment-text col-md-10"><p class="comment-info"> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#comment-165020"> 16. October 2013</a> von <a href='http://blog.codecentric.de' rel='external nofollow' class='url'>Patrick Peschlow</a></p></div><div class="col-md-10 col-md-offset-2"><p>Here it is: <a title="Useful JVM Flags – Part 7 (CMS Collector)" href="http://blog.codecentric.de/en/2013/10/useful-jvm-flags-part-7-cms-collector/" rel="nofollow">part 7</a>. Enjoy!</p><div class="reply"> <a rel='nofollow' class='comment-reply-link' href='https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/?replytocom=165020#respond' onclick='return addComment.moveForm( "div-comment-165020", "165020", "respond", "16541" )' aria-label='Reply to Patrick Peschlow'>Reply</a></div></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="comment-265912"><div id="div-comment-265912" class="comment-body row"><div class="comment-author vcard col-md-2"> <img src="https://secure.gravatar.com/avatar/29cf6ea10a59f2d57b02d2de71c369d9?s=96&d=mm&r=g" alt="Srii"/></div><div class="comment-text col-md-10"><p class="comment-info"> <a href="https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#comment-265912"> 10. November 2014</a> von Srii</p></div><div class="col-md-10 col-md-offset-2"><p>Great effort! Clear-cut explanation. Well done!</p><div class="reply"> <a rel='nofollow' class='comment-reply-link' href='https://blog.codecentric.de/en/2013/01/useful-jvm-flags-part-6-throughput-collector/?replytocom=265912#respond' onclick='return addComment.moveForm( "div-comment-265912", "265912", "respond", "16541" )' aria-label='Reply to Srii'>Reply</a></div></div></div></li></ul></div></div><div class="row"><div class="col-md-3"><h2>Comment</h2></div><div class="col-md-7"><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/en/2013/01/useful-jvm-flags-part-6-throughput-collector/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://blog.codecentric.de/wp-comments-post.php" method="post" id="commentform" class="comment-form form-horizontal"><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><div class="form-group"><div class="col-md-12"><textarea autocomplete="nope"  placeholder="Nachricht" id="3c14725108"  name="c1cc1fcef6"  class="form-control"  cols="45" rows="8" aria-required="true"></textarea><textarea id="comment" aria-hidden="true" name="comment" autocomplete="nope" style="clip:rect(1px, 1px, 1px, 1px);position:absolute !important;white-space:nowrap;height:1px;width:1px;overflow:hidden;" tabindex="-1"></textarea><script type="text/javascript">document.getElementById("comment").setAttribute( "id", "2cb1c07a030f49bb6d357436386bd7af" );document.getElementById("3c14725108").setAttribute( "id", "comment" );</script></div></div><div class="form-group"><div class="col-md-6"><input id="author" class="form-control" placeholder="Name" name="author" type="text" value="" size="30" /></div><div class="col-md-6"><input placeholder="E-Mail" id="email" name="email" class="form-control" type="text" value="" size="30" /></div></div><p class="form-submit"><input name="submit" type="submit" id="submit" class="btn btn-default pull-right" value="Submit" /> <input type='hidden' name='comment_post_ID' value='16541' id='comment_post_ID' /> <input type='hidden' name='comment_parent' id='comment_parent' value='0' /></p><p class="subscribe-to-doi-comments"> <label for="subscribe"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" /> Notify me of followup comments via e-mail</label></p></form></div></div></div></div></section></main><footer class="footer" role="contentinfo"><div class="container"><div class="row footer-sitemap"><div class="col-md-4 col-sm-12"><h3> Newsletter</h3><form action="https://www.codecentric.de/formulare/newsletter/" class="form-inline" target="_blank" method="post"><div class="form-group"><div class="row"><div class="col-xs-12"> <input type="email" class="form-control" name="email" placeholder="E-Mail Adresse"/><input type="submit" value="Submit" class=" form-control btn btn-default"/></div></div></div></form></div></div><div class="row"><div class="visible-xs col-xs-12"><ul class="list-inline list-unstyled icons-footer"><li class="first"> <a href="https://www.facebook.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/facebook.gif" alt="codecentric - Facebook"/> </a></li><li class="last"> <a href="https://twitter.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/twitter.gif" alt="codecentric - Twitter"/> </a></li></ul></div><div class="col-xs-12 col-sm-10"><ul class="list-inline list-unstyled footer-metanav"><li><a href="https://www.codecentric.de/impressum-datenschutz/" target="_blank" class="">Imprint</a></li><li><a href="https://www.codecentric.de/terms-and-conditions/" target="_blank" class="">Privacy Policy</a></li><li><a href="https://www.codecentric.de/ueber-codecentric/kontakt/" target="_blank" class="">Contact</a></li></ul></div><div class="hidden-xs col-sm-2 pull-right"><ul class="list-inline list-unstyled pull-right icons-footer"><li class="first"> <a href="https://www.facebook.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/facebook.gif" alt="codecentric - Facebook"/> </a></li><li class="last"> <a href="https://twitter.com/codecentric" target="_blank"> <img src="/wp-content/themes/codecentric2015/img/twitter.gif" alt="codecentric - Twitter"/> </a></li></ul></div></div></div></footer><div class="searchform-overlay"></div><div class="mobile-navi-overlay"></div><div class="mobile-navi"><div class="container"><div class="row"><div class="col-xs-12"><div class="trigger-menu trigger-menu-mobil-active"> <span>X</span></div><ul class="list-unstyled"><li><a href="https://www.codecentric.de/leistungen/" class="">Services</a></li><li><a href="https://www.codecentric.de/karriere/" class="">Career</a></li><li><a href="https://www.codecentric.de/wissen/" class="">Knowledge</a></li><li><a href="https://blog.codecentric.de/en/" class="active">Blog</a></li><li><a href="https://www.codecentric.de/aktuelles/" class="">News</a></li><li><a href="https://www.codecentric.de/ueber-uns/" class="">About us</a></li><li><a href="https://blog.codecentric.de/2012/01/nutzliche-jvm-flags-teil-6/" class="lang">Deutsch</a></li></ul></div></div></div></div> <script type='text/javascript'>var icl_vars = {"current_language":"en","icl_home":"https:\/\/blog.codecentric.de\/en\/"};</script> <script>(function(h,o,t,j,a,r){ h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)}; h._hjSettings={hjid:325170,hjsv:5}; a=o.getElementsByTagName('head')[0]; r=o.createElement('script');r.async=1; r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv; a.appendChild(r); })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');</script> <script type="text/javascript">(function(d,s,i,r) { if (d.getElementById(i)){return;} var n=d.createElement(s),e=d.getElementsByTagName(s)[0]; n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/1918859.js'; e.parentNode.insertBefore(n, e); })(document,"script","hs-analytics",300000);</script> <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/1918859.js"></script> <script type="application/ld+json">{ "@context" : "http://schema.org", "@type": "LocalBusiness", "geo":{ "@type":"GeoCoordinates", "latitude":51.162073, "longitude":-7.007063 }, "address" : { "addressLocality": "Solingen", "addressRegion": "NRW", "postalCode": "42697", "streetAddress": "Hochstraße 11" }, "name":"codecentric AG", "url":"https://www.codecentric.de/", "email":"info@codecentric.de", "telephone":"+4902122336280", "image":"https://blog.codecentric.de/wp-content/themes/codecentric2015/img/codecentric-logo.png" }</script> <script type="text/javascript" defer src="https://blog.codecentric.de/wp-content/cache/autoptimize/2/autoptimize_e2f30fc27c1231b8c228cc68eac4af9b.php"></script></body></html>

<!--
Cachify | http://cachify.de
Ohne Plugin: 126 DB-Anfragen, 0.39 Sekunden, 16.67 MB
Mit Plugin: 52 DB-Anfragen, 0.27 Sekunden, 13.88 MB
Generiert: 27 mins zuvor
-->