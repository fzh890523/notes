<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html class="nobg">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">
   var _U = "undefined";
   var g_HttpRelativeWebRoot = "/ocom/";
   var SSContributor = false;
   var SSForceContributor = false;
   var SSHideContributorUI = false;
   var ssUrlPrefix = "/technetwork/";
   var ssUrlType = "2";
   
   var g_navNode_Path = new Array();
       g_navNode_Path[0] = 'otnen';
       g_navNode_Path[1] = 'otnen_articles';
       g_navNode_Path[2] = 'otnen_articles_java';
   var g_ssSourceNodeId = "otnen_articles_java";
   var g_ssSourceSiteId = "otnen";
</script>



  <script id="ssInfo" type="text/xml" warning="DO NOT MODIFY!">
  <ssinfo >
    <fragmentinstance  id="fragment14" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment16" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment17" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment18" fragmentid="universal-search-fragment" library="server:UNIVERSAL-SEARCH-FRAGMET-LIB">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment22" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment23" fragmentid="ocom-commonassets" library="server:OCOM-FRAGMENT-LIBRARAY">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment24" fragmentid="ExternalNavigationHorizontal" library="server:EXTERNALNAVHORIZONTALLIB">
    </fragmentinstance>
    <fragmentinstance  id="fragment25" fragmentid="ExternalNavVertical" library="server:EXTERNAL_NAV_VERTICAL">
    </fragmentinstance>
    <fragmentinstance  id="fragment27" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment28" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment29" fragmentid="ExternalBreadCrumb" library="server:EXTERNAL_BREADCRUMB">
    </fragmentinstance>
    <fragmentinstance  id="fragment32" fragmentid="universal-metatag" library="server:UNIVERSAL-FRAGMENTS">
    </fragmentinstance>
    <fragmentinstance  id="fragment33" fragmentid="ExternalNavTabsTop" library="server:EXTERNAL_NAV_TABS_TOP">
    </fragmentinstance>
    <fragmentinstance  id="fragment35" fragmentid="universal-webcache-integration" library="server:UNIVERSAL-WEBCACHE-INTEGRATION">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment37" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment38" fragmentid="sitecatalyst-otn-standard" library="server:SITECATALYST-OTN-STANDARD">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment39" fragmentid="universal-addthis-print-email" library="server:UNIVERSAL-FRAGMENTS">
      
    </fragmentinstance>
      <fragmentinstance  id="fragment40" fragmentid="mosaic-header-content" library="server:MOSAIC-HEADER-CONTENT">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment41" fragmentid="ocomheader" library="server:OCOMHEADER">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment42" fragmentid="ocomfooter" library="server:OCOMFOOTER">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment43" fragmentid="ocom-commonassets" library="server:OCOM-FRAGMENT-LIBRARAY">
        
      </fragmentinstance>
  </ssinfo>
  </script>

  
  

<script language="JavaScript" src="https://www.oracle.com/asset/web/js/oraclelib.js" type="text/javascript"></script>
  <style type="text/css">
    HTML,BODY,TD,H1,H2,H3,H4,OL,UL,DL,LI,DT,DD {font-family:arial,helvetica,sans-serif;}
    HTML,BODY,TD,CODE,KBD,TT,OL,UL,DL,LI,DT,DD {font-size:12px;}
    a:link {color:#000;text-decoration:none;}
    a:visited {color:#000;text-decoration:none;}
    a:hover {color:#FF0000;text-decoration:underline;}

    #Wrapper_FixedWidth {text-align: left; margin: 0px auto; padding: 0px; border:0; width: 1000px;}
    #Wrapper_FixedWidth_Header {margin: 0 0 15px 0; width:100%; display:block; }
    #Wrapper_FixedWidth_Leftnav {float: left; width: 181px;}
    #Wrapper_FixedWidth_Rightnav {float: right;  width: 185px; }
    #Wrapper_FixedWidth_Centercontent {float: left; width: 810px;}
    #Wrapper_FixedWidth_Maincontent {float: left; width: 595px;}
    #Wrapper_FixedWidth_Footer{ clear: both; }
    .header{display:block; width:100%; padding:2px 0px 5px 0px; margin:0px 0px 10px 0px;}
    .logo{width:140px; float:left; padding:12px 0px 0px 12px;}
    .welcomeMsg{text-align:right; font-size:10px; padding:5px 12px 0px 0px; float:right;}
    .secureSearch{text-align:right; padding:10px 0px 0px 0px; margin-top:20px;}
    .greybarhomebot{background: #DCDCDC;height: 7px; margin-top: 7px; float:left; width:100%; margin-top:20px;}
    .footerLinks {font-size:10px;}
    .sngPsta {font-size:11px;line-height:13px;color:#000;text-align:left;}
    a.sngPsta:link {color:#000;text-decoration:none;display:block;padding:3px 10px;}
    a.sngPsta:visited {color:#000;text-decoration:none;display:block;padding:3px 10px;}
    a.sngPsta:hover {color:#fff;text-decoration:none;display:block;background-color:#9a9a9a;padding:3px 10px;}
    /* For Mosaic */
    ul#navigation li.top-level p a.noimg {background:none;}
    /* For Mosaic */
    #centerSectBlankPS {display: block;min-width: 570px;}
    .lock {position:absolute; top:1px;*top:1px; left:152px; margin:0px; padding:0px;}
	.menu-ocom {display:none}
  </style>
  <link media="screen" href="/us/assets/otn-otn.css" type="text/css" rel="stylesheet" />
  <link media="screen" href="/us/assets/ocom-decouple-ocom-decouple.css" type="text/css" rel="stylesheet" />
<!-- SS_BEGIN_SNIPPET(fragment43,ocom-commonassets-droppoint)-->
				
				
			<!-- SS_END_SNIPPET(fragment43,ocom-commonassets-droppoint)-->
  <!--<link media="screen" href="/ocom/groups/systemobject/@mktg_admin/documents/systemobject/sdn.css" type="text/css" rel="stylesheet" /> -->

<!--SS_BEGIN_SNIPPET(fragment32,code)-->			<!--SS_END_SNIPPET(fragment32,code)-->

  <style type="text/css">
    <!-- Add logo class to styles.css file -->
    .logo{FLOAT: left; WIDTH: 151px;  PADDING-TOP: 4px}
    #centerSectBlankPS {display: block;min-width: 570px;}
    .sunquicklinks_wrapper{DISPLAY: block; FLOAT: right; WIDTH: 200px; TEXT-ALIGN: right;}
    .welcomesignin_wrapper{FLOAT: left; WIDTH: 634px; *width:621px; TEXT-ALIGN: right;VERTICAL-ALIGN: bottom; PADDING-TOP: 12px}
    .logo_wrapper{DISPLAY: block; MARGIN-BOTTOM: 6px; float:left; WIDTH: 974px; HEIGHT: 40px;}
  </style><!--Mosaic Header --><!--[if IE]>
  <STYLE>
    .logo_align{margin-bottom: 4px; margin-left:0px;}
    .search_position{margin:7px 3px 14px 16px;}
    #panelDiv_search .contentBg{padding:15px 5px 5px 5px; } 
    ul#navigation div.submenu {border-bottom:1px solid #b7b7b7;}
    ul#navigation div.submenu .bottomleft{background:none; width:15px; height:30px; float:left;  margin-left:-16px; margin-bottom:-42px; }
    ul#navigation div.submenu .bottomcenter{background:none; height:30px;  margin-left:15px; margin-right:15px; float:left; width:360px;} 
    ul#navigation div.submenu .bottomright{background:none; width:15px; height:30px; float:left; margin-left:360px; }
    ul#navigation div.submenu .partner_bottomleft{ background:none; width:15px; height:30px;  float:left; margin-left:-16px; margin-bottom:-42px; clear:left; margin-top:15px;}
    ul#navigation div.submenu .partner_bottomcenter{  background:none; width:362px; height:30px; margin-left:15px;  float:center;}
    ul#navigation div.submenu .partner_bottomright{  background:none; width:15px; height:30px; float:right; margin-right:-15px;}
    </STYLE>
  <![endif]-->
<!--SS_BEGIN_SNIPPET(fragment29,1)--><!--SS_END_SNIPPET(fragment29,1)-->

<!--SS_BEGIN_SNIPPET(fragment32,head_tags)-->


												     
     	




	
<title>Creating a Debugging and Profiling Agent with JVMTI</title>
<meta name="Title" content="Creating a Debugging and Profiling Agent with JVMTI">
<meta name="Description" content="This article discusses the architecture and interfaces provided in JVMTI for debugging, profiling and managing the Java process during runtime.

C.K Prasad, Rajesh Ramchandani, Gopinath Rao, and Kim Levesque">
<meta name="Keywords" content="jvmti, j2se, jvmpi, jpda, debuggers, management, profiling, jsr 163">
<meta name="robots" content="INDEX, FOLLOW">
<meta name="country" content="USA">
<meta name="Language" content="en">
<meta name="Updated Date" content="6/3/13 4:06 PM">

			<!--SS_END_SNIPPET(fragment32,head_tags)-->

<!--SS_BEGIN_SNIPPET(fragment33,1)-->
				<link rel="stylesheet" type="text/css" href="/us/assets/receiver-style-css.css" type="text/css" media="screen" />
<link rel="stylesheet" type="text/css" href="/us/assets/subtabs-css.css" type="text/css" media="screen" />
<script language="JavaScript" type="text/javascript" src="/us/assets/prototype-1.7.2.0.js"></script>
			<!--SS_END_SNIPPET(fragment33,1)-->

<!--SS_BEGIN_SNIPPET(fragment35,code)-->
			<!--SS_END_SNIPPET(fragment35,code)-->

<!-- SS_BEGIN_SNIPPET(fragment43,ocom-commonassets)--><link rel="stylesheet" type="text/css" href="https://www.oracle.com/asset/web/css/ocom-mosaic.css" />
<link rel="stylesheet" type="text/css" href="https://www.oracle.com/asset/web/css/master-mosaic.css" />
<script language="JavaScript" type="text/javascript" src="https://www.oracle.com/asset/web/js/jquery.js"></script>
<script language="JavaScript" type="text/javascript" src="https://www.oracle.com/asset/web/js/oraclelib-mosaic.js"></script>

    <script async="async" type="text/javascript" src='//consent.truste.com/notice?domain=oracle.com&c=teconsent&js=bb&noticeType=bb&text=true' crossorigin></script>
<!--[if IE]>
  <STYLE>
    .logo_align{margin-bottom: 4px; margin-left:0px;}
    .search_position{margin:7px 3px 14px 16px;}
    #panelDiv_search .contentBg{padding:30px 5px 5px 5px; } 
    ul#navigation div.submenu {border-bottom:1px solid #b7b7b7;}
    ul#navigation div.submenu .bottomleft{background:none; width:15px; height:30px; float:left;  margin-left:-16px; margin-bottom:-42px; }
    ul#navigation div.submenu .bottomcenter{background:none; height:30px;  margin-left:15px; margin-right:15px; float:left; width:380px;} 
    ul#navigation div.submenu .bottomright{background:none; width:15px; height:30px; float:left; }
    ul#navigation div.submenu .partner_bottomleft{ background:none; width:15px; height:30px;  float:left; margin-left:-16px; margin-bottom:-42px; clear:left; margin-top:15px;}
	ul#navigation div.submenu .partner_bottomcenter{  background:none; width:382px; height:30px; margin-left:15px;  float:center;}
	ul#navigation div.submenu .partner_bottomright{  background:none; width:15px; height:30px; float:right; margin-right:-15px;}
  </STYLE>
<![endif]-->
<!--[if IE 6]>
  <style>
  #panelDiv_search .BottomleftCurv{background:none; width:15px; height:30px; float:left;}
  #panelDiv_search .centerBottom{background:none;width:153px;height:30px;float:left;}
  #panelDiv_search .BottomrightCurv{background:none;width:15px;height:30px;float:right;}
  #panelDiv_search .contentBg{border-bottom:1px solid #ababab;}
  #navigation{width:971px;}
  </style>
<![endif]-->
 <!--Brightcove script line and lightbox code--> 
<div id="bcVideoPlayer" style="display: none;">&nbsp;</div>
<div class="lightbox_overlay" id="lightbox_brightcove" onClick="showclose();" style="display: none; z-index: 30000;"><!--spacer-->&nbsp;</div>
			<!-- SS_END_SNIPPET(fragment43,ocom-commonassets)-->
<!--DTM embed code - Header -->
<script src="//assets.adobedtm.com/6f37a0dc9cdbe818dc4979828b58b88e3f060ea4/satelliteLib-e598c5b61e39a10b402e048e87dd27b0f1cd2d4c.js"></script>
<!--End-->
</head>
<body class="f01 f01v0 f01bg">
<a name="top"></a>
	<div class="f01bg"></div>
	<div class="f01v0w1">
 	
   <!-- SS_BEGIN_SNIPPET(fragment41,ocomheader)-->				
		<!-- U02v0 -->

<nav class="u02nav">
  <div id="u02" class="u02">
    <div data-skiptxtappend="" data-skiptxtprepend="Skip" tabindex="-1" id="u02skip2content">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a id="u02skip2c" href="#maincontent">Skip to Content</a></li>
        <li><a id="u02skip2s" href="#skip_to_search_form">Skip to Search</a></li>
      </ul>
    </div>
    <div class="u02w1"><!-- logo -->
      <div data-trackas="header" class="u02logo">
        <div class="u02logow1"><a class="o_icon" data-lbl="logo" data-trackas="header" href="https://www.oracle.com/index.html"><span>Oracle</span></a></div>
      </div>
      <!-- menu -->
      <div data-trackas="menu" class="u02menu">
        <div class="u02mlink" id="u02main">
          <div class="u02mlinkw1"><a data-lbl="menu" id="u02menulink" href="/us/assets/MENUCONTENT-EN">
            <div class="u02mlinkw2">Menu</div>
            </a></div>
        </div>
      </div>
      
 <!-- search -->
<div data-trackas="header" class="u02search" id="u02search">
  <form class="u02searchform" name="searchForm" method="get" action="https://www.oracle.com/search/results?cat=otn">
    <input type="hidden" value="otn" name="cat" />
    <input type="hidden" value="S3" name="Ntk" />
    <input id="txtSearch" class="textcnt autoclear" name="Ntt" value="" />
    <input type="submit" class="u02searchbttn" value="Submit Search" />
  </form>
</div>
  
      
      
      <div data-trackas="header" class="u02tools">
        <ul>
          <!-- user tools -->
          <li class="u02mtool u02toolsloggedout"><a data-lbl="profile:sign-in-account" class="u02ticon u02user" href="#usermenu"> <span class="u02signin">Sign In</span> <span class="u02signout">Account</span> </a>
            <div data-lbl="profile" class="u02user u02toolpop">
              <div class="u02userin">
                <div data-lbl="oracle-account" class="u02userinw1 u02userloggedin">
                  <h5>Oracle Account</h5>
                  <p id="u02userinfo">&nbsp;</p>
                  <a class="u02bttn" id="u02pfile-sout" data-lbl="sign-out" href="javascript:sso_sign_out();">Sign Out</a>
                  <ul id="u02usertools">
                    <li><a id="u02pfile-acct" data-lbl="account" href="https://profile.oracle.com/myprofile/account/secure/update-account.jspx?nexturl=">Account</a></li>
                    <li><a data-lbl="help" href="/us/corporate/contact/about-your-account-070507.html">Help</a></li>
                  </ul>
                </div>
                <div data-lbl="oracle-account" class="u02userinw1 u02userloggedout">
                  <h5>Oracle Account</h5>
                  <p>Manage your account and access personalized content.</p>
                  <a class="u02bttn" data-lbl="signin" id="u02pfile-regs" href="http://www.oracle.com/webapps/redirect/signon?nexturl=">Sign in</a>
                  <ul id="u02usertools">
                    <li><a data-lbl="createaccount" href="https://profile.oracle.com/myprofile/account/create-account.jspx">Create an account</a></li>
                    <li><a data-lbl="help" href="http://www.oracle.com/us/corporate/contact/about-your-account-070507.html">Help</a></li>
                  </ul>
                </div>
                <div data-lbl="cloud-account" class="u02userinw2">
                  <h5>Cloud Account</h5>
                  <p>Access your cloud dashboard, manage orders, and more.</p>
                  <a class="u02bttn" data-lbl="signin" href="https://cloud.oracle.com/sign-in">Sign in</a></div>
              </div>
            </div>
          </li>
          <!-- country select -->
          <li id="u02cmenu" class="u02mtool"><a class="u02ticon u02regn" href="/us/mosaicmenu/index.html#u02countrymenu"><span>Country</span></a></li>
          <!-- call -->
          <li id="u02call" class="u02mbttn"><a data-lbl="call" class="u02ticon u02call o-call" href="#callOracle"><span>Call</span></a></li>
          <!-- chat --> <!--<li class="u02mbttn" id="u02chat">
					<a data-lbl="chat" href="#chat" class="u02ticon u02chat"><span>Chat</span></a>
				</li>-->
        </ul>
      </div>
    </div>
    <a id="maincontent">&nbsp;</a></div>
</nav>
<!-- /U02v0 -->
 
			<!-- SS_END_SNIPPET(fragment41,ocomheader)-->
   <!--SS_BEGIN_SNIPPET(fragment29,2)-->
	
	<!--**override root for testing purposes:**-->
	<!--** Header Logo ** -->
	<!--** Header Search ** -->
	<!--** Welcome SignIn ** -->
	 
	
	<!--** Footer ** -->
	
   
    
<!--** Header Logo ** -->
             
    

  <!-- MOSAIC -->
<!-- Communities-->

<!-- User Category -->
 
<!-- User Intrest -->
<!-- Navigation starts here -->
     
          
                    
        
        
          

        
      
      
     
    
     
        
            
            
       
        
      
     
     
        
<!-- User Community SC code -->

<!-- User Category SC code -->

 
<!-- User Interest SC code -->


	
	    <div id="breadCrumb">
	    <div class="breadCrumb_Left"></div>
	    <div class="breadCrumb_Center">
	    <div style="position:relative;">
	    <span class="breadCrumb_Content">
			    <a href="/technetwork/index.html" onclick="navTrack('otn','en','breadcrumb','otnen');"><span class=red>Oracle</span> Technology Network</a>
			    <span class="rightarrow"><img src="/us/assets/rightarrow-066625.gif" /></span>
			    <a href="/technetwork/articles/index.html" onclick="navTrack('otn','en','breadcrumb','otnen_articles');">Articles</a>
			    <span class="rightarrow"><img src="/us/assets/rightarrow-066625.gif" /></span>
			    <span class="active">Java</span>
	    </span>
	    </div>
	    </div>
	    <div class="breadCrumb_Right"></div>
	    </div>

			<!--SS_END_SNIPPET(fragment29,2)-->
        <!-- F02v0 -->
      <div class="f02 f02v0">
      <div class="f02w1">
      <div id="wrapper_lnav_maincont_rcol_foot">
        <div id="Wrapper_FixedWidth_Leftnav">
          
<!--SS_BEGIN_SNIPPET(fragment25,2)-->
	
	<!--**override root for testing purposes:**-->
	<!--** Header Logo ** -->
	<!--** Header Search ** -->
	<!--** Welcome SignIn ** -->
	 
	
	<!--** Footer ** -->
	
   
    
<!--** Header Logo ** -->
             
    

  <!-- MOSAIC -->
<!-- Communities-->

<!-- User Category -->
 
<!-- User Intrest -->
<!-- Navigation starts here -->
     
          
                    
        
        
          

        
      
      
     
    
     
        
            
            
       
        
      
     
     
        
<!-- User Community SC code -->

<!-- User Category SC code -->

 
<!-- User Interest SC code -->


 <!--** retrieve input parameters: **-->
		

			
		
	<!--** retrieve the root node: **-->
	<!--rootId = ssGetFirstNodeId(siteId)-->
	<!--nodeId = rootId-->

	<!--** retrieve the nodeLevel and set it to ssNumVertLevels **-->
	<!--** retrieving the nodeLevel **-->
		        	            
		<!--** setting the nodelevel to ssNumVertLevels **-->
                <!--** Get the section ID in custom section property **-->		
				                             
   
                	
                 
                
                <div class="topLeftNavBorder_li"><!--Spacer--></div> 
                <div class="XMLLeftNav_li" id="XMLLeftNav">

		
 
		<!--** section link: **-->    
		     
		    		   
 
											
               <ul class="level01">
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/adf/index.html" onclick="navTrack('otn','en','lnav','articles_adf');"   target=_top><div>Application Development Framework</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/apex/index.html" onclick="navTrack('otn','en','lnav','articles_apex');"   target=_top><div>Application Express</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/bigdata/index.html" onclick="navTrack('otn','en','lnav','articles_bigdata');"   target=_top><div>Big Data</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/bi/index.html" onclick="navTrack('otn','en','lnav','articles_bi');"   target=_top><div>Business Intelligence</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/cloudcomp/index.html" onclick="navTrack('otn','en','lnav','articles_cloudcomp');"   target=_top><div>Cloud Computing</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/communications/index.html" onclick="navTrack('otn','en','lnav','articles_comm');"   target=_top><div>Communications</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/database-performance/index.html" onclick="navTrack('otn','en','lnav','articles_dbperformance');"   target=_top><div>Database Performance & Availability</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/datawarehouse/index.html" onclick="navTrack('otn','en','lnav','articles_datawarehouse');"   target=_top><div>Data Warehousing</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/database/index.html" onclick="navTrack('otn','en','lnav','articles_db');"   target=_top><div>Database</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/dotnet/index.html" onclick="navTrack('otn','en','lnav','articles_dotnet');"   target=_top><div>.NET</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/dsl/index.html" onclick="navTrack('otn','en','lnav','articles_dynamicscript');"   target=_top><div>Dynamic Scripting Languages</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/embedded/index.html" onclick="navTrack('otn','en','lnav','articles_embedded');"   target=_top><div>Embedded</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/enterprise2/index.html" onclick="navTrack('otn','en','lnav','articles_enterprise2');"   target=_top><div>Digital Experience</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/entarch/index.html" onclick="navTrack('otn','en','lnav','articles_entarch');"   target=_top><div>Enterprise Architecture</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/oem/index.html" onclick="navTrack('otn','en','lnav','articles_oem');"   target=_top><div>Enterprise Management</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/idm/index.html" onclick="navTrack('otn','en','lnav','articles_idm');"   target=_top><div>Identity & Security</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/java/index.html" onclick="navTrack('otn','en','lnav','articles_java');"   target=_top><div>Java</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/linux/index.html" onclick="navTrack('otn','en','lnav','articles_linux');"   target=_top><div>Linux</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/mobile/index.html" onclick="navTrack('otn','en','lnav','articles_mobile');"   target=_top><div>Mobile</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/soa/index.html" onclick="navTrack('otn','en','lnav','articles_soa');"   target=_top><div>Service-Oriented Architecture</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/solaris/index.html" onclick="navTrack('otn','en','lnav','articles_solaris');"   target=_top><div>Solaris</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/sql/index.html" onclick="navTrack('otn','en','lnav','articles_sql');"   target=_top><div>SQL & PL/SQL</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/systems/index.html" onclick="navTrack('otn','en','lnav','articlesSystems');"   target=_top><div>Systems - All Articles</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/virtualization/index.html" onclick="navTrack('otn','en','lnav','articles_virtualization');"   target=_top><div>Virtualization</div></a></li>
                     	 			 							
				
		 </ul>										
 
     	        </div>
		<div class="botLeftNavBorder_li"><!--Spacer--></div>
											
	<!--** end of ExternalNavMultiV **-->


			<!--SS_END_SNIPPET(fragment25,2)-->

        </div>
        <div id="Wrapper_FixedWidth_Centercontent">
          <div class="pg0 pg0v0 pg0x1v1 pg0x1">
            
<!--SS_BEGIN_SNIPPET(fragment33,2)-->
	







			<!--SS_END_SNIPPET(fragment33,2)-->
		<h1>Creating a Debugging and Profiling Agent with JVMTI</h1>
<!-- content goes here -->
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td valign="top" class="smaller">&nbsp;</td>
            <td width="10">&nbsp;</td>
            <td valign="bottom" align="right">
            <div class="sitelinks" style="padding:0px;">
            <table cellspacing="0" cellpadding="0" border="0">
                <tbody>
                    <tr>
                        <td valign="bottom" align="right">&nbsp;</td>
                        <td valign="bottom" nowrap="nowrap" class="smaller">&nbsp;</td>
                    </tr>
                </tbody>
            </table>
            </div>
            </td>
        </tr>
    </tbody>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td valign="top" class="smaller"><em>By                     <a href="/technetwork/articles/javase/jvmti-136367.html#Authors">C.K Prasad, Rajesh Ramchandani, Gopinath Rao, and Kim Levesque</a>, June 24, 2004                 </em></td>
            <td width="10">&nbsp;</td>
            <td valign="bottom" align="right">
            <div class="sitelinks" style="padding:0px;">
            <table cellspacing="0" cellpadding="0" border="0">
                <tbody>
                    <tr>
                        <!--
<td valign="bottom" align="right"><img src="/im/ic_email.gif" width="14" height="12" border="0" hspace="4" vspace="1" alt=" " /></td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="#{link placeholder}">E-mail</a></td>
<td>&nbsp;&nbsp;</td>
<td valign="bottom" align="right">&nbsp;</td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="/jsp_utils/PrintPage.jsp" target="printFriendlyView" onclick="openPopup('','printFriendlyView',710,650,'no',1,1,0,0,0,0); return true;"><img src="/im/ic_print.gif" width="14" height="12" alt="Print-friendly Version" border="0" hspace="4" />Print-friendly Version</a></td>
<td>&nbsp;&nbsp;</td>
<td valign="bottom" align="right"><img src="/im/ic_download_thin.gif" width="9" height="14" hspace="4" border="0" alt=" " /></td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="#{link placeholder}">Download</a></td>
-->
                    </tr>
                </tbody>
            </table>
            </div>
            </td>
        </tr>
    </tbody>
</table>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p><a href="/technetwork/java/features-141912.html">Articles Index</a></p>
<p>The Java Virtual Machine Tool Interface (JVMTI) provides a programming interface that allows you, the software developer, to create software agents that can monitor and control your Java programming language applications. JVMTI is new in the Java 2 Software Development Kit (SDK), Standard Edition, version 1.5.0. It replaces the Java Virtual Machine Profiling Interface (JVMPI), which had been included as an experimental feature of the Java 2 SDK since version 1.1. JVMTI is described in               <a href="http://www.jcp.org/en/jsr/detail?id=163">JSR-163</a>.</p>
<p>This article illustrates how to use JVMTI to create a debugging and profiling tool for Java applications. Such a tool, also called an agent, uses the functionality exposed by the interface to register for notification of events as they occur in the application, and to query and control the application. JVMTI documentation is available               <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html">here</a>. A JVMTI agent can be useful for debugging and tuning an application. It can illustrate aspects of the application, such as memory allocation, CPU utilization, and lock contention.</p>
<p>&nbsp;</p>
<blockquote>Even though JVMPI is experimental, it is being used by many Java technology developers, and in several commercially-available Java application profilers.               <strong>Please note that developers are strongly encouraged to use JVMTI instead of JVMPI. JVMPI will be discontinued in the very near future</strong>.           </blockquote><br />
<br />
<p>JVMTI improves upon the functionality and performance of JVMPI in many ways. For example:</p>
<ul>
    <li>JVMTI relies on a callback for each event. This is more efficient than the JVMPI design of using event structures, which needed to be marshalled and unmarshalled.</li>
    <li>JVMTI contains four times as many functions as JVMPI (including many more functions to obtain information about variables, fields, methods, and classes). For a complete index of the JVMTI functions, see the                 <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#FunctionIndex">Function Index</a> page.</li>
    <li>JVMTI provides notification for more types of events than does JVMPI, including exception events, field access and modification events, and breakpoint and single-step events.</li>
    <li>Some of the JVMPI events that were never fully utilized, such as arena new and delete, or that can be better obtained through bytecode instrumentation, or the JVMTI functions themselves, (such as heap dump and object allocation) have been dropped. A description of the events is available at the                 <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#EventIndex">Event Index</a> page.</li>
    <li>JVMTI is capability-based, whereas JVMPI was &quot;all or nothing&quot; with corresponding performance impact.</li>
    <li>JVMPI heap functionality did not scale.</li>
    <li>JVMPI had no error return information.</li>
    <li>JVMPI was deeply invasive on VM implementations with resulting maintenance issues and performance impacts.</li>
    <li>JVMPI is experimental and will be discontinued very soon.</li>
</ul>
<br />
<br />
<p>In the remainder of this article, we present a simple agent that uses JVMTI functions to extract information from a Java application. The agent must be written in native code. The sample agent shown here is written in the C programming language. The following paragraphs describe how an agent is initialized, and how the agent uses JVMTI functions to extract information about a Java application, as well as how to compile and run the agent. The sample code and compilation steps are specific to UNIX environments, but can be modified for use with Windows. The agent described here can be used to analyze the threads and to determine JVM memory usage in any Java application.</p>
<p>A simple program written in the Java programming language, called               <em>SimpleThread.java</em>, is included. We use               <em>ThreadSample.java</em> to demonstrate the expected output from the agent.</p>
<p>The functionality of JVMTI is much more extensive than we can detail here, but the code in this article should provide a starting place for developing profiling tools to meet your own specific needs.</p>
<div><strong>Agent Initialization</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>This section describes the code that is used to initialize the agent. To begin with, the agent must include the               <code>jvmti.h</code> file with the statement:               <code>#include &lt;jvmti.h&gt;</code>.</p>
<p>In addition, the agent must contain a function called               <code>Agent_OnLoad</code>, which is invoked when the library is loaded. The               <code>Agent_OnLoad</code> function is used to set up functionality that is required prior to initializing the Java virtual machine             <a href="/technetwork/articles/javase/jvmti-136367.html#TJVM">               <sup>1</sup>             </a> (JVM). The               <code>Agent_OnLoad</code> signature looks like this:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
JNIEXPORT jint JNICALL Agent_OnLoad(JavaVM *jvm, char *options, void *reserved) {
                  

 ...
                  

                   

 /* We return JNI_OK to signify success */
                  

 return JNI_OK;
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>In our sample code, we must enable several capabilities for the JVMTI functions and events that we will be using. It is generally desired, and in some cases required, to add these capabilities in the               <code>Agent_OnLoad</code> function. The capabilities necessary for each function or event are described in the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html">Java Virtual Machine Tool Interface</a> pages. For example, to use the               <code>InterruptThread</code> function, the               <code>can_signal_thread</code> capability must be true. We set all of the capabilities needed for our sample code to true, and then add them to the JVMTI environment using the               <code>AddCapabilities</code> function:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
 static jvmtiEnv *jvmti = NULL;
                  

 static jvmtiCapabilities capa;
                  

 jvmtiError error;
                  

                   

 ...
                  

                   

 (void)memset(&amp;capa, 0, sizeof(jvmtiCapabilities));
                  

 capa.can_signal_thread = 1;
                  

 capa.can_get_owned_monitor_info = 1;
                  

 capa.can_generate_method_entry_events = 1;
                  

 capa.can_generate_exception_events = 1;
                  

 capa.can_generate_vm_object_alloc_events = 1;
                  

 capa.can_tag_objects = 1;
                  

                   

 error = (*jvmti)-&gt;AddCapabilities(jvmti, &amp;capa);
                  

 check_jvmti_error(jvmti, error, &quot;Unable to get necessary JVMTI capabilities.&quot;);
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>In addition, the               <code>Agent_OnLoad</code> function is often used to register for notification of events. In our sample code, we enable several events, such as VM Initialization Event, VM Death Event, and VM Object Allocation, in               <code>Agent_OnLoad</code> with the               <code>SetEventNotificationMode</code> function as follows:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
 error = (*jvmti)-&gt;SetEventNotificationMode
      (jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_INIT, (jthread)NULL);
                  

 error = (*jvmti)-&gt;SetEventNotificationMode
      (jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_DEATH, (jthread)NULL);
                  

 error = (*jvmti)-&gt;SetEventNotificationMode
      (jvmti, JVMTI_ENABLE, JVMTI_EVENT_VM_OBJECT_ALLOC, (jthread)NULL);
                  

 check_jvmti_error(jvmti, error, &quot;Cannot set event notification&quot;);
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>Note that in our example, NULL is passed as the third parameter, which enables the event notification globally. If desired, some events can be enabled or disabled for a particular thread.</p>
<p>Each event for which we register must also have a designated callback function, which will be called when the event occurs. For example, if a JVMTI Event of type               <code>Exception</code> occurs, our example agent sends it to the callback method,               <code>callbackException()</code>.</p>
<p>This is done using the               <code>jvmtiEventCallbacks</code> structure and               <code>SetEventCallbacks</code> function:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
jvmtiEventCallbacks callbacks;
                  

 ...
                  

                   

 (void)memset(&amp;callbacks, 0, sizeof(callbacks));
                  

 callbacks.VMInit = &amp;callbackVMInit; /* JVMTI_EVENT_VM_INIT */
                  

 callbacks.VMDeath = &amp;callbackVMDeath; /* JVMTI_EVENT_VM_DEATH */
                  

 callbacks.Exception = &amp;callbackException;/* JVMTI_EVENT_EXCEPTION */
                  

 callbacks.VMObjectAlloc = &amp;callbackVMObjectAlloc;/* JVMTI_EVENT_VM_OBJECT_ALLOC */
                  

                   

 error = (*jvmti)-&gt;SetEventCallbacks(jvmti, &amp;callbacks,(jint)sizeof(callbacks));
                  

 check_jvmti_error(jvmti, error, &quot;Cannot set jvmti callbacks&quot;);
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>We also set up a global agent data area for use throughout our code.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* Global agent data structure */
                  

 typedef struct {
                  

                   

 /* JVMTI Environment */
                  

 jvmtiEnv *jvmti;
                  

 jboolean vm_is_started;
                  

                   

 /* Data access Lock */
                  

 jrawMonitorID lock;
                  

 } GlobalAgentData;
                  

                   

 static GlobalAgentData *gdata;
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>In the               <code>Agent_OnLoad</code> function, we perform the following setup:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* Setup initial global agent data area
                  

* Use of static/extern data should be handled carefully here.
                  

* We need to make sure that we are able to cleanup after
                  

* ourselves so anything allocated in this library needs to be
                  

* freed in the Agent_OnUnload() function.
                  

*/
                  

                   

static GlobalAgentData data;
                  

(void)memset((void*)&amp;data, 0, sizeof(data));
                  

gdata = &amp;data;
                  

                   

...
                  

                   

/* Here we save the jvmtiEnv* for Agent_OnUnload(). */
                  

gdata-&gt;jvmti = jvmti;
                  

                   

...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>We create a raw monitor in               <code>Agent_OnLoad()</code>, then wrap the code of               <code>VM_INIT</code>,               <code>VM_DEATH</code> and               <code>EXCEPTION</code> with JVMTI               <code>RawMonitorEnter()</code> and               <code>RawMonitorExit()</code> interfaces.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* Here we create a raw monitor for our use in this agent to
                  

 * protect critical sections of code.
                  

 */
                  

                   

 error = (*jvmti)-&gt;CreateRawMonitor(jvmti, &quot;agent data&quot;, &amp;(gdata-&gt;lock));
                  

                   

 /* Enter a critical section by doing a JVMTI Raw Monitor Enter */
                  

                   

 static void
                  

 enter_critical_section(jvmtiEnv *jvmti)
                  

 {
                  

      jvmtiError error;
                  

                   

      error = (*jvmti)-&gt;RawMonitorEnter(jvmti, gdata-&gt;lock);
                  

      check_jvmti_error(jvmti, error, &quot;Cannot enter with raw monitor&quot;);
                  

 }
                  

                   

 /* Exit a critical section by doing a JVMTI Raw Monitor Exit */
                  

                   

 static void
                  

 exit_critical_section(jvmtiEnv *jvmti)
                  

 {
                  

     jvmtiError error;
                  

     error = (*jvmti)-&gt;RawMonitorExit(jvmti, gdata-&gt;lock);
                  

     check_jvmti_error(jvmti, error, &quot;Cannot exit with raw monitor&quot;);
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p><code>Agent_OnUnload</code> will be called by the VM when the agent is about to be unloaded. This function is used to clean-up resources allocated during               <code>Agent_OnLoad</code>.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* Agent_OnUnload: This is called immediately before the shared library
                  

 * is unloaded. This is the last code executed.
                  

 */
                  

                   

 JNIEXPORT void JNICALL Agent_OnUnload(JavaVM *vm)
                  

 {
                  

 /* Make sure all malloc/calloc/strdup space is freed */
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<div><strong>Analyzing Threads Using JVMTI</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>This section describes how to obtain information about user threads running in the JVM. As we have discussed, when the JVM is started, the startup function               <code>Agent_OnLoad</code> in the JVMTI agent library is invoked. During VM initialization, a JVMTI Event of type               <code>JVMTI_EVENT_VM_INIT</code> is generated and sent to the               <code>callbackVMInit</code> routine in our agent code. Once the VM initialization event is received (that is, the               <code>VMInit</code> callback is invoked), the agent can complete its initialization. Now, the agent is free to call any Java Native Interface (JNI) or JVMTI function. At this time, we are in the live phase and we will enable the               <code>Exception</code> events (             <code>JVMTI_EVENT_EXCEPTION</code>) in this VMInit callback routine.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
error = (*jvmti)-&gt;SetEventNotificationMode
                  

     (jvmti, JVMTI_ENABLE, JVMTI_EVENT_EXCEPTION, (jthread)NULL);
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p><code>Exception</code> events are generated whenever an exception is first detected in a Java programming language method. The exception may have beenthrown by a Java programming language or native method, but in the case of native methods, the event is not generated until the exception is first seen by a Java programming language method. If an exception is set and cleared in a native method, no exception event is generated.</p>
<p>For the purpose of demonstration, the sample Java application used is shown below. The main thread creates five threads, each of which throws an exception before exiting. Once the JVM is started, a               <code>JVMTI_EVENT_VM_INIT</code> is generated and sent to the agent code for processing, as we have enabled               <code>VMInit</code> and               <code>Exception</code> events in our agent code. Later, when our Java thread throws an exception, a               <code>JVMTI_EVENT_EXCEPTION</code> is sent to the agent code. The agent code then analyzes the thread information, and displays the current thread name, the thread group it belongs to, monitors owned by this thread, thread state, thread stack trace, and all the user threads in the JVM.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
 public class SimpleThread {
                  

     static MyThread t;
                  

                   

     public static void main(String args[]) throws Throwable{
                  

                   

       t = new MyThread();
                  

       System.out.println(&quot;Creating and running 10 threads...&quot;);
                  

                   

       for(int i = 0; i &lt; 5; i++) {
                  

          Thread thr = new Thread(t,&quot;MyThread&quot;+i);
                  

          thr.start();
                  

                   

       try {
                  

            thr.join();
                  

        } catch (Throwable t) {
                  

       }
                  

     }
                  

   }
                  

  }
                  

                   

 class MyThread implements Runnable {
                  

                   

    Thread t;
                  

                   

    public MyThread() {
                  

    }
                  

                   

    public void run() {
                  

     /* NO-OP */
                  

    try {
                  

                   

        &quot;a&quot;.getBytes(&quot;ASCII&quot;);
                  

        throwException();
                  

        Thread.sleep(1000);
                  

    } catch (java.lang.InterruptedException e){
                  

        e.printStackTrace();
                  

    } catch (Throwable t) {
                  

   }
                  

 }
                  

                   

 public void throwException() throws Throwable{
                  

                   

   throw new Exception(&quot;Thread Exception from MyThread&quot;);
                  

   }
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>Let us take a look at the JVMTI agent code that is executed when an exception is thrown inside a Java application.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
 throw new Exception(&quot;Thread Exception from MyThread&quot;);
</pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>A JVMTI exception event is generated and sent to the               <code>Exception</code> callback routine in our agent code. The agent must add the capability               <code>can_generate_exception_events</code> to enable the exception event. We use the JVMTI               <code>GetMethodName</code> interface to display the method name and signature of the routine from which the exception was generated.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err3 = (*jvmti)-&gt;GetMethodName(jvmti, method, &amp;name, &amp;sig, &amp;gsig);
                  

 printf(&quot;Exception in Method:%s%s\n&quot;, name, sig);
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>We use the JVMTI               <code>GetThreadInfo</code> and               <code>GetThreadGroupInfo</code> interfaces to display the current thread and group details.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err = (*jvmti)-&gt;GetThreadInfo(jvmti, thr, &amp;info);
                  

                   

 if (err == JVMTI_ERROR_NONE) {
                  

 err1 = (*jvmti)-&gt;GetThreadGroupInfo(jvmti,info.thread_group, &amp;groupInfo);
                  

                   

 ...
                  

 if ((err == JVMTI_ERROR_NONE) &amp;&amp; (err1 == JVMTI_ERROR_NONE ))
                  

 {
                  

   printf(&quot;Got Exception event, Current Thread is : %s and Thread Group is: %s\n&quot;,
                  

 
        ((info.name==NULL) ? &quot;&quot;
                  

   : info.name), groupInfo.name);
                  

   }
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>This causes the following to be output on your terminal:</p>
<p><em>Got Exception event, Current Thread is : MyThread0 and Thread Group is: main</em></p>
<p>We can get information about the monitors owned by the specified thread by using the JVMTI               <code>GetOwnedMonitorInfo</code> interface. This function does not require the thread to be suspended.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err = (*jvmti)-&gt;GetOwnedMonitorInfo(jvmti, thr, &nu;m_monitors, &amp;arr_monitors);
                  

 printf(&quot;Number of Monitors returned : %d\n&quot;, num_monitors);
                  

                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>We can get state information for a thread using the JVMTI               <code>GetThreadState</code> interface.</p>
<p>The thread state can be one of the following values:</p>
<ul>
    <li>Thread has been Terminated</li>
    <li>Thread is Alive</li>
    <li>Thread is runnable</li>
    <li>Thread sleeping</li>
    <li>Thread is waiting for Notification</li>
    <li>Thread is in Object Wait</li>
    <li>Thread is in Native</li>
    <li>Thread is Suspended</li>
    <li>Thread is Interrupted</li>
</ul>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err = (*jvmti)-&gt;GetThreadState(jvmti, thr, &amp;thr_st_ptr);
                  

                   

 if ( thr_st_ptr &amp; JVMTI_THREAD_STATE_RUNNABLE ) {
                  

                   

    printf(&quot;Thread: %s is Runnable\n&quot;, ((info.name==NULL) ? &quot;&quot; : info.name));
                  

    flag = 1;
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<div><strong>Displaying All User Threads in the JVM Using JVMTI</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>The JVMTI function               <code>GetAllThreads</code> is used to display all live threads known to the JVM. The threads are Java programming language threads attached to the VM.</p>
<p>The following code illustrates this:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
 /* Get All Threads */
                  

 err = (*jvmti)-&gt;GetAllThreads(jvmti, &amp;thr_count, &amp;thr_ptr);
                  

 if (err != JVMTI_ERROR_NONE) {
                  

    printf(&quot;(GetAllThreads) Error expected: %d, got: %d\n&quot;, JVMTI_ERROR_NONE,  err);
                  

    describe(err);
                  

    printf(&quot;\n&quot;);
                  

 }
                  

 if (err == JVMTI_ERROR_NONE &amp;&amp; thr_count &gt;= 1) {
                  

    int i = 0;
                  

    printf(&quot;Thread Count: %d\n&quot;, thr_count);
                  

                   

 for ( i=0; i &lt; thr_count; i++) {
                  

                   

    /* Make sure the stack variables are garbage free */
                  

    (void)memset(&amp;info1,0, sizeof(info1));
                  

                   

    err1 = (*jvmti)-&gt;GetThreadInfo(jvmti, thr_ptr[i], &amp;info1);
                  

    if (err1 != JVMTI_ERROR_NONE) {
                  

       printf(&quot;(GetThreadInfo) Error expected: %d, got: %d\n&quot;, JVMTI_ERROR_NONE, err1);
                  

       describe(err1);
                  

       printf(&quot;\n&quot;);
                  

    }
                  

                   

 printf(&quot;Running Thread#%d: %s, Priority: %d, context class loader:%s\n&quot;, i+1,info1.name,
                  

       info1.priority,(info1.context_class_loader == NULL ? &quot;: NULL&quot; : &quot;Not Null&quot;));
                  

                   

 /* Every string allocated by JVMTI needs to be freed */
                  

                   

 err2 = (*jvmti)-&gt;Deallocate(jvmti, (void*)info1.name);
                  

 if (err2 != JVMTI_ERROR_NONE) {
                  

     printf(&quot;(GetThreadInfo) Error expected: %d, got: %d\n&quot;, JVMTI_ERROR_NONE, err2);
                  

     describe(err2);
                  

     printf(&quot;\n&quot;);
                  

    }
                  

   }
                  

 }
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>This causes the following to be output on your terminal:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
                   <em> Thread Count: 5</em>
                  

                   <em> Running Thread#1: MyThread4, Priority: 5, context class loader:Not Null</em>
                  

                   <em> Running Thread#2: Signal Dispatcher, Priority: 10, context class loader:Not Null</em>
                  

                   <em> Running Thread#3: Finalizer, Priority: 8, context class loader:: NULL</em>
                  

                   <em> Running Thread#4: Reference Handler, Priority: 10, context class loader:: NULL</em>
                  

                   <em> Running Thread#5: main, Priority: 5, context class loader:Not Null</em>
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<div><strong>              <a id="obtaining" name="obtaining"></a>Obtaining a JVM Thread Stacktrace             </strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>The JVMTI interface               <code>GetStackTrace</code> can be used to get information about the stack of a thread. If               <code>max_count</code> is less than the depth of the stack, the               <code>max_count</code> number of deepest frames are returned, otherwise the entire stack is returned. The thread need not be suspended to call this function.</p>
<p>The following example causes up to five of the deepest frames to be returned. If there are any frames, the currently executing method name is also printed.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
  /* Get Stack Trace */
                  

  err = (*jvmti)-&gt;GetStackTrace(jvmti, thr, 0, 5, &amp;frames, &amp;count);
                  

  if (err != JVMTI_ERROR_NONE) {
                  

     printf(&quot;(GetThreadInfo) Error expected: %d, got: %d\n&quot;, JVMTI_ERROR_NONE, err);
                  

     describe(err);
                  

     printf(&quot;\n&quot;);
                  

 
    }
                  

  printf(&quot;Number of records filled: %d\n&quot;, count);
                  

  if (err == JVMTI_ERROR_NONE &amp;&amp; count &gt;=1) {
                  

                   

     char *methodName;
                  

     methodName = &quot;yet_to_call()&quot;;
                  

     char *declaringClassName;
                  

     jclass declaring_class;
                  

                   

     int i=0;
                  

                   

 
     printf(&quot;Exception Stack Trace\n&quot;);
                  

     printf(&quot;=====================\n&quot;);
                  

     printf(&quot;Stack Trace Depth: %d\n&quot;, count);
                  

                   

     for ( i=0; i &lt; count; i++) {
                  

             err = (*jvmti)-&gt;GetMethodName
                  

                 (jvmti, frames[i].method, &amp;methodName, NULL, NULL);
                  

                  if (err == JVMTI_ERROR_NONE) {
                  

 
                err = (*jvmti)-&gt;GetMethodDeclaringClass(jvmti, frames[i].method, &amp;declaring_class);
                  

                err = (*jvmti)-&gt;GetClassSignature(jvmti, declaring_class, &amp;declaringClassName, NULL);
                  

                if (err == JVMTI_ERROR_NONE) {
                  

                        printf(&quot;at method %s() in class %s\n&quot;, methodName, declaringClassName);
                  

                      }
                  

             }
                  

                   

     }
                  

                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>This causes the following to be output on your terminal:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
                   <em> Number of records filled: 3</em>
                  

                   <em> Thread Stack Trace</em>
                  

                   <em> =====================</em>
                  

                   <em> Stack Trace Depth: 3</em>
                  

                   <em> at method throwException() in class LmyThread;</em>
                  

                   <em> at method run() in class LMyThread;</em>
                  

                   <em> at method run() in class Ljava/lang/Thread;</em>
                  

                   

                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<div><strong>Analyzing the Heap Using JVMTI</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>This section describes the portion of the sample code that illustrates how to obtain information about heap usage. For example, we have registered for VM Object Allocation events as described in the section titled &quot;Agent Initialization&quot;. This will notify us when the JVM has allocated an object that is visible to the Java programming language, and which is not detectable by other instrumentation mechanisms. This is an important difference from JVMPI, which sent an event when any object was allocated. In JVMTI, no event is sent for user-allocated objects, since it is expected that bytecode instrumentation can be used instead. For example, in the               <em>SimpleThread.java</em> program, we will not be notified of the allocation of               <code>MyThread</code> or               <code>Thread</code> objects. An article demonstrating the use of bytecode instrumentation to obtain this information will be published separately.</p>
<p>The VM Object Allocation event is useful for determining information about objects allocated by the JVM. In the               <code>Agent_OnLoad</code> method, we registered               <code>callbackVMObjectAlloc</code> as the function to be called when the VM Object Allocation event was sent. The callback function parameters contain information about the object that has been allocated, such as the JNI local reference to the class of the object and the object size. With the               <code>jclass</code> parameter,               <code>object_klass</code>, we can use the               <code>GetClassSignature</code> function to obtain information about the name of the class. We can print the object class and its size as shown below. Note that to avoid excessive output, we only print information about objects that are greater than 50 bytes.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* Callback function for VM Object Allocation events */
                  

 static void JNICALL callbackVMObjectAlloc
    (jvmtiEnv *jvmti_env, JNIEnv* jni_env, jthread thread, 
             jobject object, jclass object_klass, jlong size) {
                  

                   

 ...
                  

                   

 char *className;
                  

                   

 ...
                  

                   

 if (size &gt; 50) {
                  

    err = (*jvmti)-&gt;GetClassSignature(jvmti, object_klass, &amp;className, NULL);
                  

     if (className != NULL) {
                  

         printf(&quot;\ntype %s object allocated with size %d\n&quot;, className, (jint)size);
                  

 }
                  

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>We use the               <code>GetStackTrace</code> method as described               <a href="/technetwork/articles/javase/jvmti-136367.html#obtaining">above</a> to print the stack trace of the thread that is allocating the object. As that section describes, we obtain frames to a specified depth. The frames are returned as               <code>jvmtiFrameInfo</code> structures, which contain each frame's               <code>jmethodID</code> (that is,               <code>frames[x].method</code>). The               <code>GetMethodName</code> function can map the               <code>jmethodID</code> to that particular method's name. Finally, in this example, we also use the               <code>GetMethodDeclaringClass</code> and               <code>GetClassSignature</code> functions to obtain the name of the class from which the method was called.</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
char *methodName;
                  

 char *declaringClassName;
                  

 jclass declaring_class;
                  

 jvmtiError err;
                  

                   

 //print stack trace
                  

 jvmtiFrameInfo frames[5];
                  

 jint count;
                  

 int i;
                  

                   

 err = (*jvmti)-&gt;GetStackTrace(jvmti, NULL, 0, 5, &amp;frames, &amp;count);
                  

 if (err == JVMTI_ERROR_NONE &amp;&amp; count &gt;= 1) {
                  

                   

     for (i = 0; i &lt; count; i++) {
                  

          err = (*jvmti)-&gt;GetMethodName(jvmti, frames[i].method, &amp;methodName, NULL, NULL);
                  

          if (err == JVMTI_ERROR_NONE) {
                  

                   

              err = (*jvmti)-&gt;GetMethodDeclaringClass(jvmti, frames[i].method, &amp;declaring_class);
                  

              err = (*jvmti)-&gt;GetClassSignature(jvmti, declaring_class, &amp;declaringClassName, NULL);
                  

                   

     if (err == JVMTI_ERROR_NONE) {
                  

         printf(&quot;at method %s in class %s\n&quot;, methodName, declaringClassName);
                  

     }
                  

    }
                  

   }
                  

 }
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>Note that memory allocated to the               <code>char</code> arrays by these functions should be freed when we are finished with them:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err = (*jvmti)-&gt;Deallocate(jvmti, (void*)className);
                  

 err = (*jvmti)-&gt;Deallocate(jvmti, (void*)methodName);
                  

 err = (*jvmti)-&gt;Deallocate(jvmti, (void*)declaringClassName);
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>The output from this code will look like this:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
                   <em> type Ljava/lang/reflect/Constructor; object allocated with size 64</em>
                  

                   <em> at method getDeclaredConstructors0 in class Ljava/lang/Class;</em>
                  

                   <em> at method privateGetDeclaredConstructors in class Ljava/lang/Class;</em>
                  

                   <em> at method getConstructor0 in class Ljava/lang/Class;</em>
                  

                   <em> at method getDeclaredConstructor in class Ljava/lang/Class;</em>
                  

                   <em> at method run in class Ljava/util/zip/ZipFile$1;</em>
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>The returned name for primitive classes is the type signature character of the corresponding primitive type. For example,               <code>java.lang.Integer.TYPE</code> is &quot;I&quot;.</p>
<p>In our callback method for VM Object Allocation, we also use the               <code>IterateOverObjectsReachableFromObject</code> function to demonstrate how we can obtain additional information about the heap. In our example, we pass as a parameter the JNI reference to the object that was just allocated, and the function will iterate over all objects that are directly and indirectly reachable from this newly allocated object. For each object that is reachable, another callback function is defined which can describe that reachable object. In our example, the callback function passed to the               <code>IterateOverObjectsReachableFromObject</code> function is called               <code>reference_object</code>:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
err = (*jvmti)-&gt;IterateOverObjectsReachableFromObject
                  

      (jvmti, object, &amp;reference_object, NULL);
                  

 if ( err != JVMTI_ERROR_NONE ) {
                  

    printf(&quot;Cannot iterate over reachable objects\n&quot;);
                  

 }
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>The               <code>reference_object</code> function is defined as follows:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
/* JVMTI callback function. */
                  

 static jvmtiIterationControl JNICALL
                  

 reference_object(jvmtiObjectReferenceKind reference_kind,
                  

 jlong class_tag, jlong size, jlong* tag_ptr,
                  

 jlong referrer_tag, jint referrer_index, void *user_data)
                  

                   

 {
                  

                   

 ...
                  

                   

 return JVMTI_ITERATION_CONTINUE;
                  

 }
                  

                   

 ...
                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>In our example, we use the               <code>IterateOverObjectsReachableFromObject</code> function to calculate both the combined size of all objects reachable from the newly allocated objects, as well as what types of objects they are. The object type is determined from the               <code>reference_kind</code> parameter. We then print this information to receive output similar to the following:</p>
<table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
    <tbody>
        <tr>
            <td>
            <pre>
                   <em> This object has references to objects of combined size 21232</em>
                  

                   <em> This includes 45 classes, 9 fields, 1 arrays, 0 classloaders, 0 signers arrays,</em>
                  

                   <em> 0 protection domains, 19 interfaces, 13 static fields, and 2 constant pools.</em>
                  

                </pre>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<p>Note that similar iteration functions available in JVMTI allow you to iterate over the entire heap (both reachable and unreachable objects), over the root objects and all objects that are directly and indirectly reachable from the root objects, or over all objects in the heap that are instances of a specified class. The technique for these functions is similar to that described previously. During the execution of these functions, the state of the heap does not change: no objects are allocated, no objects are garbage collected, and the state of objects (including held values) does not change. As a result, threads executing Java programming language code, threads attempting to resume the execution of Java programming language code, and threads attempting to execute JNI functions, are typically stalled. In the object reference callback functions, no JNI functions can be used, and no JVMTI functions can be used except those which are specifically allowed.</p>
<div><strong>Compiling and Executing the Sample Code</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>To compile and run the code for the sample application described here, do the following:</p>
<ol>
    <li>Set JDK_PATH to point to the J2SE 1.5 distribution.               <br />
    <!-- BEGIN VCD7 CODE SAMPLE COMPONENT  -->
    <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
        <tbody>
            <tr>
                <td>
                <pre>
JDK_PATH=&quot;/home/xyz/j2sdk1.5.0/bin&quot;
</pre>
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <br />
    <!-- END VCD7 CODE SAMPLE COMPONENT  --></li>
    <li>Build the shared library using the C compiler. We used Sun Studio 8 C compiler.               <br />
    <!-- BEGIN VCD7 CODE SAMPLE COMPONENT  -->
    <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
        <tbody>
            <tr>
                <td>
                <pre>
CC=&quot;/net/compilers/S1Studio_8.0/SUNWspro/bin/cc&quot;
                      

 echo &quot;...creating liba.so&quot;
                      

 ${CC} -G -KPIC -o liba.so
                      

-I${JDK_PATH}/include -I${JDK_PATH}/include/solaris a.c
                      

                    </pre>
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <br />
    <!-- END VCD7 CODE SAMPLE COMPONENT  --></li>
    <li>To load and run the agent library, you can use one of the following command-line arguments during VM startup.               <br />
    <!-- BEGIN VCD7 CODE SAMPLE COMPONENT  -->
    <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
        <tbody>
            <tr>
                <td>
                <pre>
-agentlib:&lt;jvmti-agent-library-name&gt;
                      

-agentpath:/home/foo/jvmti/&lt;jvmti-agent-library-name&gt;
                    </pre>
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <br />
    <!-- END VCD7 CODE SAMPLE COMPONENT  --> and then you can run the sample Java application as follows:               <br />
    <!-- BEGIN VCD7 CODE SAMPLE COMPONENT  -->
    <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">
        <tbody>
            <tr>
                <td>
                <pre>
echo &quot;...creating SimpleThread.class&quot;
                      

${JDK_PATH}/bin/javac -g -d . SimpleThread.java
                      

echo &quot;...running SimpleThread.class&quot;
                      

LD_LIBRARY_PATH=. CLASSPATH=. ${JDK_PATH}/bin/java -showversion -agentlib:a SimpleThread
                    </pre>
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <br />
    <!-- END VCD7 CODE SAMPLE COMPONENT  --></li>
</ol>
<p><em>Note: The sample agent code was built and tested on Solaris 9 Operating System.</em></p>
<div><strong>Conclusion</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>In this article we demonstrated some of the interfaces that JVMTI provides for monitoring and management of the JVM. The JVMTI specification (JSR-163) is intended to provide a VM interface for the full breadth of tools that need access to VM state, including but not limited to: profiling, debugging, monitoring, thread analysis, and coverage analysis tools.</p>
<p><a id="writingAgents" name="writingAgents"></a>            <strong>Developers are advised not to use JVMPI interfaces to develop tools or debugging utilities, as JVMPI is unsupported and experimental technology. JVMTI should be considered for writing any profiling and managing tools for Java virtual machines.</strong></p>
<div><strong>See Also</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<ul>
    <li><a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html">JVMTI Reference</a></li>
    <li><a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/index.html">Java Platform Debugger Architecture (JPDA)</a></li>
</ul>
<div><a id="Authors" name="Authors"></a>              <strong>Authors</strong></div>
<div class="contentdivider">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">
    <tbody>
        <tr>
            <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>
        </tr>
    </tbody>
</table>
</div>
<p>CK, Kim, Gopinath and Rajesh are part of Sun's Market Development Engineering group, working with Independent Software Vendors (ISV's) in their adoption efforts for various Sun technologies. They have written several publications in the areas of Solaris, Java and web services to demonstrate use of Sun technologies. You can reach this team at               <a href="mailto:mde-jvmti@sun.com">mde-jvmti@sun.com.</a></p>
<br />
<br />
<p><a id="TJVM" name="TJVM"></a>              <sup>1</sup>              As used on this web site, the terms &quot;Java virtual machine&quot; or &quot;JVM&quot; mean a virtual machine for the Java platform.</p>
<script src="" type="text/javascript">
//<![CDATA[
<!-- Hide script from older browsers
// Popup window function
function onRateSubmitHandler()
{
var w = window.open("","rr","width=800,height=600,status=no,toolbar=no,scrollbars=yes"); 
w.setTimeout("window.close();", 30000 );
return true;
}
// End of javascript 
-->
//]]>
</script>
<form action="https://www2.sun.de/dc/servlets/incoming" method="post" name="form" onsubmit="return onRateSubmitHandler()" target="rr">
    <input type="hidden" name="errcount" value="1" />               <input type="hidden" name="ref" value="http://www2.sun.de/dc/forms/reg_xh_2610_243.jsp" />               <input type="hidden" name="" value="" />
    <table width="100%" cellspacing="0" cellpadding="1" border="0" class="dkgrey" style="margin-top:7px">
        <tbody>
            <tr>
                <td>
                <table width="100%" cellspacing="0" cellpadding="4" border="0" class="white">
                    <tbody>
                        <tr>
                            <td class="dkgrey1"><strong>Rate and Review</strong></td>
                        </tr>
                        <tr>
                            <td>Tell us what you think of the content of this page.</td>
                        </tr>
                        <tr>
                            <td><strong>                          <input type="radio" name="custom_3" value="Excellent" /> Excellent&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Good" /> Good&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Fair" /> Fair&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Poor" /> Poor&nbsp;&nbsp;                         </strong></td>
                        </tr>
                        <tr>
                            <td><strong>Comments:</strong>                         <br />
                            <textarea cols="60" name="custom_2" rows="3" wrap="virtual"></textarea></td>
                        </tr>
                        <tr>
                            <td><strong>Your email address (no reply is possible without an address):</strong>                         <br />
                            <a href="http://sun.com/privacy/" target="_new">Sun Privacy Policy</a>                         <br />
                            <input type="text" maxlength="60" name="custom_1" size="35" value="" />                        <br />
                            Note: We are not able to respond to all submitted comments.</td>
                        </tr>
                        <tr>
                            <td><input type="submit" border="0" class="buttonblue" onmouseout="this.style.color='#FFF';" onmouseover="this.style.color='#fbe249';" value="&nbsp;Submit &raquo;&nbsp;" />                           <input type="hidden" name="custom_0" value="C.K Prasad, Rajesh Ramchandani, and Gopinath Rao" />                           <input type="hidden" name="custom_4" value="Creating a Debugging and Profiling Agent with JVMTI" />                           <input type="hidden" name="custom_5" value="#" />                           <input type="hidden" name="cf_Form_Name" value="Rate and Review - article feedback" />                           <input type="hidden" name="cf_Form_Location" value="Registrations" />                           <input type="hidden" name="cf_iso2" value="XH" />                           <input type="hidden" name="charset" value="ISO-8859-1" /></td>
                        </tr>
                    </tbody>
                </table>
                </td>
            </tr>
        </tbody>
    </table>
</form>
		false
		,,,,,,,,,,,,,,,

          </div>
        </div>
  	</div>
	</div>
	<!-- /F02v0 -->      
        <div id="Wrapper_FixedWidth_Footer">
        <div class="addThisPrintEmail">
        <!--SS_BEGIN_SNIPPET(fragment39,1)--> &nbsp;&nbsp;&nbsp;
	<a href="javascript:mailpage()"><img height="16" alt="E-mail this page" src="/us/assets/email.gif" width="19" border="0" /></a> <span style="MARGIN-BOTTOM: 2px">
	<a href="javascript:mailpage()">E-mail this page</a></span>&nbsp;&nbsp;&nbsp;
	<a onclick="printerView()" href="javascript: void 0;"><img height="16" alt="Printer View" src="/us/assets/print_icon.gif" width="19" border="0" />&nbsp;Printer View</a>
			<!--SS_END_SNIPPET(fragment39,1)-->
         </div>

<!-- SS_BEGIN_SNIPPET(fragment42,ocomfooter)-->				
		<!-- U10v0 -->
<div id="u10" class="u10v0" data-trackas="ffooter">
<div class="u10w1">
<div class="u10w2">
<div class="u10w3">
<h5>Contact Us</h5>
<ul>
    <li>US Sales: +1.800.633.0738</li>
    <li><a data-lbl="contact-us:have-oracle-call-you" href="javascript:startCallback('0i2wzK12842','customer data')" onclick="navTrack('ocom','en','rhs-contact','callmenow-oracle');">Have Oracle Call You</a></li>
    <li><a data-lbl="contact-us:global-contacts" href="https://www.oracle.com/corporate/contact/global.html">Global Contacts</a></li>
    <li><a data-lbl="contact-us:support-directory" href="https://www.oracle.com/support/contact.html">Support Directory</a></li>
</ul>
</div>
<div class="u10w3">
<h5>About Oracle</h5>
<ul>
    <li><a data-lbl="about-oracle:company-information" href="https://www.oracle.com/corporate/index.html">Company Information</a></li>
    <li><a data-lbl="about-oracle:communities" href="https://www.oracle.com/communities/index.html">Communities</a></li>
    <li><a data-lbl="about-oracle:careers" href="https://www.oracle.com/corporate/careers/index.html">Careers</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Cloud</h5>
<ul>
    <li><a data-lbl="cloud:overview-of-cloud-solutions" href="https://www.oracle.com/cloud/index.html">Overview of Cloud Solutions</a></li>
    <li><a data-lbl="cloud:software(saas)" href="https://cloud.oracle.com/saas?intcmp=ocom-ft">Software (SaaS)</a></li>
    <li><a data-lbl="cloud:platform(paas)" href="https://cloud.oracle.com/paas?intcmp=ocom-ft">Platform (PaaS)</a></li>
    <li><a data-lbl="cloud:infrastructure(iaas)" href="https://cloud.oracle.com/iaas?intcmp=ocom-ft">Infrastructure (IaaS)</a></li>
    <li><a data-lbl="cloud:data(daas)" href="https://cloud.oracle.com/data-cloud?intcmp=ocom-ft">Data (DaaS)</a></li>
    <li><a data-lbl="cloud:free-cloud-trial" href="https://cloud.oracle.com/tryit?intcmp=ocom-ft">Free Cloud Trial</a></li>
</ul>
</div>
<div class="u10w3">
<h5>Events</h5>
<ul>
    <li><a data-lbl="events:oracle-openworld" href="https://www.oracle.com/openworld/index.html">Oracle OpenWorld</a></li>
    <li><a data-lbl="events:oracle-code" href="https://developer.oracle.com/code">Oracle Code</a></li>
    <li><a data-lbl="events:javaone" href="https://www.oracle.com/javaone/index.html">JavaOne</a></li>
    <li><a data-lbl="events:all-oracle-events" href="https://www.oracle.com/search/events">All Oracle Events</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Top Actions</h5>
<ul>
    <li><a data-lbl="top-actions:download-java" href="https://www.java.com/download/">Download Java</a></li>
    <li><a data-lbl="top-actions:download-java-for-developers" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Download Java for Developers</a></li>
    <li><a data-lbl="top-actions:try-oracle-cloud" href="https://cloud.oracle.com/tryit?intcmp=ocom-ft">Try Oracle Cloud</a></li>
    <li><a data-lbl="top-actions:subscribe-to-emails" href="https://go.oracle.com/subscriptions?l_code=en-us&amp;src1=OW:O:FO">Subscribe to Emails</a></li>
</ul>
</div>
<div class="u10w3">
<h5>News</h5>
<ul>
    <li><a data-lbl="news:newsroom" href="https://www.oracle.com/corporate/press/index.html">Newsroom</a></li>
    <li><a data-lbl="news:magazines" href="http://www.oracle.com/us/corporate/publishing/index.html">Magazines</a></li>
    <li><a data-lbl="news:customer-success-stories" href="https://www.oracle.com/search/customers">Customer Success Stories</a></li>
    <li><a data-lbl="news:blogs" href="https://blogs.oracle.com/">Blogs</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Key Topics</h5>
<ul>
    <li><a data-lbl="key-topics:erp-erm(finance)" href="https://www.oracle.com/applications/erp/index.html">ERP, EPM (Finance)</a></li>
    <li><a data-lbl="key-topics:hcm(hr-talent)" href="https://www.oracle.com/applications/human-capital-management/index.html">HCM (HR, Talent)</a></li>
    <li><a data-lbl="key-topics:marketing" href="https://www.oracle.com/marketingcloud/index.html">Marketing</a></li>
    <li><a data-lbl="key-topics:cx(sales-service-commerce)" href="https://www.oracle.com/applications/customer-experience/index.html">CX (Sales, Service, Commerce)</a></li>
    <li><a data-lbl="key-topics:supply-chain" href="https://www.oracle.com/applications/supply-chain-management/index.html">Supply Chain</a></li>
    <li><a data-lbl="key-topics:industry-solutions" href="https://www.oracle.com/industries/index.html">Industry Solutions</a></li>
    <li><a data-lbl="key-topics:database" href="https://www.oracle.com/database/index.html">Database</a></li>
    <li><a data-lbl="key-topics:mysql" href="https://www.oracle.com/mysql/index.html">MySQL</a></li>
    <li><a data-lbl="key-topics:middleware" href="https://www.oracle.com/middleware/index.html">Middleware</a></li>
    <li><a data-lbl="key-topics:java" href="https://www.oracle.com/java/index.html">Java</a></li>
    <li><a data-lbl="key-topics:engineered-systems" href="https://www.oracle.com/engineered-systems/index.html">Engineered Systems</a></li>
</ul>
</div>
</div>
<div class="u10w4"><hr />
</div>
<div class="u10w5" data-trackas="footer">
<ul class="scl-icons">
    <li class="scl-facebook"><a data-lbl="scl-icon:facebook" href="http://www.oracle.com/us/social-media/facebook/index.html" title="Oracle on Facebook">Facebook</a></li>
    <li class="scl-twitter"><a data-lbl="scl-icon:twitter" href="http://www.oracle.com/us/social-media/twitter/index.html" title="Follow Oracle on Twitter">Twitter</a></li>
    <li class="scl-linkedin"><a data-lbl="scl-icon:linkedin" href="http://www.oracle.com/us/social-media/linkedin/index.html" title="Oracle on LinkedIn">LinkedIn</a></li>
    <li class="scl-googleplus"><a data-lbl="scl-icon:google-plus" href="https://plus.google.com/115607918987921226255" title="Follow Oracle on Google+">Google+</a></li>
    <li class="scl-youtube"><a data-lbl="scl-icon:you-tube" href="http://www.youtube.com/oracle/" title="Watch Oracle on YouTube">YouTube</a></li>
    <li class="scl-feed"><a data-lbl="scl-icon:rss" href="http://www.oracle.com/us/syndication/feeds/index.html" title="Oracle RSS Feeds">Oracle RSS Feed</a></li>
</ul>
<div class="u10-ologo"><a data-lbl="integrated-cloud-applications-and-platform-services" href="https://www.oracle.com/index.html">Oracle</a></div>
<h3>Integrated Cloud Applications &amp; Platform Services</h3>
<ul class="u10-links">
    <li><a data-lbl="copyright" href="https://www.oracle.com/legal/copyright.html">&copy; Oracle</a></li>
    <li><a data-lbl="site-map" href="/sitemap.html">Site Map</a></li>
    <li><a data-lbl="terms-of-use-and-privacy" href="https://www.oracle.com/legal/privacy/index.html">Terms of Use and Privacy</a></li>
    <li>
    <div id="teconsent">&nbsp;</div>
    </li>
    <li class="u10last"><a data-lbl="ad-choices" href="https://www.oracle.com/legal/privacy/privacy-policy.html#advertising">Ad Choices</a></li>
</ul>
</div>
</div>
</div>
<!-- /U10v0 -->
 
			<!-- SS_END_SNIPPET(fragment42,ocomfooter)-->

        </div>
      </div>

      <div class="sitefinder_content" id="light">
        <!--spacer-->
      </div>

      <div class="lightbox_overlay" id="fade">
        <!--spacer-->
      </div>
<!--SS_BEGIN_SNIPPET(fragment38,1)-->
				<!-- Start SiteCatalyst code -->
<script language="JavaScript" src="/us/assets/metrics/ora_otn.js"></script>
<!-- End SiteCatalyst code --> 

			<!--SS_END_SNIPPET(fragment38,1)-->

    </div>
  </div>
<!--SS_BEGIN_SNIPPET(fragment35,universal-webcache-integration)-->
				
				
			<!--SS_END_SNIPPET(fragment35,universal-webcache-integration)-->


<!--DTM embed code - Footer -->
<script type="text/javascript">_satellite.pageBottom();</script>
<!--End-->
</body>
</html>