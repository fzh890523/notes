 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">
   var _U = "undefined";
   var g_HttpRelativeWebRoot = "/ocom/";
   var SSContributor = false;
   var SSForceContributor = false;
   var SSHideContributorUI = false;
   var ssUrlPrefix = "/technetwork/";
   var ssUrlType = "2";
   
   var g_navNode_Path = new Array();
       g_navNode_Path[0] = 'otnen';
       g_navNode_Path[1] = 'otnen_articles';
       g_navNode_Path[2] = 'otnen_articles_javase';
   var g_ssSourceNodeId = "otnen_articles_javase";
   var g_ssSourceSiteId = "otnen";
</script>


  <script id="ssInfo" type="text/xml" warning="DO NOT MODIFY!">
  <ssinfo >
    <fragmentinstance  id="fragment14" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment16" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment17" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment18" fragmentid="universal-search-fragment" library="server:UNIVERSAL-SEARCH-FRAGMET-LIB">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment22" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment23" fragmentid="ocom-commonassets" library="server:OCOM-FRAGMENT-LIBRARAY">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment24" fragmentid="ExternalNavigationHorizontal" library="server:EXTERNALNAVHORIZONTALLIB">
    </fragmentinstance>
    <fragmentinstance  id="fragment25" fragmentid="ExternalNavVertical" library="server:EXTERNAL_NAV_VERTICAL">
    </fragmentinstance>
    <fragmentinstance  id="fragment27" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment28" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment29" fragmentid="ExternalBreadCrumb" library="server:EXTERNAL_BREADCRUMB">
    </fragmentinstance>
    <fragmentinstance  id="fragment32" fragmentid="universal-metatag" library="server:UNIVERSAL-FRAGMENTS">
    </fragmentinstance>
    <fragmentinstance  id="fragment33" fragmentid="ExternalNavTabsTop" library="server:EXTERNAL_NAV_TABS_TOP">
    </fragmentinstance>
    <fragmentinstance  id="fragment35" fragmentid="universal-webcache-integration" library="server:UNIVERSAL-WEBCACHE-INTEGRATION">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment37" fragmentid="Universal_Localization_Fragment" library="server:UNIVERSAL_LOCALIZATION_FRAG">
    </fragmentinstance>
    <fragmentinstance  id="fragment38" fragmentid="universal-addthis-print-email" library="server:UNIVERSAL-FRAGMENTS">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment39" fragmentid="sitecatalyst-otn-standard" library="server:SITECATALYST-OTN-STANDARD">
      
    </fragmentinstance>
    <fragmentinstance  id="fragment40" fragmentid="universal-addthis-print-email" library="server:UNIVERSAL-FRAGMENTS">
      
    </fragmentinstance>
      <fragmentinstance  id="fragment41" fragmentid="mosaic-header-content" library="server:MOSAIC-HEADER-CONTENT">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment42" fragmentid="ocomheader" library="server:OCOMHEADER">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment43" fragmentid="ocomfooter" library="server:OCOMFOOTER">
        
      </fragmentinstance>
      <fragmentinstance  id="fragment44" fragmentid="ocom-commonassets" library="server:OCOM-FRAGMENT-LIBRARAY">
        
      </fragmentinstance>
  </ssinfo>
  </script>

  
  


  <style type="text/css">
  #u06v1 li{
    font-size: 11px;
}
    HTML,BODY,TD,H1,H2,H3,H4,OL,UL,DL,LI,DT,DD {font-family:arial,helvetica,sans-serif;}
    HTML,BODY,TD,CODE,KBD,TT,OL,UL,DL,LI,DT,DD {font-size:12px;}
    a:link {color:#000;text-decoration:none;}
    a:visited {color:#000;text-decoration:none;}
    a:hover {color:#FF0000;text-decoration:underline;}

    #Wrapper_FixedWidth {text-align: left; margin: 0px auto; padding: 0px; border:0; width: 1000px;}
    #Wrapper_FixedWidth_Header {margin: 0 0 15px 0; width:100%; display:block; }
    #Wrapper_FixedWidth_Leftnav {float: left; width: 181px;}
    #Wrapper_FixedWidth_Rightnav {float: right;  width: 185px; }
    #Wrapper_FixedWidth_Centercontent {float: left; width: 810px;}
    #Wrapper_FixedWidth_Maincontent {float: left; width: 595px;}
    #Wrapper_FixedWidth_Footer{ clear: both; }
    .header{display:block; width:100%; padding:2px 0px 5px 0px; margin:0px 0px 10px 0px;}
    .logo{width:140px; float:left; padding:12px 0px 0px 12px;}
    .welcomeMsg{text-align:right; font-size:10px; padding:5px 12px 0px 0px; float:right;}
    .secureSearch{text-align:right; padding:10px 0px 0px 0px; margin-top:20px;}
    .greybarhomebot{background: #DCDCDC;height: 7px; margin-top: 7px; float:left; width:100%; margin-top:20px;}
    .footerLinks {font-size:10px;}
    .sngPsta {font-size:11px;line-height:13px;color:#000;text-align:left;}
    a.sngPsta:link {color:#000;text-decoration:none;display:block;padding:3px 10px;}
    a.sngPsta:visited {color:#000;text-decoration:none;display:block;padding:3px 10px;}
    a.sngPsta:hover {color:#fff;text-decoration:none;display:block;background-color:#9a9a9a;padding:3px 10px;}
    /* For Mosaic */
    ul#navigation li.top-level p a.noimg {background:none;}
    /* For Mosaic */
    #centerSectBlankPS {display: block;min-width: 570px;}
    .lock {position:absolute; top:1px;*top:1px; left:152px; margin:0px; padding:0px;}
  </style>

  <!-- SS_BEGIN_SNIPPET(fragment44,ocom-commonassets-droppoint)-->
				
				
			<!-- SS_END_SNIPPET(fragment44,ocom-commonassets-droppoint)-->  
<!--SS_BEGIN_SNIPPET(fragment32,code)-->			<!--SS_END_SNIPPET(fragment32,code)-->

  <style type="text/css">
    <!-- Add logo class to styles.css file -->
    .logo{FLOAT: left; WIDTH: 151px;  PADDING-TOP: 4px}
    #centerSectBlankPS {display: block;min-width: 570px;}
    .sunquicklinks_wrapper{DISPLAY: block; FLOAT: right; WIDTH: 200px; TEXT-ALIGN: right;}
    .welcomesignin_wrapper{FLOAT: left; WIDTH: 634px; *width:621px; TEXT-ALIGN: right;VERTICAL-ALIGN: bottom; PADDING-TOP: 12px}
    .logo_wrapper{DISPLAY: block; MARGIN-BOTTOM: 6px; float:left; WIDTH: 974px; HEIGHT: 40px;}
	.menu-ocom {display:none;}
	
  </style><!--Mosaic Header --><!--[if IE]>
  <STYLE>
    .logo_align{margin-bottom: 4px; margin-left:0px;}
    .search_position{margin:7px 3px 14px 16px;}
    #panelDiv_search .contentBg{padding:15px 5px 5px 5px; } 
    ul#navigation div.submenu {border-bottom:1px solid #b7b7b7;}
    ul#navigation div.submenu .bottomleft{background:none; width:15px; height:30px; float:left;  margin-left:-16px; margin-bottom:-42px; }
    ul#navigation div.submenu .bottomcenter{background:none; height:30px;  margin-left:15px; margin-right:15px; float:left; width:360px;} 
    ul#navigation div.submenu .bottomright{background:none; width:15px; height:30px; float:left; margin-left:360px; }
    ul#navigation div.submenu .partner_bottomleft{ background:none; width:15px; height:30px;  float:left; margin-left:-16px; margin-bottom:-42px; clear:left; margin-top:15px;}
    ul#navigation div.submenu .partner_bottomcenter{  background:none; width:362px; height:30px; margin-left:15px;  float:center;}
    ul#navigation div.submenu .partner_bottomright{  background:none; width:15px; height:30px; float:right; margin-right:-15px;}
    </STYLE>
  <![endif]-->
<!--SS_BEGIN_SNIPPET(fragment29,1)--><!--SS_END_SNIPPET(fragment29,1)-->
<!--SS_BEGIN_SNIPPET(fragment32,head_tags)-->


												     
     	




	
<title>The JVM Tool Interface (JVM TI): How VM Agents Work</title>
<meta name="Title" content="The JVM Tool Interface (JVM TI): How VM Agents Work">
<meta name="Description" content="VM agents are a good way to assess what is happening inside the Java Virtual Machine (JVM). Learn what VM agents are, what they can do, and how they work.">
<meta name="Keywords" content="Janice Heiss, Kelly O'Hair, Java Virtual Machine Tool Interface, JVM Tool Interface, JVM TI, JVMTI, VM agents, JVM, VM, agent libraries, native agents, Java Virtual Machine, Java Native Interface, JNI, Java Virtual Machine Profiling Interface, JVMPI, JDK 5.0, JDK 6, DTrace Agent, DVM, Solaris Dynamic Tracing, Solaris 10, DTrace, Analyzer, Sun Studio Performance Analyzer, debug">
<meta name="robots" content="INDEX, FOLLOW">
<meta name="country" content="USA">
<meta name="Language" content="en">
<meta name="Updated Date" content="10/16/13 12:36 PM">

			<!--SS_END_SNIPPET(fragment32,head_tags)-->

<!--SS_BEGIN_SNIPPET(fragment33,1)-->
				<link rel="stylesheet" type="text/css" href="/us/assets/receiver-style-css.css" type="text/css" media="screen" />
<link rel="stylesheet" type="text/css" href="/us/assets/subtabs-css.css" type="text/css" media="screen" />
<script language="JavaScript" type="text/javascript" src="/us/assets/prototype-1.7.2.0.js"></script>
			<!--SS_END_SNIPPET(fragment33,1)-->

<!--SS_BEGIN_SNIPPET(fragment35,code)-->
			<!--SS_END_SNIPPET(fragment35,code)-->

<!-- SS_BEGIN_SNIPPET(fragment44,ocom-commonassets)--><link rel="stylesheet" type="text/css" href="https://www.oracle.com/asset/web/css/ocom-mosaic.css" />
<link rel="stylesheet" type="text/css" href="https://www.oracle.com/asset/web/css/master-mosaic.css" />
<script language="JavaScript" type="text/javascript" src="https://www.oracle.com/asset/web/js/jquery.js"></script>
<script language="JavaScript" type="text/javascript" src="https://www.oracle.com/asset/web/js/oraclelib-mosaic.js"></script>

    <script async="async" type="text/javascript" src='//consent.truste.com/notice?domain=oracle.com&c=teconsent&js=bb&noticeType=bb&text=true' crossorigin></script>
<!--[if IE]>
  <STYLE>
    .logo_align{margin-bottom: 4px; margin-left:0px;}
    .search_position{margin:7px 3px 14px 16px;}
    #panelDiv_search .contentBg{padding:30px 5px 5px 5px; } 
    ul#navigation div.submenu {border-bottom:1px solid #b7b7b7;}
    ul#navigation div.submenu .bottomleft{background:none; width:15px; height:30px; float:left;  margin-left:-16px; margin-bottom:-42px; }
    ul#navigation div.submenu .bottomcenter{background:none; height:30px;  margin-left:15px; margin-right:15px; float:left; width:380px;} 
    ul#navigation div.submenu .bottomright{background:none; width:15px; height:30px; float:left; }
    ul#navigation div.submenu .partner_bottomleft{ background:none; width:15px; height:30px;  float:left; margin-left:-16px; margin-bottom:-42px; clear:left; margin-top:15px;}
	ul#navigation div.submenu .partner_bottomcenter{  background:none; width:382px; height:30px; margin-left:15px;  float:center;}
	ul#navigation div.submenu .partner_bottomright{  background:none; width:15px; height:30px; float:right; margin-right:-15px;}
  </STYLE>
<![endif]-->
<!--[if IE 6]>
  <style>
  #panelDiv_search .BottomleftCurv{background:none; width:15px; height:30px; float:left;}
  #panelDiv_search .centerBottom{background:none;width:153px;height:30px;float:left;}
  #panelDiv_search .BottomrightCurv{background:none;width:15px;height:30px;float:right;}
  #panelDiv_search .contentBg{border-bottom:1px solid #ababab;}
  #navigation{width:971px;}
  </style>
<![endif]-->
 <!--Brightcove script line and lightbox code--> 
<div id="bcVideoPlayer" style="display: none;">&nbsp;</div>
<div class="lightbox_overlay" id="lightbox_brightcove" onClick="showclose();" style="display: none; z-index: 30000;"><!--spacer-->&nbsp;</div>
			<!-- SS_END_SNIPPET(fragment44,ocom-commonassets)-->
<!--DTM embed code - Header -->
<script src="//assets.adobedtm.com/6f37a0dc9cdbe818dc4979828b58b88e3f060ea4/satelliteLib-e598c5b61e39a10b402e048e87dd27b0f1cd2d4c.js"></script>
<!--End-->
</head>
<body class="f01 f01v0 f01bg">
<a name="top"></a>
	<div class="f01bg"></div>
	<div class="f01v0w1">
	
 	
  <!-- SS_BEGIN_SNIPPET(fragment42,ocomheader)-->				
		<!-- U02v0 -->

<nav class="u02nav">
  <div id="u02" class="u02">
    <div data-skiptxtappend="" data-skiptxtprepend="Skip" tabindex="-1" id="u02skip2content">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a id="u02skip2c" href="#maincontent">Skip to Content</a></li>
        <li><a id="u02skip2s" href="#skip_to_search_form">Skip to Search</a></li>
      </ul>
    </div>
    <div class="u02w1"><!-- logo -->
      <div data-trackas="header" class="u02logo">
        <div class="u02logow1"><a class="o_icon" data-lbl="logo" data-trackas="header" href="https://www.oracle.com/index.html"><span>Oracle</span></a></div>
      </div>
      <!-- menu -->
      <div data-trackas="menu" class="u02menu">
        <div class="u02mlink" id="u02main">
          <div class="u02mlinkw1"><a data-lbl="menu" id="u02menulink" href="/us/assets/MENUCONTENT-EN">
            <div class="u02mlinkw2">Menu</div>
            </a></div>
        </div>
      </div>
      
 <!-- search -->
<div data-trackas="header" class="u02search" id="u02search">
  <form class="u02searchform" name="searchForm" method="get" action="https://www.oracle.com/search/results?cat=otn">
    <input type="hidden" value="otn" name="cat" />
    <input type="hidden" value="S3" name="Ntk" />
    <input id="txtSearch" class="textcnt autoclear" name="Ntt" value="" />
    <input type="submit" class="u02searchbttn" value="Submit Search" />
  </form>
</div>
  
      
      
      <div data-trackas="header" class="u02tools">
        <ul>
          <!-- user tools -->
          <li class="u02mtool u02toolsloggedout"><a data-lbl="profile:sign-in-account" class="u02ticon u02user" href="#usermenu"> <span class="u02signin">Sign In</span> <span class="u02signout">Account</span> </a>
            <div data-lbl="profile" class="u02user u02toolpop">
              <div class="u02userin">
                <div data-lbl="oracle-account" class="u02userinw1 u02userloggedin">
                  <h5>Oracle Account</h5>
                  <p id="u02userinfo">&nbsp;</p>
                  <a class="u02bttn" id="u02pfile-sout" data-lbl="sign-out" href="javascript:sso_sign_out();">Sign Out</a>
                  <ul id="u02usertools">
                    <li><a id="u02pfile-acct" data-lbl="account" href="https://profile.oracle.com/myprofile/account/secure/update-account.jspx?nexturl=">Account</a></li>
                    <li><a data-lbl="help" href="/us/corporate/contact/about-your-account-070507.html">Help</a></li>
                  </ul>
                </div>
                <div data-lbl="oracle-account" class="u02userinw1 u02userloggedout">
                  <h5>Oracle Account</h5>
                  <p>Manage your account and access personalized content.</p>
                  <a class="u02bttn" data-lbl="signin" id="u02pfile-regs" href="http://www.oracle.com/webapps/redirect/signon?nexturl=">Sign in</a>
                  <ul id="u02usertools">
                    <li><a data-lbl="createaccount" href="https://profile.oracle.com/myprofile/account/create-account.jspx">Create an account</a></li>
                    <li><a data-lbl="help" href="http://www.oracle.com/us/corporate/contact/about-your-account-070507.html">Help</a></li>
                  </ul>
                </div>
                <div data-lbl="cloud-account" class="u02userinw2">
                  <h5>Cloud Account</h5>
                  <p>Access your cloud dashboard, manage orders, and more.</p>
                  <a class="u02bttn" data-lbl="signin" href="https://cloud.oracle.com/sign-in">Sign in</a></div>
              </div>
            </div>
          </li>
          <!-- country select -->
          <li id="u02cmenu" class="u02mtool"><a class="u02ticon u02regn" href="/us/mosaicmenu/index.html#u02countrymenu"><span>Country</span></a></li>
          <!-- call -->
          <li id="u02call" class="u02mbttn"><a data-lbl="call" class="u02ticon u02call o-call" href="#callOracle"><span>Call</span></a></li>
          <!-- chat --> <!--<li class="u02mbttn" id="u02chat">
					<a data-lbl="chat" href="#chat" class="u02ticon u02chat"><span>Chat</span></a>
				</li>-->
        </ul>
      </div>
    </div>
    <a id="maincontent">&nbsp;</a></div>
</nav>
<!-- /U02v0 -->
 
			<!-- SS_END_SNIPPET(fragment42,ocomheader)-->
  <!--SS_BEGIN_SNIPPET(fragment29,2)-->
	
	<!--**override root for testing purposes:**-->
	<!--** Header Logo ** -->
	<!--** Header Search ** -->
	<!--** Welcome SignIn ** -->
	 
	
	<!--** Footer ** -->
	
   
    
<!--** Header Logo ** -->
             
    

  <!-- MOSAIC -->
<!-- Communities-->

<!-- User Category -->
 
<!-- User Intrest -->
<!-- Navigation starts here -->
     
          
                    
        
        
          

        
      
      
     
    
     
        
            
            
       
        
      
     
     
        
<!-- User Community SC code -->

<!-- User Category SC code -->

 
<!-- User Interest SC code -->


	
	    <div id="breadCrumb">
	    <div class="breadCrumb_Left"></div>
	    <div class="breadCrumb_Center">
	    <div style="position:relative;">
	    <span class="breadCrumb_Content">
			    <a href="/technetwork/index.html" onclick="navTrack('otn','en','breadcrumb','otnen');"><span class=red>Oracle</span> Technology Network</a>
			    <span class="rightarrow"><img src="/us/assets/rightarrow-066625.gif" alt=" " /></span>
			    <a href="/technetwork/articles/index.html" onclick="navTrack('otn','en','breadcrumb','otnen_articles');">Articles</a>
			    <span class="rightarrow"><img src="/us/assets/rightarrow-066625.gif" alt=" " /></span>
			    <span class="active">Java Platform, Standard Edition</span>
	    </span>
	    </div>
	    </div>
	    <div class="breadCrumb_Right"></div>
	    </div>

			<!--SS_END_SNIPPET(fragment29,2)--> 
      <div id="wrapper_lnav_maincont_rcol_foot">
        <div id="Wrapper_FixedWidth_Leftnav">
          
<!--SS_BEGIN_SNIPPET(fragment25,2)-->
	
	<!--**override root for testing purposes:**-->
	<!--** Header Logo ** -->
	<!--** Header Search ** -->
	<!--** Welcome SignIn ** -->
	 
	
	<!--** Footer ** -->
	
   
    
<!--** Header Logo ** -->
             
    

  <!-- MOSAIC -->
<!-- Communities-->

<!-- User Category -->
 
<!-- User Intrest -->
<!-- Navigation starts here -->
     
          
                    
        
        
          

        
      
      
     
    
     
        
            
            
       
        
      
     
     
        
<!-- User Community SC code -->

<!-- User Category SC code -->

 
<!-- User Interest SC code -->


 <!--** retrieve input parameters: **-->
		

			
		
	<!--** retrieve the root node: **-->
	<!--rootId = ssGetFirstNodeId(siteId)-->
	<!--nodeId = rootId-->

	<!--** retrieve the nodeLevel and set it to ssNumVertLevels **-->
	<!--** retrieving the nodeLevel **-->
		        	            
		<!--** setting the nodelevel to ssNumVertLevels **-->
                <!--** Get the section ID in custom section property **-->		
				                             
   
                	
                 
                
                <div class="topLeftNavBorder_li"><!--Spacer--></div> 
                <div class="XMLLeftNav_li" id="XMLLeftNav">

		
 
		<!--** section link: **-->    
		     
		    		   
 
											
               <ul class="level01">
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/adf/index.html" onclick="navTrack('otn','en','lnav','articles_adf');"   target=_top><div>Application Development Framework</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/apex/index.html" onclick="navTrack('otn','en','lnav','articles_apex');"   target=_top><div>Application Express</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/bigdata/index.html" onclick="navTrack('otn','en','lnav','articles_bigdata');"   target=_top><div>Big Data</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/bi/index.html" onclick="navTrack('otn','en','lnav','articles_bi');"   target=_top><div>Business Intelligence</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/cloudcomp/index.html" onclick="navTrack('otn','en','lnav','articles_cloudcomp');"   target=_top><div>Cloud Computing</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/communications/index.html" onclick="navTrack('otn','en','lnav','articles_comm');"   target=_top><div>Communications</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/database-performance/index.html" onclick="navTrack('otn','en','lnav','articles_dbperformance');"   target=_top><div>Database Performance & Availability</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/datawarehouse/index.html" onclick="navTrack('otn','en','lnav','articles_datawarehouse');"   target=_top><div>Data Warehousing</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/database/index.html" onclick="navTrack('otn','en','lnav','articles_db');"   target=_top><div>Database</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/dotnet/index.html" onclick="navTrack('otn','en','lnav','articles_dotnet');"   target=_top><div>.NET</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/dsl/index.html" onclick="navTrack('otn','en','lnav','articles_dynamicscript');"   target=_top><div>Dynamic Scripting Languages</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/embedded/index.html" onclick="navTrack('otn','en','lnav','articles_embedded');"   target=_top><div>Embedded</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/enterprise2/index.html" onclick="navTrack('otn','en','lnav','articles_enterprise2');"   target=_top><div>Digital Experience</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/entarch/index.html" onclick="navTrack('otn','en','lnav','articles_entarch');"   target=_top><div>Enterprise Architecture</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/oem/index.html" onclick="navTrack('otn','en','lnav','articles_oem');"   target=_top><div>Enterprise Management</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/idm/index.html" onclick="navTrack('otn','en','lnav','articles_idm');"   target=_top><div>Identity & Security</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/java/index.html" onclick="navTrack('otn','en','lnav','articles_java');"   target=_top><div>Java</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/linux/index.html" onclick="navTrack('otn','en','lnav','articles_linux');"   target=_top><div>Linux</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/mobile/index.html" onclick="navTrack('otn','en','lnav','articles_mobile');"   target=_top><div>Mobile</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/soa/index.html" onclick="navTrack('otn','en','lnav','articles_soa');"   target=_top><div>Service-Oriented Architecture</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/solaris/index.html" onclick="navTrack('otn','en','lnav','articles_solaris');"   target=_top><div>Solaris</div></a></li>
                     	 			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/sql/index.html" onclick="navTrack('otn','en','lnav','articles_sql');"   target=_top><div>SQL & PL/SQL</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/systems/index.html" onclick="navTrack('otn','en','lnav','articlesSystems');"   target=_top><div>Systems - All Articles</div></a></li>
                     	 			 							
				

                          
 		          			 							
				

                          
 		            	
				  <li><a class="level01_top_link_subnav" href = "/technetwork/articles/virtualization/index.html" onclick="navTrack('otn','en','lnav','articles_virtualization');"   target=_top><div>Virtualization</div></a></li>
                     	 			 							
				
		 </ul>										
 
     	        </div>
		<div class="botLeftNavBorder_li"><!--Spacer--></div>
											
	<!--** end of ExternalNavMultiV **-->


			<!--SS_END_SNIPPET(fragment25,2)-->

        </div>

        <div id="Wrapper_FixedWidth_Centercontent">
          <div class="pg0 pg0v0 pg0x1v0 pg0x1">
            
<!--SS_BEGIN_SNIPPET(fragment33,2)-->
	







			<!--SS_END_SNIPPET(fragment33,2)-->
<script type="text/javascript">
window['MULTIDDOCNAMECONFIG'] = { 
show_addrowbutton: false, 
primaryurl: 'OTN-LT-3COL?RHS1=&RHS2=&RHS3=&RHS4=&RHS5=&RHS6=&RHS7=&RHS8=&RHS9=&RHS10=&RHS11=&RHS12=&RHS13=&RHS14=&RHS15=&RHS16=&RHS17=', 
rows: [ 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}, 
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
},
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
},  
{ 
createnewxml_defaultmetadata_default: 'dDocTitle%3DRHS', 
browse_querytext_default: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_default: true, 
show_browsebutton_default: true, 

createnewxml_defaultmetadata_override: 'dDocTitle%3DRHS', 
browse_querytext_override: 'xWebsiteObjectType <Matches> `Data File`', 
show_createnewxmlbutton_override: true, 
show_browsebutton_override: true, 

show_deletebutton: true 
}                    
] 
}; 
</script>
<style>
  .sidebox h4 a:link {_width:178px;}
  .sidebox h4 a:visited{_width:178px;}
  .sidebox h4 a:hover {_width:178px;}
</style>
	<div class="orcl6w1"> 	
	<div class="orcl6x0"></div> 
	</div>
<div class="orcl6w2">
	<div class="orcl6w3">
		
						<h1>The JVM Tool Interface (JVM TI): How VM Agents Work</h1> <!-- content goes here --> <table width="100%" cellspacing="0" cellpadding="0" border="0">     <tbody>         <tr>             <td valign="top" class="smaller">&nbsp;</td>             <td width="10">&nbsp;</td>             <td valign="bottom" align="right"><div class="sitelinks" style="padding:0px;"><table cellspacing="0" cellpadding="0" border="0">                 <tbody>                     <tr>                         <td valign="bottom" align="right">&nbsp;</td>                         <td valign="bottom" nowrap="nowrap" class="smaller">&nbsp;</td>                     </tr>                 </tbody>             </table></div></td>         </tr>     </tbody> </table> <table width="100%" cellspacing="0" cellpadding="0" border="0">     <tbody>         <tr>             <td valign="top" class="smaller"><em>By                     <a href="/technetwork/articles/javase/index-140680.html#authors">Kelly O'Hair and Janice J. Heiss</a>, December 2006                 </em></td>             <td width="10">&nbsp;</td>             <td valign="bottom" align="right"><div class="sitelinks" style="padding:0px;"><table cellspacing="0" cellpadding="0" border="0">                 <tbody>                     <tr>                         <!--
<td valign="bottom" align="right"><img src="/im/ic_email.gif" width="14" height="12" border="0" hspace="4" vspace="1" alt=" " /></td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="#{link placeholder}">E-mail</a></td>
<td>&nbsp;&nbsp;</td>
<td valign="bottom" align="right">&nbsp;</td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="/jsp_utils/PrintPage.jsp" target="printFriendlyView" onclick="openPopup('','printFriendlyView',710,650,'no',1,1,0,0,0,0); return true;"><img src="/im/ic_print.gif" width="14" height="12" alt="Print-friendly Version" border="0" hspace="4" />Print-friendly Version</a></td>
<td>&nbsp;&nbsp;</td>
<td valign="bottom" align="right"><img src="/im/ic_download_thin.gif" width="9" height="14" hspace="4" border="0" alt=" " /></td>
<td valign="bottom" class="smaller" nowrap="nowrap"><a href="#{link placeholder}">Download</a></td>
-->                     </tr>                 </tbody>             </table></div></td>         </tr>     </tbody> </table> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>The JVM tool interface (JVM TI) is a standard native API that allows for native libraries to capture events and control a Java Virtual Machine (JVM) for the Java platform.             <a href="/technetwork/articles/javase/index-140680.html#footnote">*</a> These native libraries are sometimes called agent libraries and are often used as a basis for the Java technology-level tool APIs, such as the Java Debugger Interface (JDI) that comes with the Java Development Kit (JDK). Profiler tool vendors will often need to create an agent library that uses JVM TI. This article explores some basics of writing a JVM TI agent library by walking through the               <code>heapTracker</code> demo agent available in the JDK downloads.</p> <p>In the releases prior to JDK 5.0, an agent was loaded into a virtual machine (VM) at initialization with the option               <code>-XrunNAME</code>, where               <code>NAME</code> is the name of the native shared library or DLL, such as               <code>libNAME.so</code> or               <code>NAME.dll</code>. For example, when using               <code>HPROF</code> and inputting               <code>java&nbsp;-&nbsp;Xrunhprof</code>, the library               <code>libhprof.so</code> or               <code>hprof.dll</code> would be found in the JDK. The VM would cause that library to be dynamically loaded, and the VM would make a call into that library to get it started. The option and timing of when these libraries were loaded were nonstandard. The               <code>-Xrun</code> option would load the libraries after the VM had initialized itself, sometimes resulting in early VM events not being available to the agent. The library itself would use the Java Native Interface (JNI) and either JVM Debug Interface (JVMDI) for debugging or the experimental JVM Profiling Interface (JVMPI) for profiling. Both of these are being removed from future JDK releases. Here is               <a href="/technetwork/articles/javase/jvmpitransition-138768.html">an article on the transition from JVMPI to JVM TI</a>.</p> <p>Beginning with JDK 5.0, the new standard option is               <code>-agentlib</code>, for example,               <code>java -agentlib:hprof</code>, although JDK 5.0 still accepts the               <code>-Xrun</code> option. The new agent-loading options are documented and official. The library is loaded before the VM has initialized, allowing the agent library to capture early VM events that it could not access before. The library itself then uses JVM TI and JNI for debugging, profiling, or doing anything an agent does. A set of sample JVM TI agents is available in the               <code>demo</code> directory of the               <a href="/technetwork/java/javase/archive-139210.html">JDK 5.0</a> or the               <a href="/technetwork/java/javase/downloads/index.html">JDK 6</a> download. Source and binaries are included for those interested in creating their own custom agent library.</p> <div><strong>Buyer Beware: Don't Accept Agents From Strangers</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>Because the agent library will be operating in the same process and address space as the VM itself, anything inside the agent code will run in the VM process too. A bad agent can crash the entire VM process with a trivial null pointer dereference. Agents can also be very difficult to get right. Agent libraries must be re-entrant and MT-safe, and they must follow all the JVM TI and JNI rules. For instance, if your agent leaks memory by calling               <code>malloc()</code> and not doing the               <code>free()</code>, then the VM will appear to have a leak. Allocating too much memory will cause the VM process to fail with an               <code>out of memory</code> error. You must pay close attention to detail when you add an agent library.</p> <div><strong>Native Library Loading</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>The VM process must be able to locate the native library by way of the platform-specific search rules, so you must either copy the library into your JDK with the other shared libraries or make it accessible through a platform-specific mechanism so that a process can locate it. For example, you can use               <code>LD_LIBRARY_PATH</code> on the Solaris Operating Environment or Linux operating system, or you can use               <code>PATH</code> on Microsoft Windows. In addition, the agent library must be able to locate all the external symbols it needs from any platform-specific shared libraries. On the Solaris and Linux operating systems, you can use the               <code>ldd</code> utility to verify that a native library knows how to find all the necessary externals. Once the VM process has successfully loaded an agent library, it looks for a symbol in it to call and establish the agent-to-VM connection. The native library should have exposed an exported symbol with the name               <code>Agent_Onload</code>. This will be the first function called in the agent library.               <!-- <span class="sp10">&nbsp;</span><br /> --></p> <div><strong>The Dynamic Tracing (DTrace) Agent</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>An example VM agent of note is the Dynamic Tracing (DTrace) agent located at the               <a target="_blank" href="https://solaris10-dtrace-vm-agents.dev.java.net/">Solaris 10 OS DTrace VM agents project</a>. The               <code>dvm.zip</code> file includes the built libraries and the source code to the Solaris OS JVM TI agent.</p> <p>DTrace is a comprehensive dynamic tracing framework for the Solaris OS that provides a powerful infrastructure to permit administrators, developers, and service personnel to concisely answer arbitrary questions about the behavior of the OS and user programs. The               <a target="_blank" href="http://docs.sun.com/app/docs/doc/817-6223">Solaris Dynamic Tracing Guide</a> describes how to use DTrace to observe, debug, and tune system behavior. The guide also includes a complete reference for bundled DTrace observability tools and the D programming language.</p> <p>The JDK 6 release includes built-in DTrace probes, whereas older JDKs such as 5.0 or 1.4.2 can be limited with respect to DTrace. The VM agent for use with Solaris 10 OS dynamic tracing (             <a target="_blank" href="https://solaris10-dtrace-vm-agents.dev.java.net/">DVM agent</a>) is useful for older JDK releases in that it indirectly provides DTrace probes inside the agent library itself. The DVM agent is unusual in that it requests VM events but often does nothing itself with the event besides providing a DTrace probe point. Though this creates some unnecessary overhead, the functionality it provides can be extremely valuable.</p> <p>Again, the               <a href="/technetwork/java/javase/downloads/index.html">JDK 6 release</a> includes virtually all required built-in DTrace probes, thus eliminating the need for a DVM agent.</p> <div><strong>Agent Interfaces</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>Great care must be taken when writing agents because exposing your agent requires that you have a well-planned testing strategy and are familiar with highly recursive and highly re-entrant coding.</p> <p>In general, byte-code instrumentation (BCI) is the recommended way to instrument class files, and BCI is easy to do in JVM TI. BCI provides a way to inject code into the class file methods, either before the VM sees the class file (             <code>ClassFileLoadHook</code>) or by redefining the class files on the fly (             <code>RedefineClass</code>). See               <a target="_blank" href="http://weblogs.java.net/blog/kellyohair/archive/2005/05/bytecode_instru.html">this blog entry</a> for more information about BCI. Note: JVM TI does not provide code to do the BCI. Instead, its goal is to allow you to replace class files that have been BCI'd. See the section &quot;             <a href="/technetwork/articles/javase/index-140680.html#BCI">BCI and BCI Events</a>&quot; later in this article for more information.</p> <p>Depending on your needs, it may be helpful to get a basic understanding of what agent interfaces can and cannot do. The documentation is worth browsing to become familiar with these interfaces. Look at the documentation for the following JDKs:</p> <ul>     <li><a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/">JDK 5.0 agent API</a> and                 <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jni/">JNI</a></li>     <li><a href="http://docs.oracle.com/javase/6/docs/technotes/guides/jvmti/index.html">JDK 6 agent API</a> and                 <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/jni/index.html">JNI</a></li> </ul> <div><strong>Agent Initialization</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>After the VM has located your shared library and successfully loaded it into the VM process, it looks in the library for               <code>Agent_OnLoad</code>. JVM TI has capabilities that must be requested during the               <code>Agent_OnLoad</code> execution. This better informs the VM what the agent will need to do and allows for optimal performance based on the capabilities you have requested. To avoid unnecessary overhead in the VM, agents generally should request only the capabilities they need.</p> <p>So what does agent initialization look like? Following is some code to illustrate. Note: This sample code has been shortened to make it easier to follow, so it is incomplete. The code is mainly from the               <code>heapTracker</code> demo JVM TI agent that is shipped with JDK 5.0 or more recent versions. To find all the details and comments, get the complete copy of               <code>heapTracker.c</code> in the               <code>demo/jvmti/heapTracker</code> directory of any JDK 5.0 or JDK 6 binary download.</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
#include &quot;jvmti.h&quot;
#include &quot;jni.h&quot;

static jrawMonitorID agent_lock;

JNIEXPORT jint JNICALL
Agent_OnLoad(JavaVM *vm, char *options, void *reserved) {
    jvmtiEnv              *jvmti;
    jvmtiError             error;
    jint                   res;
    jvmtiCapabilities      capabilities;
    jvmtiEventCallbacks    callbacks;

    // Create the JVM TI environment (jvmti).
    res = (*vm)-&gt;GetEnv(vm, (void **)&amp;jvmti, JVMTI_VERSION_1);
    // If res!=JNI_OK generate an error.

    // Parse the options supplied to this agent on the command line.
    parse_agent_options(options);
    // If options don't parse, do you want this to be an error?

    // Clear the capabilities structure and set the ones you need.
    (void)memset(&amp;capabilities,0, sizeof(capabilities));
    capabilities.can_generate_all_class_hook_events  = 1;
    capabilities.can_tag_objects                     = 1;
    capabilities.can_generate_object_free_events     = 1;
    capabilities.can_get_source_file_name            = 1;
    capabilities.can_get_line_numbers                = 1;
    capabilities.can_generate_vm_object_alloc_events = 1;

    // Request these capabilities for this JVM TI environment.
    error = (*jvmti)-&gt;AddCapabilities(jvmti, &amp;capabilities);
    // If error!=JVMTI_ERROR_NONE, your agent may be in trouble.

    // Clear the callbacks structure and set the ones you want.
    (void)memset(&amp;callbacks,0, sizeof(callbacks));
    callbacks.VMStart           = &amp;cbVMStart;
    callbacks.VMInit            = &amp;cbVMInit;
    callbacks.VMDeath           = &amp;cbVMDeath;
    callbacks.ObjectFree        = &amp;cbObjectFree;
    callbacks.VMObjectAlloc     = &amp;cbVMObjectAlloc;
    callbacks.ClassFileLoadHook = &amp;cbClassFileLoadHook;
    error = (*jvmti)-&gt;SetEventCallbacks(jvmti, &amp;callbacks, 
                      (jint)sizeof(callbacks));
    //  If error!=JVMTI_ERROR_NONE, the callbacks were not accepted.

    // For each of the above callbacks, enable this event.
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE, 
                      JVMTI_EVENT_VM_START, (jthread)NULL);
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE, 
                      JVMTI_EVENT_VM_INIT, (jthread)NULL);
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE, 
                      JVMTI_EVENT_VM_DEATH, (jthread)NULL);
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE, 
                      JVMTI_EVENT_OBJECT_FREE, (jthread)NULL);
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE, 
                      JVMTI_EVENT_VM_OBJECT_ALLOC, (jthread)NULL);
    error = (*jvmti)-&gt;SetEventNotificationMode(jvmti, JVMTI_ENABLE,
                      JVMTI_EVENT_CLASS_FILE_LOAD_HOOK, 
                      (jthread)NULL);
    // In all the above calls, check errors.

    // Create a raw monitor in the agent for critical sections.
    error = (*jvmti)-&gt;CreateRawMonitor(jvmti, &quot;agent data&quot;, 
                      &amp;(agent_lock));
    // If error!=JVMTI_ERROR_NONE, then you haven't got a lock!

    return JNI_OK; // Indicates to the VM that the agent loaded OK.
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span> <p>Note: The authors have ignored the error returns in this code sample,               <em>not</em> a good practice. Do not copy the preceding code sample without adding checks on the error returns. In JVM TI, because agents run inside the VM itself, the developer should set up extensive error checking. Any error in an agent probably indicates a problem in the implementation of your agent and is something that you should address. Errors in the case of               <code>Agent_Onload</code> should either cause the process to exit or should print an error and disable itself. It is important to decide what your agent should do in this situation.</p> <div><strong>Event Callbacks</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>What do you do once you've set up               <code>Agent_OnLoad</code> with the proper capabilities and event requests? Once the VM is running, you should start seeing calls to the functions you supplied to               <code>SetEventCallbacks</code>. In this particular case, a naming convention,               <code>cb</code> prefix, is used with these functions:               <code>cbVMStart</code>,               <code>cbVMInit</code>,               <code>cbObjectFree</code>,               <code>cbVMObjectAlloc</code>,               <code>cbClassFileLoadHook</code>, and               <code>cbVMDeath</code>. The               <code>cbClassFileLoadHook</code> is called for each class file image being loaded, and it will likely be called first, at least until the first few basic system classes are loaded before               <code>cbVMStart</code>.</p> <p><strong>              <code>JVMTI_EVENT_CLASS_FILE_LOAD_HOOK</code>             </strong></p> <p>Let's now look at               <code>cbClassFileLoadHook</code>, which is called before any class is loaded and, thus, will probably be called first:</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbClassFileLoadHook(jvmtiEnv *jvmti, JNIEnv* env,
                jclass class_being_redefined, jobject loader,
                const char* name, jobject protection_domain,
                jint class_data_len, const unsigned char* class_data,
                jint* new_class_data_len, 
                unsigned char** new_class_data) 
{
    enterCriticalSection(jvmti); {

       // Safety check, if VM is dead, skip this.
        if ( !gdata-&gt;vmDead ) {
            const char * classname;

           // If you have no classname, dig it out of the class file.
            if ( name == NULL ) {
                classname = java_crw_demo_classname(class_data, 
                              class_data_len, NULL);
          } else {
                classname = strdup(name);
          }
           
          // Assume you won't change the class file at first.
          *new_class_data_len = 0;
          *new_class_data     = NULL;

          // Be careful that you don't track the tracker class.
          if (strcmp(classname, STRING(HEAP_TRACKER_class))!=0) {
                jint           cnum;
                int            systemClass;
                unsigned char *newImage;
                long           newLength;

                // Processed class counter
                cnum = gdata-&gt;ccount++;

                // Tell java_crw_demo if this is an early class.
                systemClass = 0;
                if ( !gdata-&gt;vmStarted ) {
                    systemClass = 1;
                }

                // Use java_crw_demo to create a new class file.
                newClassData = NULL;
                newLength = 0;
                java_crw_demo(cnum, classname, class_data,
                    class_data_len, systemClass,
                    STRING(HEAP_TRACKER_class),
                    &quot;L&quot; STRING(HEAP_TRACKER_class) &quot;;&quot;,
                    NULL, NULL, NULL, NULL,
                    STRING(HEAP_TRACKER_newobj), 
                    &quot;(Ljava/lang/Object;)V&quot;,
                    STRING(HEAP_TRACKER_newarr), 
                    &quot;(Ljava/lang/Object;)V&quot;,
                    &amp;newClassData, &amp;newLength, NULL, NULL);

                // If it did something, make a JVM TI copy.
                if ( newLength &gt; 0 ) {
                    unsigned char *jvmti_space;
                    jvmti_space = (unsigned char *)
                              allocate(jvmti, (jint)newLength);
                    (void)memcpy(jvmti_space, 
                              newClassData, newLength);
                    *new_class_data_len = (jint)newLength;
                    *new_class_data     = jvmti_space; 
                }

                // Free any malloc space created.
                if ( newClassData != NULL ) {
                    (void)free((void*)newClassData);
                }
            }

            // Free the classname (malloc space too).
             (void)free((void*)classname);
          }
    } exitCriticalSection(jvmti);
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>The function               <code>java_crw_demo</code> is a pure native and independent non-JNI library function that this article discusses in the section &quot;             <a href="/technetwork/articles/javase/index-140680.html#BCI">BCI and BCI Events</a>.&quot; Note that               <code>java_crw_demo</code> accepts class data bytes and returns               <code>new</code> class data bytes in memory. Nothing in the agent can disturb the global static data (             <code>gdata</code>) while the classload is processing. In effect, the classload has not occurred. Rather, this event represents the time during which the VM has located the class file and read it into memory, but before it has processed the class data bytes. During this event, the bytes that represent the class can be replaced, and the VM will load the replacement class data bytes. The               <code>java_crw_demo</code> library is limited in terms of what gets changed in the class. It will not add methods, fields, or arguments to methods; nor will it change the basic interface or shape of the object. The intent here is to instrument the existing method byte codes.</p> <p>Because some classes are loaded before the VM start event, what this callback does is quite important. This agent has requested these               <code>ClassFileLoadHook</code> events from the beginning, so it needs to be very careful what it does if the VM has not started or been initialized before the callbacks have been made.</p> <p>Notice that the test on               <code>gdata-&gt;vmDead</code> offers protection if another thread is trying to terminate the VM. There is no need to process class files if VM death is imminent.</p> <p>The               <code>classname NULL</code> occurs rarely and only occurs when the               <code>ClassLoader.defineClass()</code> method is used with a               <code>NULL</code> name. When that happens, a               <code>java_crw_demo</code> library function gets the name from the class file.</p> <p>The new class data bytes may include calls to the               <code>Tracker</code> class (see the section &quot;BCI and BCI Events&quot;), so the               <code>strcmp()</code> on the               <code>HEAP_TRACKER_CLASS</code> is very important. If you inject calls to the               <code>HEAP_TRACKER_CLASS</code> inside the               <code>HEAP_TRACKER_CLASS</code>, you will create an infinite loop.</p> <p>The               <code>gdata-&gt;ccount</code> allows a unique numeric ID for every class loaded. This is passed into the main               <code>java_crw_demo</code> function.</p> <p>Finally, note the use of               <code>gdata-&gt;vmStarted</code>. A better solution might be coming, but for now, the first classes loaded between               <code>Agent_OnLoad</code> and the               <code>VM_START</code> event are considered, for lack of a better term, system classes. The               <code>java_crw_demo</code> treats these classes, of which there are usually 12 or fewer, in a special way when instrumenting them due to their primordial nature and the state of the VM prior to the VM start event. For more on this subject, check the details of java_crw_demo in the               <code>demo/jvmti</code> directory.</p> <p>The memory allocated by the               <code>java_crw_demo</code> library is               <code>malloc()</code> memory; it is not JVM TI-allocated memory. The VM gets the               <code>new</code> class data bytes through the arguments               <code>new_class_data_len</code> and               <code>new_class_data</code>. The memory returned back to the VM must be allocated by way of               <code>JVM TI Allocate</code>, which is why the               <code>malloc()</code> allocated               <code>java_crw_demo</code> memory is copied. The               <code>java_crw_demo</code> code is neutral code and does not have any dependence on JVM TI or the VM. It's a C library with standard C library dependencies.</p> <p><strong>              <code>JVMTI_EVENT_VM_START</code>             </strong></p> <p>After some core system classes are loaded and the VM has started but not completely initialized, the               <code>VM_START</code> event is posted. You can then call many JNI functions. However, because the VM is not fully initialized, there are limitations in what can be done at this point. At the VM start event, the VM is considered to be out of its primordial phase.</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbVMStart(jvmtiEnv *jvmti, JNIEnv *env) {
    enterCriticalSection(jvmti); {
       jclass klass;
       jfieldID field;
        jint rc;
        static JNINativeMethod registry[2] = {
            {STRING(HEAP_TRACKER_native_newobj), 
                &quot;(Ljava/lang/Object;Ljava/lang/Object;)V&quot;, 
                (void*)&amp;HEAP_TRACKER_native_newobj },
            {STRING(HEAP_TRACKER_native_newarr), 
                &quot;(Ljava/lang/Object;Ljava/lang/Object;)V&quot;, 
                (void*)&amp;HEAP_TRACKER_native_newarr }
        };
      
      // Find the tracker class. 
        klass = (*env)-&gt;FindClass(env, STRING(HEAP_TRACKER_class));

      // Register the native methods to the ones in this library.
        rc = (*env)-&gt;RegisterNatives(env, klass, registry, 2);

       // Get the static field &quot;engaged&quot; in this class.
        field = (*env)-&gt;GetStaticFieldID(env, klass, 
                STRING(HEAP_TRACKER_engaged), &quot;I&quot;);

       // Set the value of this static field to &quot;1.&quot;
        (*env)-&gt;SetStaticIntField(env, klass, field, 1);

       // Record that the VM has officially started.
       gdata-&gt;vmStarted = JNI_TRUE;

    } exitCriticalSection(jvmti);
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>For the VM start event, you must first set up the               <code>Tracker</code> class used for BCI. First, the JNI function               <code>FindClass</code> is called to get the               <code>jclass</code> handle. Note that this could trigger a               <code>ClassFileLoadHook</code> event. Then the native methods are registered for the               <code>Tracker</code> class with               <code>JNI RegisterNatives</code>, and the               <code>jfieldID</code> handle to               <code>engaged</code> is obtained using               <code>JNI GetStaticFieldID</code>. By setting this static field to               <code>1</code>, you essentially activate the calls inside this               <code>Tracker</code> class. The               <code>Tracker</code> source looks like this:</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
public class HeapTracker {

    // The static field that controls tracking
    private static int engaged = 0;

    // Calls to this method will result in a call into the agent.
    private static native void _newobj(Object thread, Object o);

    // Calls to this method are injected into the class files.
    public static void newobj(Object o) {
        if ( engaged != 0 ) {
            _newobj(Thread.currentThread(), o);
        }
    }

    // Calls to this method will result in a call into the agent.
    private static native void _newarr(Object thread, Object a);

    // Calls to this method are injected into the class files.
    public static void newarr(Object a) {
        if ( engaged != 0 ) {
            _newarr(Thread.currentThread(), a);
        }
    }

}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>All the               <code>Tracker</code> methods that will be called by the BCI classes modified by               <code>java_crw_demo</code> are turned off by default until the               <code>engaged</code> field value changes to               <code>1</code>. When this occurs, it triggers the injected               <code>Tracker Method</code> calls to call the native methods that have already registered. Before this article discusses what occurs next in the native methods, note that these native calls cannot be turned on until the VM has started. It's necessary to be able to call JNI functions in the native code, which is why               <code>engaged</code> was set to               <code>1</code> here and not earlier. If the above               <code>Tracker</code> code were to initiate anything more sophisticated, such as calling methods in classes, that would require waiting until the VM initialization phase.</p> <p><strong>              <code>TraceInfo</code> and                 <code>Tracker</code> Methods             </strong></p> <p>The               <code>heapTracker</code> agent's main function is to find out what is allocating the most space. At each object allocation, it's important to find out what the stack trace is and then to tag the object with a reference to that trace information. Inside the agent itself, there is a               <code>TraceInfo</code> struct, and pointers to these structs will serve as the value of the               <code>Object Tags</code>. A               <em>tag</em> is any 64-bit value. Along with the               <code>TraceInfo</code> struct is support code to create a hash table for quick lookups. Because the creation or lookup of the               <code>TraceInfo</code> will probably consume much application time when this agent is activated, speed and efficiency are important. Here are the basics to find               <code>TraceInfo</code>:</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static TraceInfo *
findTraceInfo(jvmtiEnv *jvmti, jthread thread, TraceFlavor flavor) {
    TraceInfo *tinfo;
    jvmtiError error;
    
    tinfo = NULL;

    // The thread could be NULL in some situations, so be careful.
    if ( thread != NULL ) {
        static Trace  empty;
        Trace         trace;

        // Request a stack trace.
        trace = empty;
        error = (*jvmti)-&gt;GetStackTrace(jvmti, thread, 0, 
                          MAX_FRAMES+2,
                            trace.frames, &amp;(trace.nframes));

        // If you get a PHASE error, the VM isn't ready, or it died.
        if ( error == JVMTI_ERROR_WRONG_PHASE ) {
            if ( flavor == TRACE_USER ) {
                tinfo = emptyTrace(TRACE_BEFORE_VM_INIT);
            } else {
                tinfo = emptyTrace(flavor);
            }
        } else {
           // If error!=JVMTI_ERROR_NONE, you have serious problems.
            check_jvmti_error(jvmti, error, &quot;Cannot get stack trace&quot;);
            // Look up this entry.
            tinfo = lookupOrEnter(jvmti, &amp;trace, flavor);
        }

    } else {
        // If thread==NULL, it's assumed this is before VM_START.
      // But technically this should not happen, no tracking yet.
        if ( flavor == TRACE_USER ) {
            tinfo = emptyTrace(TRACE_BEFORE_VM_START);
        } else {
            tinfo = emptyTrace(flavor);
        }
    }
    return tinfo;
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>If               <code>thread==NULL</code>, that usually means that the VM initialization has not yet occurred, so you cannot get a stack trace. Calling               <code>GetStackTrace</code> could also return an error message that the VM is not in the               <code>live</code> phase, but a value of               <code>JVMTI_ERROR_NONE</code> indicates that you did get a stack trace. Performing a               <code>lookupOrEnter</code> of this stack trace into the hash table will return a reference to a               <code>TraceInfo</code> structure. This pointer to a               <code>TraceInfo</code> struct will then be used as the tag on this object. All objects allocated from the same stack trace will have the same tag.</p> <p>When saving away stack trace information, pay attention to the               <code>TraceInfo</code> struct and the number of stack traces received. There should be only one stack trace of an allocation byte code (             <code>new</code> or               <code>new array</code> byte code), but how many stack traces will that be? It depends on the application, but it's somewhat limited. Also, no cleanup is occurring in               <code>lookupOrEnter</code>, so a very long-running application could experience some problems if the total number of allocation traces is very high. The hash table is also a fixed size, another potential problem. To avoid performance issues, being aware of the critical sections, one of which is in the               <code>lookupOrEnter()</code> function, is crucial. Using too many critical sections could dramatically slow the entire application. The thread used here is the current user thread; limit what you are doing in these threads.</p> <p>Object allocations and object-free events are fairly critical-section free with regard to this particular agent.</p> <p><strong>              <code>JVMTI_EVENT_VM_INIT</code>             </strong></p> <p>After the               <code>VM_START</code> event and approximately several hundred class load events, the VM will reach the fully initialized event.</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbVMInit(jvmtiEnv *jvmti, JNIEnv *env, jthread thread) {
    jvmtiError error;
    
    // Iterate over the entire heap and tag untagged objects.
    error = (*jvmti)-&gt;IterateOverHeap(jvmti,
                      JVMTI_HEAP_OBJECT_UNTAGGED,
                        &amp;cbObjectTagger, NULL);

    enterCriticalSection(jvmti); {
        gdata-&gt;vmInitialized = JNI_TRUE;
    } exitCriticalSection(jvmti);
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>Despite full initialization and setting               <code>gdata-&gt;vmInitialized</code>, many objects were allocated but were not tracked because the               <code>Tracker</code> classes are not turned on until the agent gets the               <code>VMStart</code> event. Using the JVM TI               <code>IterateOverHeap</code> to traverse the heap, objects can now be tagged. Remember: You cannot track objects unless you tag them.</p> <p><strong>              <code>JVMTI_EVENT_OBJECT_FREE</code>             </strong></p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbObjectFree(jvmtiEnv *jvmti, jlong tag)
{
    TraceInfo *tinfo;
  
    // Don't bother if dead.
    if ( gdata-&gt;vmDead ) {
        return;
    }
    
    // The object tag is actually a pointer to a TraceInfo struct.
    tinfo = (TraceInfo*)(void*)(ptrdiff_t)tag;
    
    // Decrement the use count.
    tinfo-&gt;useCount--;
}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p><strong>              <code>JVMTI_EVENT_VM_OBJECT_ALLOC</code>             </strong></p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbVMObjectAlloc(jvmtiEnv *jvmti, JNIEnv *env, jthread thread, 
                jobject object, jclass object_klass, jlong size)
{
    TraceInfo *tinfo;
    
    // Don't bother if dead.
    if ( gdata-&gt;vmDead ) {
        return;
    }

    // Create a stack trace and tag the object.
    tinfo = findTraceInfo(jvmti, thread, TRACE_VM_OBJECT);
    tagObjectWithTraceInfo(jvmti, object, tinfo);

}
</pre></td>             <td>&nbsp;</td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p><strong>              <code>JVMTI_EVENT_VM_DEATH</code>             </strong></p> <p>As the name implies, the JVM TI event named               <code>VM death</code> is the last VM event. However, due to multiple threads, other event callbacks could still be in progress during this event callback. Depending on thread priorities, it's hard to predict the timing of the code in these final callbacks. Some agents use a lock and a counter to keep track of the active callbacks, then wait in this               <code>VM death</code> callback until the count reaches zero. Be careful here, and don't assume that all event callbacks are completed.</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
static void JNICALL
cbVMDeath(jvmtiEnv *jvmti, JNIEnv *env) {
    jvmtiError error;

    // IterateOverHeap can see garbage, so force a GC first.
    error = (*jvmti)-&gt;ForceGarbageCollection(jvmti);

    // Notice that you hold no locks on this call, that's important.
    error = (*jvmti)-&gt;IterateOverHeap(jvmti,
                         JVMTI_HEAP_OBJECT_EITHER,
                           &amp;cbObjectSpaceCounter, NULL);

    enterCriticalSection(jvmti); {
       jclass              klass;
         jfieldID            field;
       jvmtiEventCallbacks callbacks;

       // Find the heap tracker class.
        klass = (*env)-&gt;FindClass(env, STRING(HEAP_TRACKER_class));
       
       // Get the static &quot;engaged&quot; field.
        field = (*env)-&gt;GetStaticFieldID(env, klass, 
                      STRING(HEAP_TRACKER_engaged), &quot;I&quot;);

       // Set the engaged field to &quot;0,&quot; turns off BCI calls in
       // Tracker class.
        (*env)-&gt;SetStaticIntField(env, klass, field, 0);

       // Clear the callbacks struct and clear the JVM TI callbacks.
      (void)memset(&amp;callbacks,0, sizeof(callbacks));
        error = (*jvmti)-&gt;SetEventCallbacks(jvmti, &amp;callbacks, 
                        (jint)sizeof(callbacks));

       // Consider the VM dead at this point.
        gdata-&gt;vmDead = JNI_TRUE;
        if ( gdata-&gt;traceInfoCount &gt; 0 ) {
            TraceInfo **list;
            int         count;
            int         i;
           
           // Allocate space for a sorted list of TraceInfos.
            stdout_message(&quot;Dumping heap trace information\n&quot;);
            list = (TraceInfo**)calloc(gdata-&gt;traceInfoCount, 
                                              sizeof(TraceInfo*));
            count = 0;
            for ( i = 0 ; i &lt; HASH_BUCKET_COUNT ; i++ ) {
                TraceInfo *tinfo;

                tinfo = gdata-&gt;hashBuckets[i];
                while ( tinfo != NULL ) {
                    if ( count &lt; gdata-&gt;traceInfoCount ) {
                        list[count++] = tinfo;
                    }
                    tinfo = tinfo-&gt;next;
                }
            }

          // Sort the list and print out the top ones.
            qsort(list, count, sizeof(TraceInfo*), &amp;compareInfo);
            for ( i = 0 ; i &lt; count ; i++ ) {
                if ( i &gt;= gdata-&gt;maxDump ) {
                    break;
                }
                printTraceInfo(jvmti, i+1, list[i]);
            }

           // Free the space you allocated.
            (void)free(list);
        }
    } exitCriticalSection(jvmti);
}  
</pre></td>             <td>&nbsp;</td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>To summarize, first use JVM TI to force garbage collection in order to iterate over the heap and get a count, per stack trace, of the objects currently allocated. Next, turn the               <code>Tracker</code> class off and disconnect all the JVM TI callbacks, keeping in mind that some callbacks may still be active and that you have turned off any future callbacks by removing their addresses from the JVM TI environment. You can accomplish the same thing by disabling the events. Finally, construct a single-dimensioned list of all the               <code>TraceInfo</code> structures, sort it by allocation amount, and print out up to               <code>gdata-&gt;maxDump</code> of the stack traces that allocated the most memory.</p> <div><strong>Object Tagging</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>As you can see, working with VM agent code can be challenging. Look at the higher-level view to get a better grasp. This example code, called               <code>heapTracker</code>, exists to track all object allocations in the heap, saving the stack trace where each object was allocated. Using BCI, this agent incorporates additional byte codes around the object allocations to capture the stack trace and tag the objects that were allocated with that stack trace. As the VM executes your byte code, it also executes the byte code that was added, calling the               <code>Tracker</code> methods, which will then call the native methods that are registered for the               <code>Tracker</code> class. Native methods create a               <code>TraceInfo</code> struct and tag the object with that struct address.</p> <p>Objects that have non-zero tags are treated differently. Tags are necessary for any objects you are concerned with -- in this case, all objects. Only objects with tags will be seen in any               <code>JVMTI_EVENT_OBJECT_FREE</code> event, so this is the only way that an object is currently allocated. To have a unique identification per object would require a unique tag value for every object. You could, for example, tag an object with an integer counter, but you would have only that counter, which represented when in allocation time an object was allocated. But you could capture more specific data if that counter were used to index additional data about an object. You could use the counter technique to track details about every 10th object, for example, or perhaps the last 1000 objects allocated. There are many possibilities.</p> <p>A fairly common and low-impact shortcut when using JDK 6 is to tag only the actual               <code>Class</code> objects and then use a JVM TI call to               <code>FollowReferences</code> (new in JDK 6) to quickly sum up the object counts based solely on the type of classes they are. In this case, BCI is not needed, but you won't know where the actual objects were allocated, just that they were allocated. Tagging only the               <code>Class</code> objects creates very little overhead.</p> <p>The VM's garbage collector manages allocations by compacting, rearranging, and doing whatever is necessary to reclaim space and provide the space needed for allocations. In the process, objects get moved, which is why having a particular address in the process memory is not very helpful and why tags are used. If you want access to a tagged object, you can get the JNI jobject handle to an object with               <code>GetObjectsWithTags</code>, and you can use any of the JNI or JVM TI calls to access that object through that JNI handle.</p> <p>So how do you tag an object? There are multiple ways. You can use the explicit               <code>SetTag</code> interface, and you can also simply assign the tag during some of the callbacks from interfaces such as               <code>IterateOverHeap</code>. Both of these tagging mechanisms are used in the               <code>heapTracker.c</code> example.</p> <div><strong>              <a id="BCI" name="BCI"></a>BCI and BCI Events             </strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>This example agent uses a native BCI library called               <code>java_crw_demo</code> (             <code>libjava_crw_demo.so</code> or               <code>java_crw_demo.dll</code>) that is available as part of the JDK downloads in the               <code>demo/jvmti/java_crw_demo</code> directory.</p> <p>The               <code>java_crw_demo</code> function provides for very simple byte-code instrumentation (BCI). It's acceptable for some very basic needs such as these JVM TI demo agents and tools such as               <code>HPROF</code>, but it has its limitations. The               <code>java_crw_demo</code> function provides basic instrumentation of method entries, method returns,               <code>new</code> byte codes, and               <code>new array</code> byte codes. It's written in C and has been used in several of the JVM TI demo agents and in               <code>HPROF</code>. The byte codes injected are limited to simple dups and               <code>invokestatic</code> byte codes to the methods of a               <code>Tracker</code> class.</p> <p>Let's look once more at the               <code>HeapTracker</code> class:</p> <table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4">     <tbody>         <tr>             <td><pre>
public class HeapTracker {

    // The static field that controls tracking
    private static int engaged = 0;

    // Calls to this method will result in a call into the agent.
    private static native void _newobj(Object thread, Object o);

    // Calls to this method are injected into the class files.
    public static void newobj(Object o) {
        if ( engaged != 0 ) {
            _newobj(Thread.currentThread(), o);
        }
    }

    // Calls to this method will result in a call into the agent.
    private static native void _newarr(Object thread, Object a);

    // Calls to this method are injected into the class files.
    public static void newarr(Object a) {
        if ( engaged != 0 ) {
            _newarr(Thread.currentThread(), a);
        }
    }

}
</pre></td>         </tr>     </tbody> </table> <span class="sp20">&nbsp;</span><br /> <p>As you can see, there isn't much to this class. The methods               <code>newobj()</code> and               <code>newarr()</code> will be called from the injected byte code of the application, which in turn will call the native methods, which have been registered as the functions               <code>HEAP_TRACKER_native_newobj()</code> and               <code>HEAP_TRACKER_native_newarr()</code> inside the native agent library. Of course, having the               <code>newobj()</code> and               <code>newarr()</code> methods call native methods was an implementation choice, and the developer used it in this case as the quickest way to get back into the native agent library.</p> <p>The               <code>newobj()</code> method needs to be called only in the               <code>&lt;init&gt;</code> method of               <code>java.lang.Object</code>. Though it is necessary to adjust the               <code>stacktrace</code> to compensate for the few additional frames, it is an accurate accounting of all objects that are allocated and initialized. The byte-code injection is just a               <code>dup</code> and an               <code>invokestatic</code> byte-code insertion, along with the necessary constant pool entries for the               <code>Tracker classname</code> and               <code>newobj()</code> method name. The VM specification does not allow an object to be passed anywhere before it is initialized, so injecting byte codes after every               <code>new</code> byte code will trigger verification errors when the object is passed into               <code>newobj()</code>. An alternative is to find the               <code>new</code> byte codes, add the               <code>dup</code> after each, and then insert the               <code>invokestatic</code> byte code after the matching method call for the specific class. Some profilers that use BCI may do this, but this small demo does not.</p> <p>For more details about how to modify class files, see the source code to the               <code>java_crw_demo</code> library by downloading either               <a href="/technetwork/java/javase/archive-139210.html">JDK 5.0</a> or               <a href="/technetwork/java/javase/downloads/index.html">JDK 6</a>.</p> <p>You can use several BCI class libraries. The JDK provides a way for developers to write pure Java technology-based agents using the               <code>java.lang.instrument</code> classes and the               <code>-javaagent</code> option in JDK 5.0. So you are not limited to writing native C or C++ code when doing BCI.</p> <div><strong>Conclusion: Countless Solutions to Countless Problems</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>This article has focused on a particular application of JVM TI for a particular purpose. However, just as there are countless solutions to problems, there are countless varieties of agents that you can write. In general, you will need to experiment and take time to produce a good solution and a good robust agent. To gain better insight into your agent performance, use native tools such as those available in the Solaris 10 OS, DTrace, or               <a href="#">Sun Studio Performance Analyzer</a>, a tool that helps assess code performance, identify potential performance problems, and locates where problems occur inside the code.               <a id="footnote" name="footnote"></a></p> <p>* The terms &quot;Java Virtual Machine&quot; and &quot;JVM&quot; mean a Virtual Machine for the Java(TM) platform.</p> <div><strong>For More Information</strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p>JVM Tool Interface (JVM TI) for               <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/index.html">JDK 5.0</a> and               <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/jvmti/index.html">JDK 6</a>             <br /> <a target="_blank" href="/technetwork/articles/javase/jvmpitransition-138768.html">Transitioning from JVMPI to JVM TI</a>             <br /> Java Native Interface (JNI) for               <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jni/">JDK 5.0</a> and               <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/jni/index.html">JDK 6</a>             <br /> <a target="_blank" href="http://weblogs.java.net/blog/kellyohair/archive/2005/05/bytecode_instru_1.html">Kelly O'Hair's Blog</a>             <br /> <a target="_blank" href="https://solaris10-dtrace-vm-agents.dev.java.net/">Solaris 10 OS DTrace VM Agents Project</a>             <br /> <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/architecture.html">Java Platform Debugger Architecture: Overview</a>             <br /> <a href="/technetwork/java/javase/downloads/index.html">Java SE Downloads</a></p> <div><strong>              <a id="authors" name="authors"></a>About the Authors             </strong></div> <div class="contentdivider"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="grey4">     <tbody>         <tr>             <td><img width="1" height="4" border="0" alt=" " src="/ocom/groups/public/@otn/documents/digitalasset/148611.gif" /></td>         </tr>     </tbody> </table></div> <p><strong>Kelly O'Hair</strong>, a senior staff engineer at Sun Microsystems, works in the JDK Core Serviceability area and focuses on improving the JDK builds and JVM Tool Interface (JVM TI). Read his               <a target="_blank" href="http://weblogs.java.net/blog/kellyohair/archive/2005/05/bytecode_instru_1.html">blog</a>.</p> <p><strong>Janice J. Heiss</strong>, in addition to exploring the world of Java technology as a staff writer for Sun Microsystems, is a published writer of poetry, fiction, and memoir. She has also written and performed for the stage, including stand-up comedy.</p> <script src="" type="text/javascript">
//<![CDATA[
<!-- Hide script from older browsers
// Popup window function
function onRateSubmitHandler()
{
var w = window.open("","rr","width=800,height=600,status=no,toolbar=no,scrollbars=yes"); 
w.setTimeout("window.close();", 30000 );
return true;
}
// End of javascript 
-->
//]]>
</script> <form action="https://www2.sun.de/dc/servlets/incoming" method="post" name="form" onsubmit="return onRateSubmitHandler()" target="rr"><input type="hidden" name="errcount" value="1" />               <input type="hidden" name="ref" value="http://www2.sun.de/dc/forms/reg_xh_2610_243.jsp" />               <input type="hidden" name="" value="" />     <table width="100%" cellspacing="0" cellpadding="1" border="0" class="dkgrey" style="margin-top:7px">         <tbody>             <tr>                 <td><table width="100%" cellspacing="0" cellpadding="4" border="0" class="white">                     <tbody>                         <tr>                             <td class="dkgrey1"><strong>Rate and Review</strong></td>                         </tr>                         <tr>                             <td>Tell us what you think of the content of this page.</td>                         </tr>                         <tr>                             <td><strong>                          <input type="radio" name="custom_3" value="Excellent" /> Excellent&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Good" /> Good&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Fair" /> Fair&nbsp;&nbsp;                             <input type="radio" name="custom_3" value="Poor" /> Poor&nbsp;&nbsp;                         </strong></td>                         </tr>                         <tr>                             <td><strong>Comments:</strong>                         <br />                             <textarea cols="60" name="custom_2" rows="3" wrap="virtual"></textarea></td>                         </tr>                         <tr>                             <td><strong>Your email address (no reply is possible without an address):</strong>                         <br />                             <a target="_new" href="http://sun.com/privacy/">Sun Privacy Policy</a>                         <br />                             <input type="text" maxlength="60" name="custom_1" size="35" value="" />                        <br />                             Note: We are not able to respond to all submitted comments.</td>                         </tr>                         <tr>                             <td><input type="submit" border="0" class="buttonblue" onmouseout="this.style.color='#FFF';" onmouseover="this.style.color='#fbe249';" value="&nbsp;Submit &raquo;&nbsp;" />                           <input type="hidden" name="custom_0" value="Kelly O'Hair, J. Heiss" />                           <input type="hidden" name="custom_4" value="The JVM Tool Interface (JVM TI): How VM Agents Work" />                           <input type="hidden" name="custom_5" value="#" />                           <input type="hidden" name="cf_Form_Name" value="Rate and Review - article feedback" />                           <input type="hidden" name="cf_Form_Location" value="Registrations" />                           <input type="hidden" name="cf_iso2" value="XH" />                           <input type="hidden" name="charset" value="ISO-8859-1" /></td>                         </tr>                     </tbody>                 </table></td>             </tr>         </tbody>     </table></form>
					
	</div>
</div>
<div class="orcl6w5"><div class="orcl6x0"></div><div class="orcl6x1"></div></div>
	<div class="orcl6w6">
		<div class="orcl6x0"></div>
		<div class="orcl6x1"></div>
	
</div>

    
   
  		          
    		       
       			      
      
 
  
  		  
   
  

  </div>
<div id="Wrapper_FixedWidth_Rightnav">
<div style="background-color:#FFFFFF;">
    
</div>
</div>


          </div>

          <div id="Wrapper_FixedWidth_Footer">
            <div class="addThisPrintEmail">
            <!--SS_BEGIN_SNIPPET(fragment40,1)--> &nbsp;&nbsp;&nbsp;
	<a href="javascript:mailpage()"><img height="16" alt="E-mail this page" src="/us/assets/email.gif" width="19" border="0" /></a> <span style="MARGIN-BOTTOM: 2px">
	<a href="javascript:mailpage()">E-mail this page</a></span>&nbsp;&nbsp;&nbsp;
	<a onclick="printerView()" href="javascript: void 0;"><img height="16" alt="Printer View" src="/us/assets/print_icon.gif" width="19" border="0" />&nbsp;Printer View</a>
			<!--SS_END_SNIPPET(fragment40,1)-->
            </div>
 
<!-- SS_BEGIN_SNIPPET(fragment43,ocomfooter)-->				
		<!-- U10v0 -->
<div id="u10" class="u10v0" data-trackas="ffooter">
<div class="u10w1">
<div class="u10w2">
<div class="u10w3">
<h5>Contact Us</h5>
<ul>
    <li>US Sales: +1.800.633.0738</li>
    <li><a data-lbl="contact-us:have-oracle-call-you" href="javascript:startCallback('0i2wzK12842','customer data')" onclick="navTrack('ocom','en','rhs-contact','callmenow-oracle');">Have Oracle Call You</a></li>
    <li><a data-lbl="contact-us:global-contacts" href="https://www.oracle.com/corporate/contact/global.html">Global Contacts</a></li>
    <li><a data-lbl="contact-us:support-directory" href="https://www.oracle.com/support/contact.html">Support Directory</a></li>
</ul>
</div>
<div class="u10w3">
<h5>About Oracle</h5>
<ul>
    <li><a data-lbl="about-oracle:company-information" href="https://www.oracle.com/corporate/index.html">Company Information</a></li>
    <li><a data-lbl="about-oracle:communities" href="https://www.oracle.com/communities/index.html">Communities</a></li>
    <li><a data-lbl="about-oracle:careers" href="https://www.oracle.com/corporate/careers/index.html">Careers</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Cloud</h5>
<ul>
    <li><a data-lbl="cloud:overview-of-cloud-solutions" href="https://www.oracle.com/cloud/index.html">Overview of Cloud Solutions</a></li>
    <li><a data-lbl="cloud:software(saas)" href="https://cloud.oracle.com/saas?intcmp=ocom-ft">Software (SaaS)</a></li>
    <li><a data-lbl="cloud:platform(paas)" href="https://cloud.oracle.com/paas?intcmp=ocom-ft">Platform (PaaS)</a></li>
    <li><a data-lbl="cloud:infrastructure(iaas)" href="https://cloud.oracle.com/iaas?intcmp=ocom-ft">Infrastructure (IaaS)</a></li>
    <li><a data-lbl="cloud:data(daas)" href="https://cloud.oracle.com/data-cloud?intcmp=ocom-ft">Data (DaaS)</a></li>
    <li><a data-lbl="cloud:free-cloud-trial" href="https://cloud.oracle.com/tryit?intcmp=ocom-ft">Free Cloud Trial</a></li>
</ul>
</div>
<div class="u10w3">
<h5>Events</h5>
<ul>
    <li><a data-lbl="events:oracle-openworld" href="https://www.oracle.com/openworld/index.html">Oracle OpenWorld</a></li>
    <li><a data-lbl="events:oracle-code" href="https://developer.oracle.com/code">Oracle Code</a></li>
    <li><a data-lbl="events:javaone" href="https://www.oracle.com/javaone/index.html">JavaOne</a></li>
    <li><a data-lbl="events:all-oracle-events" href="https://www.oracle.com/search/events">All Oracle Events</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Top Actions</h5>
<ul>
    <li><a data-lbl="top-actions:download-java" href="https://www.java.com/download/">Download Java</a></li>
    <li><a data-lbl="top-actions:download-java-for-developers" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Download Java for Developers</a></li>
    <li><a data-lbl="top-actions:try-oracle-cloud" href="https://cloud.oracle.com/tryit?intcmp=ocom-ft">Try Oracle Cloud</a></li>
    <li><a data-lbl="top-actions:subscribe-to-emails" href="https://go.oracle.com/subscriptions?l_code=en-us&amp;src1=OW:O:FO">Subscribe to Emails</a></li>
</ul>
</div>
<div class="u10w3">
<h5>News</h5>
<ul>
    <li><a data-lbl="news:newsroom" href="https://www.oracle.com/corporate/press/index.html">Newsroom</a></li>
    <li><a data-lbl="news:magazines" href="http://www.oracle.com/us/corporate/publishing/index.html">Magazines</a></li>
    <li><a data-lbl="news:customer-success-stories" href="https://www.oracle.com/search/customers">Customer Success Stories</a></li>
    <li><a data-lbl="news:blogs" href="https://blogs.oracle.com/">Blogs</a></li>
</ul>
</div>
</div>
<div class="u10w2">
<div class="u10w3">
<h5>Key Topics</h5>
<ul>
    <li><a data-lbl="key-topics:erp-erm(finance)" href="https://www.oracle.com/applications/erp/index.html">ERP, EPM (Finance)</a></li>
    <li><a data-lbl="key-topics:hcm(hr-talent)" href="https://www.oracle.com/applications/human-capital-management/index.html">HCM (HR, Talent)</a></li>
    <li><a data-lbl="key-topics:marketing" href="https://www.oracle.com/marketingcloud/index.html">Marketing</a></li>
    <li><a data-lbl="key-topics:cx(sales-service-commerce)" href="https://www.oracle.com/applications/customer-experience/index.html">CX (Sales, Service, Commerce)</a></li>
    <li><a data-lbl="key-topics:supply-chain" href="https://www.oracle.com/applications/supply-chain-management/index.html">Supply Chain</a></li>
    <li><a data-lbl="key-topics:industry-solutions" href="https://www.oracle.com/industries/index.html">Industry Solutions</a></li>
    <li><a data-lbl="key-topics:database" href="https://www.oracle.com/database/index.html">Database</a></li>
    <li><a data-lbl="key-topics:mysql" href="https://www.oracle.com/mysql/index.html">MySQL</a></li>
    <li><a data-lbl="key-topics:middleware" href="https://www.oracle.com/middleware/index.html">Middleware</a></li>
    <li><a data-lbl="key-topics:java" href="https://www.oracle.com/java/index.html">Java</a></li>
    <li><a data-lbl="key-topics:engineered-systems" href="https://www.oracle.com/engineered-systems/index.html">Engineered Systems</a></li>
</ul>
</div>
</div>
<div class="u10w4"><hr />
</div>
<div class="u10w5" data-trackas="footer">
<ul class="scl-icons">
    <li class="scl-facebook"><a data-lbl="scl-icon:facebook" href="http://www.oracle.com/us/social-media/facebook/index.html" title="Oracle on Facebook">Facebook</a></li>
    <li class="scl-twitter"><a data-lbl="scl-icon:twitter" href="http://www.oracle.com/us/social-media/twitter/index.html" title="Follow Oracle on Twitter">Twitter</a></li>
    <li class="scl-linkedin"><a data-lbl="scl-icon:linkedin" href="http://www.oracle.com/us/social-media/linkedin/index.html" title="Oracle on LinkedIn">LinkedIn</a></li>
    <li class="scl-googleplus"><a data-lbl="scl-icon:google-plus" href="https://plus.google.com/115607918987921226255" title="Follow Oracle on Google+">Google+</a></li>
    <li class="scl-youtube"><a data-lbl="scl-icon:you-tube" href="http://www.youtube.com/oracle/" title="Watch Oracle on YouTube">YouTube</a></li>
    <li class="scl-feed"><a data-lbl="scl-icon:rss" href="http://www.oracle.com/us/syndication/feeds/index.html" title="Oracle RSS Feeds">Oracle RSS Feed</a></li>
</ul>
<div class="u10-ologo"><a data-lbl="integrated-cloud-applications-and-platform-services" href="https://www.oracle.com/index.html">Oracle</a></div>
<h3>Integrated Cloud Applications &amp; Platform Services</h3>
<ul class="u10-links">
    <li><a data-lbl="copyright" href="https://www.oracle.com/legal/copyright.html">&copy; Oracle</a></li>
    <li><a data-lbl="site-map" href="/sitemap.html">Site Map</a></li>
    <li><a data-lbl="terms-of-use-and-privacy" href="https://www.oracle.com/legal/privacy/index.html">Terms of Use and Privacy</a></li>
    <li>
    <div id="teconsent">&nbsp;</div>
    </li>
    <li class="u10last"><a data-lbl="ad-choices" href="https://www.oracle.com/legal/privacy/privacy-policy.html#advertising">Ad Choices</a></li>
</ul>
</div>
</div>
</div>
<!-- /U10v0 -->
 
			<!-- SS_END_SNIPPET(fragment43,ocomfooter)-->

          </div>
        </div>


        <div class="lightbox_overlay" id="fade">
          <!--spacer-->
        </div>


<!--SS_BEGIN_SNIPPET(fragment39,1)-->
				<!-- Start SiteCatalyst code -->
<script language="JavaScript" src="/us/assets/metrics/ora_otn.js"></script>
<!-- End SiteCatalyst code --> 

			<!--SS_END_SNIPPET(fragment39,1)-->

      </div>
    </div>
  </div>
<!--SS_BEGIN_SNIPPET(fragment35,universal-webcache-integration)-->
				
				
			<!--SS_END_SNIPPET(fragment35,universal-webcache-integration)-->
<!--Brightcove script line and lightbox code-->

  <div id="bcVideoPlayer" style="DISPLAY: none"></div>

  <div class="lightbox_overlay" id="lightbox_brightcove" style="DISPLAY: none; Z-INDEX: 30000" onclick="showclose();">
    <!--spacer-->&nbsp;
  </div>
<!--DTM embed code - Footer -->
<script type="text/javascript">_satellite.pageBottom();</script>
<!--End-->  
</body>
</html>
