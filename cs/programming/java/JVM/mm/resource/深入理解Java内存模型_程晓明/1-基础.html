<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/ca-pub-9394337417063147.js"></script><script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/shares.js" charset="utf-8"></script>
<meta name="baidu_union_verify" content="d30f7acd6a9a378cc0aeb0bd0ddfe30d">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9394337417063147",
    enable_page_level_ads: true
  });
</script>
<title>深入理解Java内存模型（一）——基础 | 并发编程网 – ifeve.com</title>
<meta name="description" content="让天下没有难学的技术">

<link rel="alternate" type="application/rss+xml" title="并发编程网 – ifeve.com RSS Feed" href="http://ifeve.com/feed/">
<link rel="alternate" type="application/atom+xml" title="并发编程网 – ifeve.com Atom Feed" href="http://ifeve.com/feed/atom/"> 
<link rel="pingback" href="http://ifeve.com/xmlrpc.php">

<link rel="stylesheet" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/style.css" type="text/css">
<link rel="stylesheet" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/comment-style.css" type="text/css">

 
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="并发编程网 - ifeve.com » 深入理解Java内存模型（一）——基础 Comments Feed" href="http://ifeve.com/java-memory-model-1/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ifeve.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/wp-emoji-release.js" type="text/javascript" defer="defer"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="wpfp-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/wpfp.css" type="text/css">
<link rel="stylesheet" id="yarppWidgetCss-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/widget.css" type="text/css" media="all">
<link rel="stylesheet" id="dwqa-style-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/style_002.css" type="text/css" media="all">
<link rel="stylesheet" id="dwqa-rtl-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rtl.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-postratings-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/postratings-css.css" type="text/css" media="all">
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jquery.js"></script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jquery-migrate.js"></script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/wpfp.js"></script>
<link rel="https://api.w.org/" href="http://ifeve.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://ifeve.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://ifeve.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="任务取消(Cancellation)" href="http://ifeve.com/cancellation/">
<link rel="next" title="哪个对象才是锁？" href="http://ifeve.com/who-is-lock/">
<meta name="generator" content="WordPress 4.8">
<link rel="canonical" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a_007.html">
<link rel="shortlink" href="http://ifeve.com/?p=2167">
<link rel="alternate" type="application/json+oembed" href="http://ifeve.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">
<link rel="alternate" type="text/xml+oembed" href="http://ifeve.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F&amp;format=xml">

<!-- StarBox - the Author Box for Humans 3.0.6, visit: http://wordpress.org/plugins/starbox/ -->
<!-- /StarBox - the Author Box for Humans -->

<link rel="stylesheet" id="frontend.css-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/frontend.css" type="text/css" media="all">
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/frontend.js"></script>
<link rel="stylesheet" id="hidedefault.css-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/hidedefault.css" type="text/css" media="all">
<style type="text/css" media="screen">#wp-admin-bar-user-info .avatar-64 {width:64px}</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css" id="syntaxhighlighteranchor"></style>

<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jscript.js"></script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/comment.js"></script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rollover.js"></script>

<!--[if IE 7]>
<link rel="stylesheet" href="http://ifeve.com/wp-content/themes/flat/ie7.css" type="text/css" />
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" href="http://ifeve.com/wp-content/themes/flat/ie8.css" type="text/css" />
<![endif]-->


<style type="text/css">
a, .post .title a:hover, .post_meta a:hover, #bread_crumb ul li a:hover, #previous_post a:hover, #next_post a:hover, .post a.more-link:hover, #right_col li a:hover, #copyright li a:hover, #archive_headline #keyword,
   #comments_wrapper a:hover, #comment_header_right .comment_switch_active a, #comment_header_right .comment_switch_active a:hover, #comment_pager .current
   { color:#00A19E; }

#no_post a.back:hover, #wp-calendar td a:hover, #wp-calendar #prev a:hover, #wp-calendar #next a:hover, .page_navi a:hover, #submit_comment:hover
 { background-color:#00A19E; }

#guest_info input:focus, #comment_textarea textarea:focus
 { border:1px solid #00A19E; }

a:hover
 { color:#BDC900; }

body { font-size:14px; }

#header { background:url(http://ifeve.com/wp-content/uploads/flat/bg.png) left top; }
.logo_text a { color:#F5F5F5; }
#site_description {  border-top:1px solid #BBBBBB; color:#D2D9CC; }


</style>

</head>

<body><link href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jiathis_counter.css" rel="stylesheet" type="text/css"><link href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jiathis_share.css" rel="stylesheet" type="text/css"><iframe style="position: fixed; display: none; opacity: 0;" frameborder="0"></iframe><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; top: 50%; left: 50%; overflow: auto;"></div><div class="jiathis_style" style="position: absolute; z-index: 1000000000; display: none; overflow: auto;"></div><iframe style="display: none;" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jiathis_utility.html" frameborder="0"></iframe>

 <div id="header">
  <div class="header_menu">
    <ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95" class="menu"><li id="menu-item-16594" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-16594"><a href="http://ifeve.com/">首页</a></li>
<li id="menu-item-3432" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3432"><a href="http://ifeve.com/wp-login.php">登录</a></li>
<li id="menu-item-9219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-9219 parent_menu"><a href="http://ifeve.com/category/java/">JAVA</a>
<ul class="sub-menu">
	<li id="menu-item-16108" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16108"><a href="http://ifeve.com/java-io/">Java IO 教程</a></li>
	<li id="menu-item-5283" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5283"><a href="http://ifeve.com/java-nio-all/">Java NIO 教程</a></li>
	<li id="menu-item-17514" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17514"><a href="http://ifeve.com/java-reflection/">JAVA Reflection教程</a></li>
	<li id="menu-item-16239" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-16239"><a href="http://ifeve.com/java-network">Java 网络教程</a></li>
	<li id="menu-item-4416" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4416"><a href="http://ifeve.com/java-concurrency-thread-directory/">Java并发和多线程</a></li>
	<li id="menu-item-2767" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2767"><a href="http://ifeve.com/jmm-cookbook/">Java内存模型指南</a></li>
	<li id="menu-item-2747" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2747"><a href="http://ifeve.com/jmm-faq/">Java内存模型FAQ</a></li>
	<li id="menu-item-2765" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2765"><a href="http://ifeve.com/syn-jmm/">同步与Java内存模型</a></li>
	<li id="menu-item-5789" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5789"><a href="http://ifeve.com/oracle-java-concurrency-tutorial/">Oracle官方并发教程</a></li>
	<li id="menu-item-15316" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15316"><a href="http://ifeve.com/jvm-optimize/">JVM性能优化系列</a></li>
	<li id="menu-item-15313" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15313"><a href="http://ifeve.com/useful-jvm-flags/">JVM实用参数系列</a></li>
</ul>
</li>
<li id="menu-item-7938" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7938"><a href="http://ifeve.com/category/c/">C++</a></li>
<li id="menu-item-9220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-9220 parent_menu"><a href="http://ifeve.com/category/framework/">Framework</a>
<ul class="sub-menu">
	<li id="menu-item-12798" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12798"><a href="http://ifeve.com/disruptor/">Disruptor 框架指南</a></li>
	<li id="menu-item-12783" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-12783"><a title="Netty" href="http://ifeve.com/category/netty/">Netty</a></li>
	<li id="menu-item-12791" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-12791"><a href="http://ifeve.com/category/scala/">Scala</a></li>
	<li id="menu-item-12312" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12312"><a href="http://ifeve.com/getting-started-with-stom-index/">Storm 入门</a></li>
	<li id="menu-item-9218" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9218"><a href="http://ifeve.com/google-guava/">Guava 官方指南</a></li>
	<li id="menu-item-20471" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20471"><a href="http://ifeve.com/velocity-guide/">Apache Velocity 官方指南</a></li>
	<li id="menu-item-21439" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-21439"><a href="http://ifeve.com/storm-translation/">Apache Storm 官方文档</a></li>
</ul>
</li>
<li id="menu-item-555" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-555 parent_menu"><a href="http://ifeve.com/category/concurrency-translation/">其他译文</a>
<ul class="sub-menu">
	<li id="menu-item-2777" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2777"><a href="http://ifeve.com/java-concurrent/">并发基础</a></li>
	<li id="menu-item-3340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3340"><a href="http://ifeve.com/aqs/">j.u.c同步框架</a></li>
	<li id="menu-item-2769" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2769"><a href="http://ifeve.com/fj/">Fork Join框架</a></li>
	<li id="menu-item-9221" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9221"><a href="http://ifeve.com/doug-lea/">Doug Lea 论文</a></li>
	<li id="menu-item-4643" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4643"><a href="http://ifeve.com/mechanical-sympathy/">Mechanical Sympathy</a></li>
	<li id="menu-item-6397" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6397"><a href="http://ifeve.com/stm/">软件事务内存导论</a></li>
	<li id="menu-item-10845" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10845"><a href="http://ifeve.com/jsr133-cn/">JSR133中文版</a></li>
</ul>
</li>
<li id="menu-item-103" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-103 parent_menu"><a href="http://ifeve.com/category/talk-concurrent/">本站原创</a>
<ul class="sub-menu">
	<li id="menu-item-2763" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2763"><a href="http://ifeve.com/talk-concurrency/">聊聊并发</a></li>
	<li id="menu-item-2753" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2753"><a href="http://ifeve.com/java-memory-model-0/">深入理解Java内存模型</a></li>
	<li id="menu-item-4862" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4862"><a href="http://ifeve.com/from-javaeye-sys-struct/">从Java视角理解系统结构</a></li>
	<li id="menu-item-4627" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4627"><a href="http://ifeve.com/ali-itu-agile/">阿里内贸团队敏捷实践</a></li>
</ul>
</li>
<li id="menu-item-7119" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-7119 parent_menu"><a href="http://ifeve.com/category/%e5%b9%b6%e5%8f%91%e4%b9%a6%e7%b1%8d/">并发书籍</a>
<ul class="sub-menu">
	<li id="menu-item-10846" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10846"><a href="http://ifeve.com/art-of-java-concurrent-program/">《Java 并发编程的艺术》迷你书</a></li>
	<li id="menu-item-6042" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6042"><a href="http://ifeve.com/perfbook/">《深入理解并行编程》</a></li>
	<li id="menu-item-9172" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9172"><a href="http://ifeve.com/c-plus-plus-concurrency-in-action/">《C++ 并发编程》</a></li>
	<li id="menu-item-7785" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7785"><a href="http://ifeve.com/java-7-concurrency-cookbook/">《Java 7 并发编程指南》</a></li>
	<li id="menu-item-7120" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7120"><a href="http://ifeve.com/jvm-concurrency">《Java 虚拟机并发编程》</a></li>
	<li id="menu-item-12360" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12360"><a href="http://ifeve.com/getting-started-with-stom-index/">《Storm入门》中文版</a></li>
</ul>
</li>
<li id="menu-item-17079" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17079"><a href="http://ifeve.com/questions/">面试题</a></li>
<li id="menu-item-22180" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-22180"><a href="http://ifeve.com/my-favorite/">我的收藏</a></li>
<li id="menu-item-9171" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-9171 parent_menu"><a href="http://ifeve.com/need-you/">加入我们</a>
<ul class="sub-menu">
	<li id="menu-item-3246" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3246"><a href="http://ifeve.com/contribute/">我要投稿</a></li>
	<li id="menu-item-6854" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6854"><a href="http://ifeve.com/neitui/">内推阿里</a></li>
</ul>
</li>
<li id="menu-item-105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-105 parent_menu"><a href="http://ifeve.com/about-site/">关于本站</a>
<ul class="sub-menu">
	<li id="menu-item-11306" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11306"><a href="http://ifeve.com/category/%e6%b4%bb%e5%8a%a8/">活动</a></li>
	<li id="menu-item-1487" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1487"><a href="http://ifeve.com/sitemap.html">文章归档</a></li>
	<li id="menu-item-29361" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29361"><a href="http://ifeve.com/author/">本站作者</a></li>
	<li id="menu-item-131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-131"><a href="http://ifeve.com/about-site/about-me/">关于清英</a></li>
	<li id="menu-item-7600" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7600"><a href="http://ifeve.com/ads/">广告合作</a></li>
</ul>
</li>
</ul>    </div>
  <!-- logo -->
  <h1 class="logo_text"><a href="http://ifeve.com/">并发编程网 - ifeve.com</a></h1>
<h2 id="site_description">让天下没有难学的技术</h2>
 </div>

 <div id="main_content" class="clearfix">

  <div id="left_col">
      <div id="bread_crumb">
    <ul class="clearfix">
     <li id="bc_home"><a href="http://ifeve.com/" title="HOME">HOME</a></li>
     <li id="bc_cat"><a href="http://ifeve.com/category/talk-concurrent/">本站原创</a></li>     <li class="last">深入理解Java内存模型（一）——基础</li>
    </ul>
   </div>
   
   
   <div class="post_wrap clearfix" id="single">
    <div class="post">
     <h3 class="title"><span>深入理解Java内存模型（一）——基础</span></h3>
     <div class="post_content">
      <p>本文属于作者原创，原文发表于InfoQ：<a href="http://www.infoq.com/cn/articles/java-memory-model-1" target="_blank">http://www.infoq.com/cn/articles/java-memory-model-1</a></p>
<h1>并发编程模型的分类</h1>
<p>在并发编程中，我们需要处理两个关键问题：线程之间如何通信及线程之间如何同步（这里的线程是指并发执行的活动实体）。通信是指线程之间以何种机制来交换信息。在命令式编程中，线程之间的通信机制有两种：共享内存和消息传递。<br>
在共享内存的并发模型里，线程之间共享程序的公共状态，线程之间通过写-读内存中的公共状态来隐式进行通信。在消息传递的并发模型里，线程之间没有公共状态，线程之间必须通过明确的发送消息来显式进行通信。<br>
同步是指程序用于控制不同线程之间操作发生相对顺序的机制。在共享内存并发模型里，同步是显式进行的。程序员必须显式指定某个方法或某段代码需要在线程之间互斥执行。在消息传递的并发模型里，由于消息的发送必须在消息的接收之前，因此同步是隐式进行的。<br>
Java的并发采用的是共享内存模型，Java线程之间的通信总是隐式进行，整个通信过程对程序员完全透明。如果编写多线程程序的Java程序员不理解隐式进行的线程之间通信的工作机制，很可能会遇到各种奇怪的内存可见性问题。<br>
<span id="more-2167"></span></p>
<h1>Java内存模型的抽象</h1>
<p>在java中，所有实例域、静态域和数组元素存储在堆内存中，堆内存在线程之间共享（本文使用“共享变量”这个术语代指实例域，静态域和数组元
素）。局部变量（Local variables），方法定义参数（java语言规范称之为formal method 
parameters）和异常处理器参数（exception handler 
parameters）不会在线程之间共享，它们不会有内存可见性问题，也不受内存模型的影响。<br>
Java线程之间的通信由Java内存模型（本文简称为JMM）控制，JMM决定一个线程对共享变量的写入何时对另一个线程可见。从抽象的角度来
看，JMM定义了线程和主内存之间的抽象关系：线程之间的共享变量存储在主内存（main 
memory）中，每个线程都有一个私有的本地内存（local 
memory），本地内存中存储了该线程以读/写共享变量的副本。本地内存是JMM的一个抽象概念，并不真实存在。它涵盖了缓存，写缓冲区，寄存器以及其
他的硬件和编译器优化。Java内存模型的抽象示意图如下：<br>
<a href="http://ifeve.com/wp-content/uploads/2013/01/113.png"><img class="alignnone size-full wp-image-2273" alt="" src="1-基础/113.png"" srcset="http://ifeve.com/wp-content/uploads/2013/01/113.png 423w, http://ifeve.com/wp-content/uploads/2013/01/113-300x267.png 300w" sizes="(max-width: 423px) 100vw, 423px" height="377" width="423"></a><br>
从上图来看，线程A与线程B之间如要通信的话，必须要经历下面2个步骤：<br>
1. 首先，线程A把本地内存A中更新过的共享变量刷新到主内存中去。<br>
2. 然后，线程B到主内存中去读取线程A之前已更新过的共享变量。<br>
下面通过示意图来说明这两个步骤：<br>
<a href="http://ifeve.com/wp-content/uploads/2013/01/221.png"><img class="alignnone size-full wp-image-2275" alt="" src="1-基础/221.png"" srcset="http://ifeve.com/wp-content/uploads/2013/01/221.png 440w, http://ifeve.com/wp-content/uploads/2013/01/221-300x227.png 300w" sizes="(max-width: 440px) 100vw, 440px" height="334" width="440"></a><br>
如上图所示，本地内存A和B有主内存中共享变量x的副本。假设初始时，这三个内存中的x值都为0。线程A在执行时，把更新后的x值（假设值为1）临时存放
在自己的本地内存A中。当线程A和线程B需要通信时，线程A首先会把自己本地内存中修改后的x值刷新到主内存中，此时主内存中的x值变为了1。随后，线程
B到主内存中去读取线程A更新后的x值，此时线程B的本地内存的x值也变为了1。<br>
从整体来看，这两个步骤实质上是线程A在向线程B发送消息，而且这个通信过程必须要经过主内存。JMM通过控制主内存与每个线程的本地内存之间的交互，来为java程序员提供内存可见性保证。</p>
<h1>重排序</h1>
<p>在执行程序时为了提高性能，编译器和处理器常常会对指令做重排序。重排序分三种类型：<br>
1. 编译器优化的重排序。编译器在不改变单线程程序语义的前提下，可以重新安排语句的执行顺序。<br>
2. 指令级并行的重排序。现代处理器采用了指令级并行技术（Instruction-Level Parallelism， ILP）来将多条指令重叠执行。如果不存在数据依赖性，处理器可以改变语句对应机器指令的执行顺序。<br>
3. 内存系统的重排序。由于处理器使用缓存和读/写缓冲区，这使得加载和存储操作看上去可能是在乱序执行。<br>
从java源代码到最终实际执行的指令序列，会分别经历下面三种重排序：<br>
<a href="http://ifeve.com/wp-content/uploads/2013/01/331.png"><img class="alignnone size-full wp-image-2277" alt="" src="1-基础/331.png"" srcset="http://ifeve.com/wp-content/uploads/2013/01/331.png 529w, http://ifeve.com/wp-content/uploads/2013/01/331-300x43.png 300w" sizes="(max-width: 529px) 100vw, 529px" height="76" width="529"></a><br>
上述的1属于编译器重排序，2和3属于处理器重排序。这些重排序都可能会导致多线程程序出现内存可见性问题。对于编译器，JMM的编译器重排序规则会禁止
特定类型的编译器重排序（不是所有的编译器重排序都要禁止）。对于处理器重排序，JMM的处理器重排序规则会要求java编译器在生成指令序列时，插入特
定类型的内存屏障（memory barriers，intel称之为memory 
fence）指令，通过内存屏障指令来禁止特定类型的处理器重排序（不是所有的处理器重排序都要禁止）。<br>
JMM属于语言级的内存模型，它确保在不同的编译器和不同的处理器平台之上，通过禁止特定类型的编译器重排序和处理器重排序，为程序员提供一致的内存可见性保证。</p>
<h1>处理器重排序与内存屏障指令</h1>
<p>现代的处理器使用写缓冲区来临时保存向内存写入的数据。写缓冲区可以保证指令流水线持续运行，它可以避免由于处理器停顿下来等待向内存写入数据而产
生的延迟。同时，通过以批处理的方式刷新写缓冲区，以及合并写缓冲区中对同一内存地址的多次写，可以减少对内存总线的占用。虽然写缓冲区有这么多好处，但
每个处理器上的写缓冲区，仅仅对它所在的处理器可见。这个特性会对内存操作的执行顺序产生重要的影响：处理器对内存的读/写操作的执行顺序，不一定与内存
实际发生的读/写操作顺序一致！为了具体说明，请看下面示例：</p>
<table border="1" width="500">
<tbody>
<tr>
<th>Processor A</th>
<th>Processor B</th>
</tr>
<tr>
<td>a = 1; //A1<br>
x = b; //A2</td>
<td>b = 2; //B1<br>
y = a; //B2</td>
</tr>
<tr>
<td colspan="2">初始状态：a = b = 0<br>
处理器允许执行后得到结果：x = y = 0</td>
</tr>
</tbody>
</table>
<p>假设处理器A和处理器B按程序的顺序并行执行内存访问，最终却可能得到x = y = 0的结果。具体的原因如下图所示：<br>
<a href="http://ifeve.com/wp-content/uploads/2013/01/441.png"><img class="alignnone size-full wp-image-2279" alt="" src="1-基础/441.png"" srcset="http://ifeve.com/wp-content/uploads/2013/01/441.png 412w, http://ifeve.com/wp-content/uploads/2013/01/441-300x220.png 300w" sizes="(max-width: 412px) 100vw, 412px" height="303" width="412"></a><br>
这里处理器A和处理器B可以同时把共享变量写入自己的写缓冲区（A1，B1），然后从内存中读取另一个共享变量（A2，B2），最后才把自己写缓存区中保存的脏数据刷新到内存中（A3，B3）。当以这种时序执行时，程序就可以得到x = y = 0的结果。<br>
从内存操作实际发生的顺序来看，直到处理器A执行A3来刷新自己的写缓存区，写操作A1才算真正执行了。虽然处理器A执行内存操作的顺序
为：A1-&gt;A2，但内存操作实际发生的顺序却是：A2-&gt;A1。此时，处理器A的内存操作顺序被重排序了（处理器B的情况和处理器A一样，
这里就不赘述了）。<br>
这里的关键是，由于写缓冲区仅对自己的处理器可见，它会导致处理器执行内存操作的顺序可能会与内存实际的操作执行顺序不一致。由于现代的处理器都会使用写缓冲区，因此现代的处理器都会允许对写-读操作重排序。<br>
下面是常见处理器允许的重排序类型的列表：</p>
<table style="width: 514px;height: 127px" border="1" width="514">
<tbody>
<tr>
<td>&nbsp;</td>
<td>Load-Load</td>
<td>Load-Store</td>
<td>Store-Store</td>
<td>Store-Load</td>
<td>数据依赖</td>
</tr>
<tr>
<td>sparc-TSO</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>x86</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>ia64</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>PowerPC</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>上表单元格中的“N”表示处理器不允许两个操作重排序，“Y”表示允许重排序。<br>
从上表我们可以看出：常见的处理器都允许Store-Load重排序；常见的处理器都不允许对存在数据依赖的操作做重排序。sparc-TSO和x86拥有相对较强的处理器内存模型，它们仅允许对写-读操作做重排序（因为它们都使用了写缓冲区）。<br>
※注1：sparc-TSO是指以TSO(Total Store Order)内存模型运行时，sparc处理器的特性。<br>
※注2：上表中的x86包括x64及AMD64。<br>
※注3：由于ARM处理器的内存模型与PowerPC处理器的内存模型非常类似，本文将忽略它。<br>
※注4：数据依赖性后文会专门说明。</p>
<p>为了保证内存可见性，java编译器在生成指令序列的适当位置会插入内存屏障指令来禁止特定类型的处理器重排序。JMM把内存屏障指令分为下列四类：</p>
<table style="width: 519px;height: 298px" border="1" width="519">
<tbody>
<tr>
<td>屏障类型</td>
<td>指令示例</td>
<td>说明</td>
</tr>
<tr>
<td>LoadLoad Barriers</td>
<td>Load1; LoadLoad; Load2</td>
<td>确保Load1数据的装载，之前于Load2及所有后续装载指令的装载。</td>
</tr>
<tr>
<td>StoreStore Barriers</td>
<td>Store1; StoreStore; Store2</td>
<td>确保Store1数据对其他处理器可见（刷新到内存），之前于Store2及所有后续存储指令的存储。</td>
</tr>
<tr>
<td>LoadStore Barriers</td>
<td>Load1; LoadStore; Store2</td>
<td>确保Load1数据装载，之前于Store2及所有后续的存储指令刷新到内存。</td>
</tr>
<tr>
<td>StoreLoad Barriers</td>
<td>Store1; StoreLoad; Load2</td>
<td>确保Store1数据对其他处理器变得可见（指刷新到内存），之前于Load2及所有后续装载指令的装载。StoreLoad Barriers会使该屏障之前的所有内存访问指令（存储和装载指令）完成之后，才执行该屏障之后的内存访问指令。</td>
</tr>
</tbody>
</table>
<p>StoreLoad 
Barriers是一个“全能型”的屏障，它同时具有其他三个屏障的效果。现代的多处理器大都支持该屏障（其他类型的屏障不一定被所有处理器支持）。执行
该屏障开销会很昂贵，因为当前处理器通常要把写缓冲区中的数据全部刷新到内存中（buffer fully flush）。</p>
<h1>happens-before</h1>
<p>从JDK5开始，java使用新的JSR -133内存模型（本文除非特别说明，针对的都是JSR- 
133内存模型）。JSR-133使用happens-before的概念来阐述操作之间的内存可见性。在JMM中，如果一个操作执行的结果需要对另一个
操作可见，那么这两个操作之间必须要存在happens-before关系。这里提到的两个操作既可以是在一个线程之内，也可以是在不同线程之间。<br>
与程序员密切相关的happens-before规则如下：</p>
<ul>
<li>程序顺序规则：一个线程中的每个操作，happens- before 于该线程中的任意后续操作。</li>
<li>监视器锁规则：对一个监视器锁的解锁，happens- before 于随后对这个监视器锁的加锁。</li>
<li>volatile变量规则：对一个volatile域的写，happens- before 于任意后续对这个volatile域的读。</li>
<li>传递性：如果A happens- before B，且B happens- before C，那么A happens- before C。</li>
</ul>
<p>注意，两个操作之间具有happens-before关系，并不意味着前一个操作必须要在后一个操作之前执行！happens-before仅仅要
求前一个操作（执行的结果）对后一个操作可见，且前一个操作按顺序排在第二个操作之前（the first is visible to and 
ordered before the second）。happens- 
before的定义很微妙，后文会具体说明happens-before为什么要这么定义。<br>
happens-before与JMM的关系如下图所示：</p>
<p>&nbsp;<a href="http://ifeve.com/wp-content/uploads/2013/01/552.png"><img class="alignnone size-full wp-image-2281" alt="" src="1-基础/552.png"" srcset="http://ifeve.com/wp-content/uploads/2013/01/552.png 511w, http://ifeve.com/wp-content/uploads/2013/01/552-300x232.png 300w" sizes="(max-width: 511px) 100vw, 511px" height="396" width="511"></a><br>
如上图所示，一个happens-before规则通常对应于多个编译器和处理器重排序规则。对于java程序员来说，happens-before规则简单易懂，它避免java程序员为了理解JMM提供的内存可见性保证而去学习复杂的重排序规则以及这些规则的具体实现。</p>
<h1>参考文献</h1>
<ol>
<li><a href="http://www.amazon.com/Programming-Language-Pragmatics-Third-Michael/dp/0123745144/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1347794595&amp;sr=1-1&amp;keywords=Michael+L.Scott">Programming Language Pragmatics, Third Edition</a></li>
<li><a href="http://docs.oracle.com/javase/specs/jls/se5.0/jls3.pdf">The Java Language Specification, Third Edition</a></li>
<li><a href="http://www.cs.umd.edu/%7Epugh/java/memoryModel/jsr133.pdf">JSR-133: Java Memory Model and Thread Specification</a></li>
<li><a href="http://www.ibm.com/developerworks/java/library/j-jtp03304/index.html">Java theory and practice: Fixing the Java Memory Model, Part 2</a></li>
<li><a href="http://www.cl.cam.ac.uk/%7Epes20/ppc-supplemental/pldi105-sarkar.pdf">Understanding POWER Multiprocessors</a></li>
<li><a href="http://www.amazon.com/Concurrent-Programming-Windows-Joe-Duffy/dp/032143482X/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1262571776&amp;sr=1-1">Concurrent Programming on Windows</a></li>
<li><a href="http://www.amazon.com/Art-Multiprocessor-Programming-Maurice-Herlihy/dp/0123705916/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1248834374&amp;sr=1-1">The Art of Multiprocessor Programming</a></li>
<li><a href="http://download.intel.com/products/processor/manual/253668.pdf">Intel® 64 and IA-32 ArchitecturesvSoftware Developer’s Manual Volume 3A: System Programming Guide, Part 1</a></li>
<li><a href="http://gee.cs.oswego.edu/dl/jmm/cookbook.html">The JSR-133 Cookbook for Compiler Writers</a></li>
</ol>
<h1>关于作者</h1>
<p><strong>程晓明</strong>，Java软件工程师，国家认证的系统分析师、信息项目管理师。专注于并发编程。个人邮箱：<a href="mailto:asst2003@163.com">asst2003@163.com</a>。</p>
<hr>
<div style="margin-top: 15px; font-style: italic">
<p><strong>原创文章，转载请注明：</strong> 转载自<a href="http://ifeve.com/">并发编程网 – ifeve.com</a><strong>本文链接地址:</strong> <a href="http://ifeve.com/java-memory-model-1/">深入理解Java内存模型（一）——基础</a></p>
<p> <a href="http://pro.badouxueyuan.cn/ifeve/"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/IMG_2351.jpg"></a>
</p></div>
<div style="clear:both; margin-top:5px; margin-bottom:5px;"></div><div style="float:left"><!-- JiaThis Button BEGIN -->
<div id="jiathis_style_32x32">
	<a class="jiathis_button_qzone" title="分享到QQ空间"><span class="jiathis_txt jtico jtico_qzone"></span></a>
	<a class="jiathis_button_tsina" title="分享到微博"><span class="jiathis_txt jtico jtico_tsina"></span></a>
	<a class="jiathis_button_tqq" title="分享到腾讯微博"><span class="jiathis_txt jtico jtico_tqq"></span></a>
	<a class="jiathis_button_renren" title="分享到人人网"><span class="jiathis_txt jtico jtico_renren"></span></a>
	<a class="jiathis_button_kaixin001" title="分享到开心网"><span class="jiathis_txt jtico jtico_kaixin001"></span></a>
	<a href="http://www.jiathis.com/share/" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"><span class="jiathis_button_expanded jiathis_counter jiathis_bubble_style" id="jiathis_counter_83" title="累计分享25次">25</span></a>
</div>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jia.js" charset="utf-8"></script><script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/plugin.js" charset="utf-8"></script>
<!-- JiaThis Button END --></div><div style="clear:both; margin-top:5px; margin-bottom:5px;"></div>
                         <div class="abh_box abh_box_down abh_box_"><ul class="abh_tabs"> <li class="abh_about abh_active"><a href="#abh_about">About</a></li> <li class="abh_posts"><a href="#abh_posts">Latest Posts</a></li></ul><div class="abh_tab_content"><section class="vcard abh_about_tab abh_tab" style="display:block"><div class="abh_image"><a href="http://ifeve.com/author/25622818/" class="url" title="程晓明"><img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/100.jpg" class="avatar avatar-80" height="80" width="80"></a></div><div class="abh_social"> </div><div class="abh_text"><h3 class="fn name"><a href="http://ifeve.com/author/25622818/" class="url">程晓明</a></h3><div class="abh_job"></div><div class="description note abh_description">程晓明，Java软件工程师，专注于并发编程，就职于富士通南大。个人邮箱：asst2003@163.com。</div></div> </section><section class="abh_posts_tab abh_tab"><div class="abh_image"><a href="http://ifeve.com/author/25622818/" class="url" title="程晓明"><img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/100.jpg" class="avatar avatar-80" height="80" width="80"></a></div><div class="abh_social"> </div><div class="abh_text"><h4>Latest posts by 程晓明 <span class="abh_allposts">(<a href="http://ifeve.com/author/25622818/">see all</a>)</span></h4><div class="abh_description note"><ul>				<li>					<a href="http://ifeve.com/double-checked-locking-with-delay-initialization/">双重检查锁定与延迟初始化</a><span> - 2013年10月10日</span>				</li>				<li>					<a href="http://ifeve.com/java-memory-model-7/">深入理解Java内存模型（七）——总结</a><span> - 2013年3月16日</span>				</li>				<li>					<a href="http://ifeve.com/java-memory-model/">深入理解Java内存模型（六）——final</a><span> - 2013年3月10日</span>				</li></ul></div></div> </section></div> </div><span class="wpfp-span"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/star.png" alt="Favorite" title="Favorite" class="wpfp-img"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/loading.gif" alt="Loading" title="Loading" class="wpfp-hide wpfp-img"><a class="wpfp-link" href="http://ifeve.com/java-memory-model-1/?wpfpaction=add&amp;postid=2167" title="添加本文到我的收藏" rel="nofollow">添加本文到我的收藏</a></span><div class="yarpp-related">
<h3>Related posts:</h3><ol>
<li><a href="http://ifeve.com/java-memory-model-7/" rel="bookmark" title="深入理解Java内存模型（七）——总结">深入理解Java内存模型（七）——总结 </a></li>
<li><a href="http://ifeve.com/java-memory-model-2/" rel="bookmark" title="深入理解Java内存模型（二）——重排序">深入理解Java内存模型（二）——重排序 </a></li>
<li><a href="http://ifeve.com/java-memory-model-5/" rel="bookmark" title="深入理解Java内存模型（五）——锁">深入理解Java内存模型（五）——锁 </a></li>
<li><a href="http://ifeve.com/java-memory-model-3/" rel="bookmark" title="深入理解Java内存模型（三）——顺序一致性">深入理解Java内存模型（三）——顺序一致性 </a></li>
<li><a href="http://ifeve.com/java-memory-model-4/" rel="bookmark" title="深入理解Java内存模型（四）——volatile">深入理解Java内存模型（四）——volatile </a></li>
<li><a href="http://ifeve.com/java-memory-model/" rel="bookmark" title="深入理解Java内存模型（六）——final">深入理解Java内存模型（六）——final </a></li>
<li><a href="http://ifeve.com/java-memory-model-0/" rel="bookmark" title="深入理解java内存模型系列文章">深入理解java内存模型系列文章 </a></li>
<li><a href="http://ifeve.com/jmm-cookbook-mb/" rel="bookmark" title="Java内存模型Cookbook（二）内存屏障">Java内存模型Cookbook（二）内存屏障 </a></li>
<li><a href="http://ifeve.com/memory-barriersfences/" rel="bookmark" title="Memory Barriers/Fences">Memory Barriers/Fences </a></li>
<li><a href="http://ifeve.com/jmm-cookbook-mps/" rel="bookmark" title="Java内存模型Cookbook(三)多处理器">Java内存模型Cookbook(三)多处理器 </a></li>
<li><a href="http://ifeve.com/cookbook-recipes/" rel="bookmark" title="Java内存模型Cookbook（四）指南(Recipes)">Java内存模型Cookbook（四）指南(Recipes) </a></li>
<li><a href="http://ifeve.com/how-to-use-volatile/" rel="bookmark" title="Java并发中正确使用volatile">Java并发中正确使用volatile </a></li>
<li><a href="http://ifeve.com/talk-to-my-understanding-of-the-java-memory-model/" rel="bookmark" title="聊聊我对Java内存模型的理解">聊聊我对Java内存模型的理解 </a></li>
<li><a href="http://ifeve.com/jsr133/" rel="bookmark" title="Java内存模型FAQ（三）JSR133是什么？">Java内存模型FAQ（三）JSR133是什么？ </a></li>
<li><a href="http://ifeve.com/paper-set/" rel="bookmark" title="并发网系列文章集">并发网系列文章集 </a></li>
</ol>
</div>
           </div><!-- END .post_content -->
    </div>
    <div class="meta">
          <ul>
      <li class="post_date clearfix">
       <span class="date">24</span>
       <span class="month">Jan</span>
       <span class="year">2013</span>
      </li>
      
<li class="post_comment">
47,704 人阅读</li>

      <li class="post_author"><a href="http://ifeve.com/author/25622818/" title="Posts by 程晓明" rel="author">程晓明</a></li>      <li class="post_category"><a href="http://ifeve.com/category/talk-concurrent/" rel="category tag">本站原创</a></li>       <li class="post_category"><div id="post-ratings-2167" class="post-ratings" itemscope="" itemtype="http://schema.org/Article" data-nonce="a0dbc8ef81"><img id="rating_2167_1" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="current_rating(2167, 1, '好烂啊');" onmouseout="ratings_off(4.7, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_2167_2" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rating_on.gif" alt="没价值" title="没价值" onmouseover="current_rating(2167, 2, '没价值');" onmouseout="ratings_off(4.7, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_2167_3" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="current_rating(2167, 3, '凑合看看');" onmouseout="ratings_off(4.7, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_2167_4" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rating_on.gif" alt="还不错" title="还不错" onmouseover="current_rating(2167, 4, '还不错');" onmouseout="ratings_off(4.7, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"><img id="rating_2167_5" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/rating_half.gif" alt="超赞" title="超赞" onmouseover="current_rating(2167, 5, '超赞');" onmouseout="ratings_off(4.7, 5, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;"> (<strong>22</strong> votes, average: <strong>4.73</strong> out of 5)<br><span class="post-ratings-text" id="ratings_2167_text"></span><meta itemprop="headline" content="深入理解Java内存模型（一）——基础"><meta itemprop="description" content="本文属于作者原创，原文发表于InfoQ：http://www.infoq.com/cn/articles/java-memory-model-1
并发编程模型的分类
在并发编程中，我们需要处理两个关键问题：线程之间如何通信及线程之间如何同步（这里的线程是指并发执行的活动实体）。通信是指线程之间以何种机制来交换信息。在命令式编程中，线程之间的通信机制有两种：共享内存和消息传递。
在共享内存的并..."><meta itemprop="datePublished" content="2013-01-24T00:03:00+00:00"><meta itemprop="dateModified" content="2013-01-28T08:45:32+00:00"><meta itemprop="url" content="http://ifeve.com/java-memory-model-1/"><meta itemprop="author" content="程晓明"><meta itemprop="mainEntityOfPage" content="http://ifeve.com/java-memory-model-1/"><div style="display: none;" itemprop="publisher" itemscope="" itemtype="https://schema.org/Organization"><meta itemprop="name" content="并发编程网 - ifeve.com"><div itemprop="logo" itemscope="" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content=""></div></div><div style="display: none;" itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating"><meta itemprop="bestRating" content="5"><meta itemprop="worstRating" content="1"><meta itemprop="ratingValue" content="4.73"><meta itemprop="ratingCount" content="22"></div></div><div id="post-ratings-2167-loading" class="post-ratings-loading">
            <img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/loading_002.gif" class="post-ratings-image" height="16" width="16">Loading...</div></li>       <li class="post_comment"><a href="http://ifeve.com/java-memory-model-1/#comments">28 comments</a></li>           </ul>
         </div>
   </div><!-- END .post_wrap -->

   
      <div id="comments_wrapper">
    




<div id="comment_header" class="clearfix">

 <ul id="comment_header_left">
  <li id="add_comment"><a href="#respond">Write comment</a></li>
  <li id="comment_feed"><a href="http://ifeve.com/comments/feed/" title="Comments RSS">Comments RSS</a></li>
 </ul>

 <ul id="comment_header_right">
   <li id="trackback_closed">Trackback are closed</li>
   <li id="comment_closed">Comments (28)</li>
 </ul>


</div><!-- END #comment_header -->

<div id="comments">

 <div id="comment_area">
  <!-- start commnet -->
  <ol class="commentlist">
	
 <li class="comment guest-comment even_comment" id="comment-173">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/6b552991a41338e608a6aab63e35ccc1.jpg" srcset="http://0.gravatar.com/avatar/6b552991a41338e608a6aab63e35ccc1?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-173">

nicky
</span>
     </li>
     <li class="comment-date">01/28. 2013 3:25pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-173', 'comment-173', 'comment-content-173', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-173">
    <p>你好，作为一名刚入行的程序员来说，看你这篇文章其实挺吃力的，特别是重排序那块，整个文章读下来的感觉，线程之间的通信和svn的使用相
差不多，但是不知道，在2个线程之间发生 所谓的“冲突” 该如何处理，就像你描述在例子中 x=y=0的 
，你还是没有将如何操作才能得到我们所想要的结果呢，根据happens-before 这样的原则么，这个是不是和svn解决冲突是相类似的呢？</p>
  </div>



<ul class="children">

 <li class="comment admin-comment even_comment_children" id="comment-181">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/100.jpg" class="avatar avatar-35" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-181">

程晓明
</span>
     </li>
     <li class="comment-date">01/29. 2013 8:23am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-181', 'comment-181', 'comment-content-181', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-181">
    <p>您好，谢谢您的关注。<br>
在第二篇中专门讲了重排序，，这一篇已经在本站发布了。<br>
您说的“冲突”，在java内存模型中称之为“数据竞争”。<br>
对于多线程之间的数据竞争，只要我们正确使用同步原语（lock, volatile和final），那么java内存模型就会对有冲突的操作进行排序。这样就能得到我们想要的结果。第三篇会专门讲这个主题。</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-344">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/3ca86dfeb755d5f5b2c564d4efb7f093.png" srcset="http://0.gravatar.com/avatar/3ca86dfeb755d5f5b2c564d4efb7f093?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-344">

黑皮爷爷猪
</span>
     </li>
     <li class="comment-date">02/27. 2013 3:03pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-344', 'comment-344', 'comment-content-344', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-344">
    <p>您好，看了您很多并发方面的文章感觉受益很多。</p>
<p>在原来看并发时一直有一个疑问就是happens-before是谁来保证的呢？是我们在开发过程中需要注意的地方？还是JVM中的一些策略呢？也可以说是：是不是在开发中不需要关注happens-before原则呢？<br>
因为比如：程序顺序规则：一个线程中的每个操作，happens- before 于该线程中的任意后续操作。这种规则是我们在写代码的过程中是无法保证的，只能是JVM来保证。<br>
请问happens-before到底是JVM中的一种策略还是我们在编写代码中需要注意的地方？</p>
  </div>



<ul class="children">

 <li class="comment guest-comment odd_comment_children" id="comment-350">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a21e2b8f4893347e62eeca7597f04ebc.jpg" srcset="http://1.gravatar.com/avatar/a21e2b8f4893347e62eeca7597f04ebc?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<a id="commentauthor-350" class="url guest-url" href="http://ifeve.com/" rel="external nofollow">

方 腾飞
</a>
     </li>
     <li class="comment-date">02/27. 2013 5:38pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-350', 'comment-350', 'comment-content-350', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-350">
    <p>happens-before是我们在编写代码中需要注意的口诀。</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment admin-comment odd_comment_children" id="comment-354">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/100.jpg" class="avatar avatar-35" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-354">

程晓明
</span>
     </li>
     <li class="comment-date">02/28. 2013 12:38am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-354', 'comment-354', 'comment-content-354', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-354">
    <p>谢谢您的关注。</p>
<p>腾飞的回答很简洁，也很精辟。</p>
<p>–happens-before是谁来保证的呢？<br>
java内存模型通过限制编译器和处理器的重排序，来向程序员作出的内存可见性保证。</p>
<p>–程序顺序规则<br>
程序顺序规则有两个作用：<br>
1：java内存模型通过这个规则，可以向程序员保证：单线程内不会出现内存可见性问题（因为在程序顺序中的每个操作，都happens-before于它后面的操作）。<br>
2：程序顺序规则与其他规则组合后，可以提供“额外”的保证。<br>
比如在本文的第三章中的“volatile的写-读建立的happens 
before关系”这一节中，程序顺序规则与volatile规则及传递性规则三者组合后，可以保证：一个线程在写volatile变量之前可见的所有共
享变量，在接下来另一个线程读同一个volatile变量后，将立即变得对这个线程可见。</p>
<p>happens-before的主要作用在于：向程序员保证不同线程的操作之间的内存可见性。<br>
比如：假设A线程中有一个操作a，B线程中有一个操作b，如果a，b之间具有happens-before关系，那么java内存模型将向程序员保证：a操作的执行结果，b一定能看到。</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-9869">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/04637b376a1a4f462b3d56c73a107b71.jpg" srcset="http://0.gravatar.com/avatar/04637b376a1a4f462b3d56c73a107b71?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-9869">

草戊
</span>
     </li>
     <li class="comment-date">04/11. 2014 9:32am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-9869', 'comment-9869', 'comment-content-9869', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-9869">
    <p>恍然大悟啊。看《java并发编程实战》那本书中，最不能明白的就是JMM中 【程序顺序规则】，<br>
按照我的思维总觉得这个和指令重排序是矛盾的。看了这篇文章才明白。<br>
太感谢了。</p>
  </div>



<ul class="children">

 <li class="comment guest-comment odd_comment_children" id="comment-26967">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/e5e9d003cdf6c5873b358793c24678e1.jpg" srcset="http://2.gravatar.com/avatar/e5e9d003cdf6c5873b358793c24678e1?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26967">

ericzou
</span>
     </li>
     <li class="comment-date">06/08. 2016 11:44am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26967', 'comment-26967', 'comment-content-26967', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26967">
    <p>对这一块好像理解了，又好像没理解，看@草戊说理解了这块内容，@草戊,留个QQ或微信给我？想和你探讨一下</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-967">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/16b6a3995f98a244392797aa3b96f7c4.jpg" srcset="http://1.gravatar.com/avatar/16b6a3995f98a244392797aa3b96f7c4?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<a id="commentauthor-967" class="url guest-url" href="http://cnblogs.com/frydsh" rel="external nofollow">

frydsh
</a>
     </li>
     <li class="comment-date">04/20. 2013 1:41am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-967', 'comment-967', 'comment-content-967', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-967">
    <p>你好，看完之后豁然开朗。不过还是有两个疑问：<br>
1.两个操作之间具有happens-before关系，并不意味着前一个操作必须要在后一个操作之前执行！<br>
这句话是什么意思，感觉跟happen-before有冲突的样子，不是很理解。<br>
2.一个线程在写volatile变量之前可见的所有共享变量，在接下来另一个线程读同一个volatile变量后，将立即变得对这个线程可见。<br>
这个是volatile必然有的保障吗，JMM可以确保这个保障吗，还是一般实现支持它，但是JMM标准对它却没有定义？</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-971">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a.jpg" srcset="http://2.gravatar.com/avatar/?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo avatar-default" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-971">

程晓明
</span>
     </li>
     <li class="comment-date">04/20. 2013 8:01pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-971', 'comment-971', 'comment-content-971', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-971">
    <p>1：<br>
在《深入理解Java内存模型（二）——重排序》的“程序顺序规则”，和《深入理解Java内存模型（七）——总结》的“JMM的设计”中，对这个这个问题有说明，可以参考。<br>
java内存模型向程序员保证：如果A happens-before B，那么A操作的结果将对B可见，且A的执行顺序排在B之前。<br>
注意，这仅仅是java内存模型向程序员做出的保证！如果重排序A和B的执行顺序后，程序的结果不被改变，那么java内存模型就允许编译器和处理器对这两个操作重排序。<br>
这么做的原因是因为：程序员对于这两个操作是否真的被重排序并不关心，程序员关心的是程序执行时的语义不能被改变（即执行结果不能被改变）。<br>
因此，happens-before关系本质上和as-if-serial语义是一回事！<br>
as-if-serial语义保证单线程内程序的执行结果不被改变；<br>
happens-before关系保证正确同步的多线程程序的执行结果不被改变。<br>
as-if-serial语义给编写单线程程序的程序员创建了一个幻境：单线程程序是按程序的顺序来执行的。<br>
happens-before关系给编写正确同步的多线程程序的程序员创建了一个幻境：正确同步的多线程程序是按happens-before指定的顺序来执行的。<br>
as-if-serial语义和happens-before关系这么做的目的是为了尽可能的开发并行度。<br>
————————————<br>
2：<br>
从JDK5开始，这是volatile必然有的保障。<br>
这是JMM规范的要求，所有的java实现都必须支持它。</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-1046">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <a href="http://weibo.com/1958138821" rel="nofollow" target="_blank"><img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/1.jpg" class="avatar avatar-35" height="35" width="35"></a>  
    <ul class="comment-name-date">
     <li class="comment-name">
<a id="commentauthor-1046" class="url guest-url" href="http://blueswind8306.iteye.com/" rel="external nofollow">

高 嵩
</a>
     </li>
     <li class="comment-date">05/01. 2013 6:17pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1046', 'comment-1046', 'comment-content-1046', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-1046">
    <p>您好，请问一下，关于重排序的那个例子，我写了代码验证，在反复执行100w次的情况下，都没有出现x=y=0的结果，难道是因为很难出现这种情况吗？我的代码如下：<br>
public class TestReordering {</p>
<p>	private int a = 0;<br>
	private int b = 0;</p>
<p>	private class ThreadATask implements Runnable {<br>
		private int x;</p>
<p>		public void run() {<br>
			a = 1;	// A1<br>
			x = b;	// A2<br>
		}</p>
<p>		public int getX() {<br>
			return x;<br>
		}<br>
	}</p>
<p>	private class ThreadBTask implements Runnable {<br>
		private int y;</p>
<p>		public void run() {<br>
			b = 2;	// B1<br>
			y = a;	// B2<br>
		}</p>
<p>		public int getY() {<br>
			return y;<br>
		}<br>
	}</p>
<p>	public String doTest() throws InterruptedException {<br>
		ThreadATask taskA = new ThreadATask();<br>
		ThreadBTask taskB = new ThreadBTask();<br>
		Thread threadA = new Thread(taskA);<br>
		Thread threadB = new Thread(taskB);		</p>
<p>		threadA.start();<br>
		threadB.start();</p>
<p>		threadA.join();<br>
		threadB.join();</p>
<p>		return “x=” + taskA.getX() + “, y=” + taskB.getY();<br>
	}</p>
<p>	/**<br>
	 * @param args<br>
	 * @throws InterruptedException<br>
	 */<br>
	public static void main(String[] args) throws InterruptedException {<br>
		Map counter = new HashMap();</p>
<p>		for (int i = 0; i &lt; Integer.parseInt(args[0]); i++) {<br>
			TestReordering test = new TestReordering();<br>
			String result = test.doTest();</p>
<p>			Integer count = counter.get(result);<br>
			if (count == null) {<br>
				count = 0;<br>
			}<br>
			counter.put(result, count.intValue() + 1);<br>
		}</p>
<p>		for (String result : counter.keySet()) {<br>
			System.out.println(result + ", count=" + counter.get(result));<br>
		}<br>
	}</p>
<p>}</p>
  </div>



<ul class="children">

 <li class="comment guest-comment odd_comment_children" id="comment-1063">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a_003.jpg" srcset="http://0.gravatar.com/avatar/?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo avatar-default" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-1063">

程晓明
</span>
     </li>
     <li class="comment-date">05/04. 2013 4:32pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1063', 'comment-1063', 'comment-content-1063', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-1063">
    <p>你需要创造条件让两个线程尽可能的在同一时间点执行执行，才可能出现出现x=y=0的结果。<br>
我稍微修改了一下你的测试程序，在我的笔记本电脑上（intel core i5 2410），很快（迭代1万多次后）就会出现这个结果。<br>
启动JVM时，请设置为“-server”：在Eclipse中点击右键-&gt;Run Configurations-&gt;Arguments-&gt;VM Arguments</p>
<p>程序如下：<br>
import java.util.concurrent.BrokenBarrierException;<br>
import java.util.concurrent.Callable;<br>
import java.util.concurrent.CountDownLatch;<br>
import java.util.concurrent.ExecutionException;<br>
import java.util.concurrent.ExecutorService;<br>
import java.util.concurrent.Executors;<br>
import java.util.concurrent.Future;</p>
<p>public class ReorderTest1 {<br>
    private int a = 0;<br>
    private int b = 0;</p>
<p>    public static void main(String[] args) throws InterruptedException, ExecutionException {<br>
        ReorderTest1 rt = new ReorderTest1();<br>
        rt.doTest();<br>
    }</p>
<p>    public void doTest() throws InterruptedException, ExecutionException{<br>
        ExecutorService executor = Executors.newFixedThreadPool(2);</p>
<p>        for (int i = 1;  i &lt; 1000000; i++) {<br>
            CountDownLatch latch = new CountDownLatch(1);<br>
            Future futureA = executor.submit(new ThreadATask(latch));<br>
            Future futureB = executor.submit(new ThreadBTask(latch));<br>
            latch.countDown();<br>
            int x = futureB.get();<br>
            int y = futureA.get();<br>
            if (x == y) {<br>
                System.out.println(“x=” + x + ” : ” + “y=” +  y);<br>
                System.out.println(“reorder in ” + i);<br>
                return;<br>
            }</p>
<p>            //重置状态<br>
            a = 0;<br>
            b = 0;<br>
        }<br>
        //在此关闭线程池<br>
    }</p>
<p>    private class ThreadATask implements Callable {<br>
        private CountDownLatch barrier;</p>
<p>        public ThreadATask(CountDownLatch barrier) {<br>
            this.barrier = barrier;<br>
        }</p>
<p>        public Integer call() throws InterruptedException, BrokenBarrierException {<br>
            barrier.await();</p>
<p>            a = 1;    // A1<br>
            return b; // A2<br>
        }<br>
    }</p>
<p>    private class ThreadBTask implements Callable {<br>
        private CountDownLatch barrier;</p>
<p>        public ThreadBTask(CountDownLatch barrier) {<br>
            this.barrier = barrier;<br>
        }</p>
<p>        public Integer call() throws InterruptedException, BrokenBarrierException {<br>
            barrier.await();</p>
<p>            b = 2;    // B1<br>
            return a; // B2<br>
        }<br>
    }<br>
}</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-26644">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/bce7ab478a04ba9f0471a5ad696152a0.jpg" srcset="http://2.gravatar.com/avatar/bce7ab478a04ba9f0471a5ad696152a0?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26644">

veda
</span>
     </li>
     <li class="comment-date">01/22. 2016 12:34pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26644', 'comment-26644', 'comment-content-26644', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26644">
    <p>使用CountDownLatch做栅栏没错，只不过不应该在主线程里面countDown。因为可能在子线程await之前就已经countDown了，达不到栅栏的效果。<br>
但其实我试过了其他方法来使两个线程理论上达到“同时执行”的效果，都不行。总会存在某个线程在统计上压倒性的比另一个线程先执行，可能本身执行的指令就很少的缘故吧。不过确实存在指令重排序产生的两值都为零的情况。<br>
还有我也试了volatile的内存屏障效果，在A1和B1之后只要插入一条任意的的volatile变量写操作就能阻止指令重排序产生的两值都为零的情况。</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-1072">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <a href="http://weibo.com/1958138821" rel="nofollow" target="_blank"><img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/1.jpg" class="avatar avatar-35" height="35" width="35"></a>  
    <ul class="comment-name-date">
     <li class="comment-name">
<a id="commentauthor-1072" class="url guest-url" href="http://blueswind8306.iteye.com/" rel="external nofollow">

高 嵩
</a>
     </li>
     <li class="comment-date">05/07. 2013 1:07pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1072', 'comment-1072', 'comment-content-1072', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-1072">
    <p>恩，确实如此，多谢耐心解答！</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-3180">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/100_002.jpg" class="avatar avatar-35" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-3180">

俞傲一刀
</span>
     </li>
     <li class="comment-date">10/10. 2013 2:41pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-3180', 'comment-3180', 'comment-content-3180', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-3180">
    <p>文章中说的抽象的线程本地内存和线程存放局部变量的栈不是同一个吧？</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-8707">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a.jpg" srcset="http://1.gravatar.com/avatar/?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo avatar-default" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-8707">

nalanjia
</span>
     </li>
     <li class="comment-date">04/03. 2014 3:03pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-8707', 'comment-8707', 'comment-content-8707', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-8707">
    <p>偶丰富了一下上边提到的例子：<br>
package test034;</p>
<p>import java.util.concurrent.BrokenBarrierException;<br>
import java.util.concurrent.Callable;<br>
import java.util.concurrent.CountDownLatch;<br>
import java.util.concurrent.ExecutionException;<br>
import java.util.concurrent.ExecutorService;<br>
import java.util.concurrent.Executors;<br>
import java.util.concurrent.Future;</p>
<p>public class ReorderTest {<br>
	private int a = 0;<br>
	private int b = 0;</p>
<p>	public static void main(String[] args) throws InterruptedException,<br>
			ExecutionException {<br>
		ReorderTest rt = new ReorderTest();<br>
		rt.doTest();<br>
	}</p>
<p>	public void doTest() throws InterruptedException, ExecutionException {<br>
		ExecutorService executor = Executors.newFixedThreadPool(2);</p>
<p>		//可能出现的结果（关注ThreadATask，ThreadBTask取到的结果）<br>
		int num00 = 0; //x=0，y=0<br>
		int num10 = 0; //x=1，y=0<br>
		int num02 = 0; //x=0，y=2<br>
		int num12 = 0; //x=1，y=2</p>
<p>		//可能出现的结果（关注主线程取到的结果）<br>
		int main00_a = 0;<br>
		int main10_a = 0;<br>
		int main02_a = 0;<br>
		int main12_a = 0;</p>
<p>		//可能出现的结果（关注主线程取到的结果）<br>
		int main00_b = 0;<br>
		int main10_b = 0;<br>
		int main02_b = 0;<br>
		int main12_b = 0;</p>
<p>		int allNum = 100000;<br>
		for (int i = 0; i &lt; allNum; i++) {</p>
<p>			CountDownLatch latch = new CountDownLatch(1);<br>
			Future futureA = executor.submit(new ThreadATask(latch));<br>
			Future futureB = executor.submit(new ThreadBTask(latch));<br>
			latch.countDown();<br>
			if (a==0 &amp;&amp; b==0) {main00_a++;}<br>
			if (a==1 &amp;&amp; b==0) {main10_a++;}<br>
			if (a==0 &amp;&amp; b==2) {main02_a++;}<br>
			if (a==1 &amp;&amp; b==2) {main12_a++;}</p>
<p>			int x = (Integer) futureB.get(); //取得a<br>
			int y = (Integer) futureA.get(); //取得b</p>
<p>			if (x==0 &amp;&amp; y==0) {num00++;}<br>
			if (x==1 &amp;&amp; y==0) {num10++;}<br>
			if (x==0 &amp;&amp; y==2) {num02++;}<br>
			if (x==1 &amp;&amp; y==2) {num12++;}</p>
<p>			if (a==0 &amp;&amp; b==0) {main00_b++;}<br>
			if (a==1 &amp;&amp; b==0) {main10_b++;}<br>
			if (a==0 &amp;&amp; b==2) {main02_b++;}<br>
			if (a==1 &amp;&amp; b==2) {main12_b++;}</p>
<p>			//重置状态<br>
			a = 0;<br>
			b = 0;<br>
		}<br>
		System.out.println("a=0，b=0出现次数：" + main00_a);<br>
		System.out.println("a=1，b=0出现次数：" + main10_a);<br>
		System.out.println("a=0，b=2出现次数：" + main02_a);<br>
		System.out.println("a=1，b=2出现次数：" + main12_a);</p>
<p>		System.out.println("");<br>
		System.out.println("x=0，y=0出现次数：" + num00);<br>
		System.out.println("x=1，y=0出现次数：" + num10);<br>
		System.out.println("x=0，y=2出现次数：" + num02);<br>
		System.out.println("x=1，y=2出现次数：" + num12);</p>
<p>		System.out.println("");<br>
		System.out.println("a=0，b=0出现次数：" + main00_b);<br>
		System.out.println("a=1，b=0出现次数：" + main10_b);<br>
		System.out.println("a=0，b=2出现次数：" + main02_b);<br>
		System.out.println("a=1，b=2出现次数：" + main12_b);<br>
		executor.shutdown();<br>
	}</p>
<p>	private class ThreadATask implements Callable {<br>
		private CountDownLatch barrier;</p>
<p>		public ThreadATask(CountDownLatch barrier) {<br>
			this.barrier = barrier;<br>
		}</p>
<p>		public Integer call() throws InterruptedException,<br>
				BrokenBarrierException {<br>
			barrier.await(); //</p>
<p>			a = 1; // A1<br>
			return b; // A2<br>
		}<br>
	}</p>
<p>	private class ThreadBTask implements Callable {<br>
		private CountDownLatch barrier;</p>
<p>		public ThreadBTask(CountDownLatch barrier) {<br>
			this.barrier = barrier;<br>
		}</p>
<p>		public Integer call() throws InterruptedException,<br>
				BrokenBarrierException {<br>
			barrier.await();</p>
<p>			b = 2; // B1<br>
			return a; // B2<br>
		}<br>
	}<br>
}</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-8708">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a_002.jpg" srcset="http://2.gravatar.com/avatar/?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo avatar-default" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-8708">

nalanjia
</span>
     </li>
     <li class="comment-date">04/03. 2014 3:04pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-8708', 'comment-8708', 'comment-content-8708', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-8708">
    <p>运行结果为：<br>
a=0，b=0出现次数：98312<br>
a=1，b=0出现次数：25<br>
a=0，b=2出现次数：1<br>
a=1，b=2出现次数：1678</p>
<p>x=0，y=0出现次数：7<br>
x=1，y=0出现次数：95290<br>
x=0，y=2出现次数：4701<br>
x=1，y=2出现次数：2</p>
<p>a=0，b=0出现次数：0<br>
a=1，b=0出现次数：0<br>
a=0，b=2出现次数：0<br>
a=1，b=2出现次数：100000</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-21720">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a.jpg" srcset="http://1.gravatar.com/avatar/?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo avatar-default" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-21720">

silence
</span>
     </li>
     <li class="comment-date">07/03. 2014 11:14pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-21720', 'comment-21720', 'comment-content-21720', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-21720">
    <p>你好，对于这一系列文章看了好多遍了，还是不太明白happens-before，假如一个方法中只有两句代码为:this.a=10;
int 
b=20;根据文中指令级排序中说到的“如果不存在数据依赖性，处理器可以改变语句对应机器指令的执行顺序”，那么对于这两句代码而言确实不存在数据依赖
性，则处理器就有可能对这两句代码做重排序，先执行int 
b=20;再执行this.a=10，然后对于文中提到的”程序顺序规则：一个线程中的每个操作，happens- before 
于该线程中的任意后续操作”，说明这两个操作之间存在happens- before关系， 虽然happens- before 
规则不要求this.a=10一定要在int b=20之前执行，也就符合了处理器对这两个操作做重排序的做法，但是happens- before 
却要求”前一个操作（执行的结果）对后一个操作可见”，那么这里的两个操作被处理器重排序过后，this.a=10的操作结果并不一定对int 
b=20这个操作可见啊！这个是不是矛盾了啊？可能是我的理解出现了错误，还请兄台不吝赐教！谢谢！</p>
  </div>



<ul class="children">

 <li class="comment guest-comment odd_comment_children" id="comment-26700">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/2d60f2d6206602ab9c6c9e68080152de.jpg" srcset="http://2.gravatar.com/avatar/2d60f2d6206602ab9c6c9e68080152de?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26700">

wokaole
</span>
     </li>
     <li class="comment-date">02/24. 2016 5:36pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26700', 'comment-26700', 'comment-content-26700', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26700">
    <p>前面博主有回复过， java内存模型向程序员保证：如果A happens-before B，那么A操作的结果将对B可见，且A的执行顺序排在B之前。<br>
这仅仅是JMM对程序员的一个保证，如果对 A、B操作进行重排序后，不会对执行结果造成改变，那么java内存模型是允许编译器或处理器对A、B操作进行重排序的。<br>
程序员对A、B是否进行了重排序可能不太关心，关心的是程序执行的语义不能改变，即程序的执行结果不变。</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-26968">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/e5e9d003cdf6c5873b358793c24678e1.jpg" srcset="http://2.gravatar.com/avatar/e5e9d003cdf6c5873b358793c24678e1?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26968">

ericzou
</span>
     </li>
     <li class="comment-date">06/08. 2016 11:48am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26968', 'comment-26968', 'comment-content-26968', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26968">
    <p>如果A happens-before 
B，那么A操作的结果将对B可见，且A的执行顺序排在B之前。对于这句话，有个疑问，如果A和B的操作重排了，还能说A happens-before 
B吗？感觉这块好绕啊，可是程序次序规则又说线程中的每个操作happens-before后续的操作，这不是互相矛盾吗？</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-24120">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/377074e437bb085138351770105e4e7b.jpg" srcset="http://0.gravatar.com/avatar/377074e437bb085138351770105e4e7b?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-24120">

changhai614
</span>
     </li>
     <li class="comment-date">08/22. 2014 5:24pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-24120', 'comment-24120', 'comment-content-24120', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-24120">
    <p>写的不错</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-26706">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/ce3dfcb0a5bdd71725749f5173fca761.jpg" srcset="http://0.gravatar.com/avatar/ce3dfcb0a5bdd71725749f5173fca761?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26706">

dlbrant
</span>
     </li>
     <li class="comment-date">02/25. 2016 1:00pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26706', 'comment-26706', 'comment-content-26706', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26706">
    <p>nice</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-26926">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/5e242d05d154f3fd67af55ea1ffdcb63.jpg" srcset="http://2.gravatar.com/avatar/5e242d05d154f3fd67af55ea1ffdcb63?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-26926">

a1345204819
</span>
     </li>
     <li class="comment-date">05/23. 2016 6:06pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-26926', 'comment-26926', 'comment-content-26926', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-26926">
    <p>你好，我有一个疑问，比如在一个类中有一个volatile修饰的变量，然后有两个线程A，B分别对这个变量进行读写操作，那么B线程对该
变量的写的结果一定能够被线程A看到吗？也就是说，如果线程B在写入该变量之前要运行100ms其他的一些代码，而线程A在线程B写入操作之前已经运行到
自己的读操作，那此时线程A会停下来等待线程B的写入操作呢？还是继续运行，并读取此时该变量的值？</p>
  </div>



<ul class="children">

 <li class="comment guest-comment even_comment_children" id="comment-27156">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/31a570190aeb6ba02bc18a4e3ab27b01.jpg" srcset="http://0.gravatar.com/avatar/31a570190aeb6ba02bc18a4e3ab27b01?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27156">

windranger
</span>
     </li>
     <li class="comment-date">09/27. 2016 11:10am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27156', 'comment-27156', 'comment-content-27156', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27156">
    <p>看完这一系列文章和评论，发现大家对happens-before和内存可见性都不是太理解，说说我个人的理解，如有错误，敬请指正。第二
节重排序中对happens-before定义如下：如果A happens- before 
B，JMM并不要求A一定要在B之前执行。JMM仅仅要求前一个操作（执行的结果）对后一个操作可见，且前一个操作按顺序排在第二个操作之前。我觉得可能
最后一句“而且一个操作按顺序排在第二个操作之前”混淆了大家对happens-before的理解，认为A happens- before 
B，则A一定在B之前执行，我觉得应该这么理解这句话，A happens- before 
B意味着程序不管把AB怎么重排，一定要保证结果和按A-&gt;B顺序执行是一致的，不管怎么重排，后一个执行的操作能看到前一个操作的执行，即使它们
在不同的线程中，这样就保证了第三节顺序一致性中说的情况，“未同步程序在顺序一致性模型中虽然整体执行顺序是无序的，但所有线程都只能看到一个一致的整
体执行顺序”，而不会出现在A看来是A-&gt;B的顺序，而B看来是B-&gt;A的顺序，因为“线程内存”的存在，的确会出现这种很奇怪的情况。通俗
一点就是说，对A来说，你B线程说了在我之前执行，就一定要在我之前执行，别你把共享内存中的变量取走了，缓存到“线程内存”，做了修改却没通知我，导致
我没取到最新的共享内存变量，这就跟SVN的冲突一样了，两个人都同时对某文件做了修改，如果没有SVN的解决冲突，那必将导致丢失一个人的修改。所以
happens-before和内存可见性就是保证了写操作的原子性，也就是volatile关键字的作用。</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-27369">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/522b21477ce640652c9c8f9d805157ed.jpg" srcset="http://2.gravatar.com/avatar/522b21477ce640652c9c8f9d805157ed?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27369">

cindy_cao
</span>
     </li>
     <li class="comment-date">01/12. 2017 4:27pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27369', 'comment-27369', 'comment-content-27369', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27369">
    <p>引用”由于现代的processor都会使用写缓冲区，因此现代的processor都会允许对写-读操作重排序。”,为什么所有的processor都支持写-读重排序,不支持读-读重排序呢?读-读不应该更不会影响最终结果的正确性吗?</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-27374">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/522b21477ce640652c9c8f9d805157ed.jpg" srcset="http://2.gravatar.com/avatar/522b21477ce640652c9c8f9d805157ed?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27374">

cindy_cao
</span>
     </li>
     <li class="comment-date">01/12. 2017 6:43pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27374', 'comment-27374', 'comment-content-27374', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27374">
    <p>引用”StoreLoad 
Barriers会使该屏障之前的所有内存访问指令（存储和装载指令）完成之后，才执行该屏障之后的内存访问指令。”本人理解的StoreLoad 
Barriers只是写-读内存屏障,为什么从这句话中读到的意思是读-读,写-读操作呢?后还提到具备3个内存屏障的效果是什么意思?</p>
  </div>



</li><!-- #comment-## -->

 <li class="comment guest-comment odd_comment" id="comment-27416">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/5f10998c4508557e26dd895a28458746.jpg" srcset="http://2.gravatar.com/avatar/5f10998c4508557e26dd895a28458746?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27416">

channel
</span>
     </li>
     <li class="comment-date">02/13. 2017 4:28pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27416', 'comment-27416', 'comment-content-27416', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27416">
    <p>文章说 ： 在共享内存并发模型里，同步是显式进行的。程序员必须显式指定某个方法或某段代码需要在线程之间互斥执行。在消息传递的并发模型里，由于消息的发送必须在消息的接收之前，因此同步是隐式进行的。</p>
<p>为什么又说 Java的并发采用的是共享内存模型，Java线程之间的通信总是隐式进行， </p>
<p>不是说消息传递的并发模型里，才是隐式进行的吗。</p>
  </div>



<ul class="children">

 <li class="comment guest-comment odd_comment_children" id="comment-27435">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/522b21477ce640652c9c8f9d805157ed.jpg" srcset="http://2.gravatar.com/avatar/522b21477ce640652c9c8f9d805157ed?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27435">

cindy_cao
</span>
     </li>
     <li class="comment-date">02/22. 2017 11:04am</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27435', 'comment-27435', 'comment-content-27435', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27435">
    <p>说的很对啊,java的并发是共享内存模型,而你说的是消息传递的并发模型,两个模型不一样,是不是看花了?</p>
  </div>



</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->

 <li class="comment guest-comment even_comment" id="comment-27609">
  <div class="comment-meta">
   <div class="comment-meta-left">
  <img alt="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a1723e5d1d844c2c8a27b2627875f029.jpg" srcset="http://1.gravatar.com/avatar/a1723e5d1d844c2c8a27b2627875f029?s=70&amp;d=mm&amp;r=g 2x" class="avatar avatar-35 photo" height="35" width="35">  
    <ul class="comment-name-date">
     <li class="comment-name">
<span id="commentauthor-27609">

lionheartyd
</span>
     </li>
     <li class="comment-date">04/26. 2017 6:12pm</li>
    </ul>
   </div>

   <ul class="comment-act">
    <li class="comment-reply"><a rel="nofollow" class="comment-reply-login" href="http://ifeve.com/wp-login.php?redirect_to=http%3A%2F%2Fifeve.com%2Fjava-memory-model-1%2F">Log in to Reply</a></li>
    <li class="comment-quote"><a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-27609', 'comment-27609', 'comment-content-27609', 'comment');">QUOTE</a></li>
       </ul>

  </div>
  <div class="comment-content" id="comment-content-27609">
    <p>文中多次提到处理器写缓冲，因此造成一些列的重排序可见性问题，我想问的是，处理器再从内存读取数据时会有读缓冲吗？比如A线程读取了变量i, 此后B线程修改了变量i并写入了主存，此时A线程再次读取变量i时，它是从主存读呢还是读取缓存呢？</p>
  </div>



</li><!-- #comment-## -->
  </ol>
  <!-- comments END -->

  
 </div><!-- #comment-list END -->


 <div id="trackback_area">
 <!-- start trackback -->
  <!-- trackback end -->
 </div><!-- #trackbacklist END -->

 


 
 <div class="comment_form_wrapper" id="respond">
    You must be <a href="http://ifeve.com/wp-login.php">logged in</a> to post a comment. </div>

 </div><!-- #comment end -->   </div>
   
      <div id="previous_next_post_single">
    <div class="clearfix">
     <p id="previous_post"><a href="http://ifeve.com/cancellation/" rel="prev">任务取消(Cancellation)</a></p>     <p id="next_post"><a href="http://ifeve.com/who-is-lock/" rel="next">哪个对象才是锁？</a></p>    </div>
   </div>
   

  </div><!-- END #left_col -->

  <div id="container"></div>

    <div id="right_col">
   

<div class="side_box clearfix" id="side_meta_content">

  <ul id="social_link" class="clearfix">
    <li class="rss_button"><a class="target_blank" href="http://ifeve.com/feed/" target="_blank">rss</a></li>
       </ul>
 
  <div id="search_area">
    <form method="get" id="searchform" action="http://ifeve.com/">
   <div><input id="search_button" class="rollover" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/search_button.gif" alt="SEARCH" title="SEARCH" type="image"></div>
   <div><input id="search_input" value="SEARCH" name="s" onfocus="if (this.value == 'SEARCH') this.value = '';" onblur="if (this.value == '') this.value = 'SEARCH';" type="text"></div>
  </form>
   </div>
 
</div>


<div id="side_top">

 <div class="side_box widget_text" id="text-17">
			<div class="textwidget"><p><a href="http://pro.badouxueyuan.cn/ifeve/" target="_blank" rel="noopener"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/IMG_2352.jpg"></a></p>
<p><script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script><br>
<!-- 首页－右上－2 --><br>
<ins class="adsbygoogle" style="display: inline-block; width: 336px; height: 280px;" data-ad-client="ca-pub-9394337417063147" data-ad-slot="8872369516" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:336px;height:280px;" height="280" frameborder="0" width="336"></iframe></ins></ins></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
</div>
		</div>
		<div class="side_box widget_recent_entries" id="recent-posts-2">
		<h3 class="side_title">Recent Posts</h3>
		<ul>
					<li>
				<a href="http://ifeve.com/alithink-smiling-face-failure/">《阿里感悟》不忘初心-写给晋升失败的同学</a>
						</li>
					<li>
				<a href="http://ifeve.com/alithink-how-to-lean/">《阿里感悟 》如何学习一项新技术</a>
						</li>
					<li>
				<a href="http://ifeve.com/jdk%e5%8a%a8%e6%80%81%e4%bb%a3%e7%90%86%e4%bb%a3%e7%90%86%e4%b8%8ecglib%e4%bb%a3%e7%90%86%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/">JDK动态代理代理与Cglib代理原理探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/lockfreehashmap/">LockFreeHashMap:无阻塞代码技巧</a>
						</li>
					<li>
				<a href="http://ifeve.com/jeps-201/">《JAVA9模块化项目》JEP 201 模块化源代码</a>
						</li>
					<li>
				<a href="http://ifeve.com/get_started_with_tensorflow/">《TensorFlow官方文档》入门指南</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e5%b9%b6%e5%8f%91%e9%98%9f%e5%88%97-%e6%97%a0%e7%95%8c%e9%98%bb%e5%a1%9e%e5%bb%b6%e8%bf%9f%e9%98%9f%e5%88%97delayqueue%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/">并发队列-无界阻塞延迟队列DelayQueue原理探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/33981-2/">Java中调度线程池ScheduledThreadPoolExecutor原理探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/jeps-200/">JEP 200：模块化JDK</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e5%b8%b8%e7%94%a8%e5%bc%80%e6%ba%90%e6%a1%86%e6%9e%b6%e6%89%a9%e5%b1%95%e6%b8%85%e5%8d%95%e4%b9%8b%e5%8e%9f%e7%90%86/">常用开源框架扩展清单之原理</a>
						</li>
					<li>
				<a href="http://ifeve.com/classloader%e8%a7%a3%e6%83%91/">ClassLoader解惑</a>
						</li>
					<li>
				<a href="http://ifeve.com/guide-wagon-providers/">《Maven官方文档》选择可移植的Wagon提供者</a>
						</li>
					<li>
				<a href="http://ifeve.com/java-jigsaw/">《JAVA模块化系统》翻译邀请</a>
						</li>
					<li>
				<a href="http://ifeve.com/guide-encryption/">《Maven官方文档》密码加密</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e5%b8%b8%e7%94%a8%e5%bc%80%e6%ba%90%e6%a1%86%e6%9e%b6%e4%b8%ad%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%bd%bf%e7%94%a8%e5%88%86%e6%9e%90/">常用开源框架中设计模式使用分析</a>
						</li>
					<li>
				<a href="http://ifeve.com/uml-intro/">UML建模图实战笔记</a>
						</li>
					<li>
				<a href="http://ifeve.com/java%e4%ba%92%e6%96%a5%e9%94%81synchronizedlock%ef%bc%9a%e8%a1%8c%e4%b8%ba%e5%88%86%e6%9e%90%e5%8f%8a%e6%ba%90%e7%a0%81/">JAVA互斥锁(synchronized&amp;Lock)：行为分析及源码</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e5%b9%b6%e5%8f%91%e9%98%9f%e5%88%97%e4%b8%ad%e8%bf%ad%e4%bb%a3%e5%99%a8%e5%bc%b1%e4%b8%80%e8%87%b4%e6%80%a7%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/">并发队列中迭代器弱一致性原理探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/java-nio-path-2/">Java NIO系列教程（十 五）Java NIO Path</a>
						</li>
					<li>
				<a href="http://ifeve.com/maven-index-2/">《Maven官方文档》目录指南</a>
						</li>
					<li>
				<a href="http://ifeve.com/guide-mirror-settings/">《Maven官方文档》使用镜像仓库</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e3%80%8aspring-5-%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%e3%80%8b22-websocket-support/">《Spring 5 官方文档》22. WebSocket Support</a>
						</li>
					<li>
				<a href="http://ifeve.com/tensorflow/">《TensorFlow官方文档》翻译邀请</a>
						</li>
					<li>
				<a href="http://ifeve.com/spring-17-xml/">《Spring官方文档》17.利用O/X映射器编组XML</a>
						</li>
					<li>
				<a href="http://ifeve.com/java-nio-path/">《Java NIO教程》Java NIO Path</a>
						</li>
					<li>
				<a href="http://ifeve.com/velocity%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/">Velocity原理探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e5%ad%90%e7%ba%bf%e7%a8%8b%e4%bc%98%e9%9b%85%e8%b0%83%e7%94%a8%e7%88%b6%e7%ba%bf%e7%a8%8brequestscope%e4%bd%9c%e7%94%a8%e5%9f%9fbean%e9%97%ae%e9%a2%98%e7%9a%84%e6%8e%a2%e7%a9%b6/">子线程优雅调用父线程RequestScope作用域Bean问题的探究</a>
						</li>
					<li>
				<a href="http://ifeve.com/maven-settings/">《Maven官方指南》Maven 配置</a>
						</li>
					<li>
				<a href="http://ifeve.com/%e9%ab%98%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%e5%bf%85%e5%a4%87%e5%9f%ba%e7%a1%80/">高并发编程必备基础</a>
						</li>
					<li>
				<a href="http://ifeve.com/java%e4%b8%ad%e7%ba%bf%e7%a8%8b%e6%b1%a0threadpoolexecutor%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/">Java中线程池ThreadPoolExecutor原理探究</a>
						</li>
				</ul>
		</div>
		<div class="side_box widget_text" id="text-10">
			<div class="textwidget"><script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script>
<!-- 首页－右上－2 -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="8872369516" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:336px;height:280px;" height="280" frameborder="0" width="336"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</div>
<div class="side_box widget_views" id="views-4">
<h3 class="side_title">热门文章</h3>
<ul>
<li><a href="http://ifeve.com/java-memory-model-1/" title="Google Guava官方教程（中文版）">Google Guava官方教程（中文版）</a> 462,040 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（一） Java NIO 概述">Java NIO系列教程（一） Java NIO 概述</a> 295,943 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java并发性和多线程介绍目录">Java并发性和多线程介绍目录</a> 199,625 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO 系列教程">Java NIO 系列教程</a> 185,157 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（十二） Java NIO与IO">Java NIO系列教程（十二） Java NIO与IO</a> 164,056 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（六） Selector">Java NIO系列教程（六） Selector</a> 153,450 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="《Storm入门》中文版">《Storm入门》中文版</a> 149,090 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（三） Buffer">Java NIO系列教程（三） Buffer</a> 146,421 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（二） Channel">Java NIO系列教程（二） Channel</a> 146,323 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java8初体验（二）Stream语法详解">Java8初体验（二）Stream语法详解</a> 140,907 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="69道Spring面试题和答案">69道Spring面试题和答案</a> 130,967 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Netty 5用户指南">Netty 5用户指南</a> 120,868 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java 7 并发编程指南中文版">Java 7 并发编程指南中文版</a> 117,655 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="并发框架Disruptor译文">并发框架Disruptor译文</a> 105,965 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（八） SocketChannel">Java NIO系列教程（八） SocketChannel</a> 98,658 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Java NIO系列教程（七） FileChannel">Java NIO系列教程（七） FileChannel</a> 89,434 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="[Google Guava] 1.1-使用和避免null">[Google Guava] 1.1-使用和避免null</a> 89,070 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Storm入门之第一章">Storm入门之第一章</a> 88,666 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="Netty-Mina深入学习与对比（一）">Netty-Mina深入学习与对比（一）</a> 85,954 人阅读 </li><li><a href="http://ifeve.com/java-memory-model-1/" title="[Google Guava] 2.3-强大的集合工具类：ja...">[Google Guava] 2.3-强大的集合工具类：ja...</a> 85,808 人阅读 </li></ul>
</div>
<div class="side_box widget_text" id="text-7">
			<div class="textwidget"><script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="4721371513" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;width:336px;height:280px;" height="280" frameborder="0" width="336"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>
		</div>
<div class="side_box widget_recent_comments" id="recent-comments-2">
<h3 class="side_title">Recent Comments</h3>
<ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href="http://weyo.me/" rel="external nofollow" class="url">魏 勇</a></span> on <a href="http://ifeve.com/flink/comment-page-1/#comment-27859">《Flink官方文档》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link">加多</span> on <a href="http://ifeve.com/jdk%e5%8a%a8%e6%80%81%e4%bb%a3%e7%90%86%e4%bb%a3%e7%90%86%e4%b8%8ecglib%e4%bb%a3%e7%90%86%e5%8e%9f%e7%90%86%e6%8e%a2%e7%a9%b6/comment-page-1/#comment-27857">JDK动态代理代理与Cglib代理原理探究</a></li><li class="recentcomments"><span class="comment-author-link">reed7</span> on <a href="http://ifeve.com/java-jigsaw/comment-page-1/#comment-27856">《JAVA模块化系统》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link">Subfire</span> on <a href="http://ifeve.com/static-factory-methods-vs-traditional-constructors/comment-page-1/#comment-27855">静态工厂方法VS构造器</a></li><li class="recentcomments"><span class="comment-author-link">reed7</span> on <a href="http://ifeve.com/java-jigsaw/comment-page-1/#comment-27854">《JAVA模块化系统》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link">volshell</span> on <a href="http://ifeve.com/introduce-abstractqueuedsynchronizer/comment-page-1/#comment-27853">AbstractQueuedSynchronizer的介绍和原理分析</a></li><li class="recentcomments"><span class="comment-author-link">volshell</span> on <a href="http://ifeve.com/introduce-abstractqueuedsynchronizer/comment-page-1/#comment-27852">AbstractQueuedSynchronizer的介绍和原理分析</a></li><li class="recentcomments"><span class="comment-author-link">reed7</span> on <a href="http://ifeve.com/java-jigsaw/comment-page-1/#comment-27851">《JAVA模块化系统》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link">杨忠洋</span> on <a href="http://ifeve.com/basic-thread-synchronization-6/comment-page-1/#comment-27850">基本线程同步（六）使用读/写锁同步数据访问</a></li><li class="recentcomments"><span class="comment-author-link">青峰</span> on <a href="http://ifeve.com/classloader%e8%a7%a3%e6%83%91/comment-page-1/#comment-27849">ClassLoader解惑</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.wiloon.com/wordpress/?p=8475" rel="external nofollow" class="url">Java CAS 实现 – w1100n</a></span> on <a href="http://ifeve.com/atomic-operation/comment-page-1/#comment-27847">聊聊并发（五）原子操作的实现原理</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.carvendy.com/" rel="external nofollow" class="url">魔术师Carvendy</a></span> on <a href="http://ifeve.com/%e5%b8%b8%e7%94%a8%e5%bc%80%e6%ba%90%e6%a1%86%e6%9e%b6%e6%89%a9%e5%b1%95%e6%b8%85%e5%8d%95%e4%b9%8b%e5%8e%9f%e7%90%86/comment-page-1/#comment-27846">常用开源框架扩展清单之原理</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.carvendy.com/" rel="external nofollow" class="url">魔术师Carvendy</a></span> on <a href="http://ifeve.com/java-jigsaw/comment-page-1/#comment-27845">《JAVA模块化系统》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.carvendy.com/" rel="external nofollow" class="url">魔术师Carvendy</a></span> on <a href="http://ifeve.com/java-jigsaw/comment-page-1/#comment-27844">《JAVA模块化系统》翻译邀请</a></li><li class="recentcomments"><span class="comment-author-link">悟空的毛毛</span> on <a href="http://ifeve.com/java-7-concurrency-cookbook/comment-page-1/#comment-27837">Java 7 并发编程指南中文版</a></li><li class="recentcomments"><span class="comment-author-link">frinds</span> on <a href="http://ifeve.com/need-you/comment-page-1/#comment-27836">2017并发网招募主编和译者</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.carvendy.com/" rel="external nofollow" class="url">魔术师Carvendy</a></span> on <a href="http://ifeve.com/%e9%ab%98%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%e5%bf%85%e5%a4%87%e5%9f%ba%e7%a1%80/comment-page-1/#comment-27835">高并发编程必备基础</a></li><li class="recentcomments"><span class="comment-author-link">加多</span> on <a href="http://ifeve.com/%e5%b8%b8%e7%94%a8%e5%bc%80%e6%ba%90%e6%a1%86%e6%9e%b6%e6%89%a9%e5%b1%95%e6%b8%85%e5%8d%95%e4%b9%8b%e5%8e%9f%e7%90%86/comment-page-1/#comment-27833">常用开源框架扩展清单之原理</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://www.carvendy.com/" rel="external nofollow" class="url">魔术师Carvendy</a></span> on <a href="http://ifeve.com/%e5%b8%b8%e7%94%a8%e5%bc%80%e6%ba%90%e6%a1%86%e6%9e%b6%e6%89%a9%e5%b1%95%e6%b8%85%e5%8d%95%e4%b9%8b%e5%8e%9f%e7%90%86/comment-page-1/#comment-27832">常用开源框架扩展清单之原理</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://open2me.com/2017/05/26/%e8%81%8a%e8%81%8a%e5%b9%b6%e5%8f%91%ef%bc%88%e4%ba%8c%ef%bc%89java-se1-6%e4%b8%ad%e7%9a%84synchronized/" rel="external nofollow" class="url">聊聊并发（二）Java SE1.6中的Synchronized | 编程之美</a></span> on <a href="http://ifeve.com/java-synchronized/comment-page-1/#comment-27831">聊聊并发（二）Java SE1.6中的Synchronized</a></li></ul></div>
<div class="side_box widget_tag_cloud" id="tag_cloud-4">
<h3 class="side_title">Tags</h3>
<div class="tagcloud"><a href="http://ifeve.com/tag/actor/" class="tag-cloud-link tag-link-226 tag-link-position-1" style="font-size: 12.710280373832pt;" aria-label="actor (17 items)">actor</a>
<a href="http://ifeve.com/tag/basic/" class="tag-cloud-link tag-link-213 tag-link-position-2" style="font-size: 11.663551401869pt;" aria-label="Basic (14 items)">Basic</a>
<a href="http://ifeve.com/tag/book/" class="tag-cloud-link tag-link-243 tag-link-position-3" style="font-size: 8pt;" aria-label="book (7 items)">book</a>
<a href="http://ifeve.com/tag/classes/" class="tag-cloud-link tag-link-251 tag-link-position-4" style="font-size: 8.6542056074766pt;" aria-label="classes (8 items)">classes</a>
<a href="http://ifeve.com/tag/collections/" class="tag-cloud-link tag-link-260 tag-link-position-5" style="font-size: 10.355140186916pt;" aria-label="collections (11 items)">collections</a>
<a href="http://ifeve.com/tag/concurrency/" class="tag-cloud-link tag-link-111 tag-link-position-6" style="font-size: 20.560747663551pt;" aria-label="concurrency (71 items)">concurrency</a>
<a href="http://ifeve.com/tag/concurrent/" class="tag-cloud-link tag-link-214 tag-link-position-7" style="font-size: 10.747663551402pt;" aria-label="Concurrent (12 items)">Concurrent</a>
<a href="http://ifeve.com/tag/concurrent-data-structure/" class="tag-cloud-link tag-link-322 tag-link-position-8" style="font-size: 11.271028037383pt;" aria-label="concurrent data structure (13 items)">concurrent data structure</a>
<a href="http://ifeve.com/tag/customizing/" class="tag-cloud-link tag-link-250 tag-link-position-9" style="font-size: 8.6542056074766pt;" aria-label="Customizing (8 items)">Customizing</a>
<a href="http://ifeve.com/tag/executor/" class="tag-cloud-link tag-link-177 tag-link-position-10" style="font-size: 13.495327102804pt;" aria-label="Executor (20 items)">Executor</a>
<a href="http://ifeve.com/tag/executor-framework/" class="tag-cloud-link tag-link-231 tag-link-position-11" style="font-size: 12.710280373832pt;" aria-label="Executor framework (17 items)">Executor framework</a>
<a href="http://ifeve.com/tag/false-sharing/" class="tag-cloud-link tag-link-119 tag-link-position-12" style="font-size: 8pt;" aria-label="False Sharing (7 items)">False Sharing</a>
<a href="http://ifeve.com/tag/faq/" class="tag-cloud-link tag-link-39 tag-link-position-13" style="font-size: 11.271028037383pt;" aria-label="faq (13 items)">faq</a>
<a href="http://ifeve.com/tag/fork/" class="tag-cloud-link tag-link-232 tag-link-position-14" style="font-size: 10.355140186916pt;" aria-label="fork (11 items)">fork</a>
<a href="http://ifeve.com/tag/forkjoin/" class="tag-cloud-link tag-link-224 tag-link-position-15" style="font-size: 9.3084112149533pt;" aria-label="Fork/Join (9 items)">Fork/Join</a>
<a href="http://ifeve.com/tag/fork-join/" class="tag-cloud-link tag-link-53 tag-link-position-16" style="font-size: 8.6542056074766pt;" aria-label="fork join (8 items)">fork join</a>
<a href="http://ifeve.com/tag/framework/" class="tag-cloud-link tag-link-1018 tag-link-position-17" style="font-size: 14.018691588785pt;" aria-label="Framework (22 items)">Framework</a>
<a href="http://ifeve.com/tag/functional-programming/" class="tag-cloud-link tag-link-460 tag-link-position-18" style="font-size: 9.8317757009346pt;" aria-label="Functional Programming (10 items)">Functional Programming</a>
<a href="http://ifeve.com/tag/guava/" class="tag-cloud-link tag-link-309 tag-link-position-19" style="font-size: 11.92523364486pt;" aria-label="Guava (15 items)">Guava</a>
<a href="http://ifeve.com/tag/io/" class="tag-cloud-link tag-link-129 tag-link-position-20" style="font-size: 14.934579439252pt;" aria-label="IO (26 items)">IO</a>
<a href="http://ifeve.com/tag/java/" class="tag-cloud-link tag-link-1016 tag-link-position-21" style="font-size: 22pt;" aria-label="JAVA (92 items)">JAVA</a>
<a href="http://ifeve.com/tag/java8/" class="tag-cloud-link tag-link-342 tag-link-position-22" style="font-size: 11.271028037383pt;" aria-label="java8 (13 items)">java8</a>
<a href="http://ifeve.com/tag/jmm/" class="tag-cloud-link tag-link-31 tag-link-position-23" style="font-size: 15.981308411215pt;" aria-label="jmm (31 items)">jmm</a>
<a href="http://ifeve.com/tag/join/" class="tag-cloud-link tag-link-233 tag-link-position-24" style="font-size: 10.355140186916pt;" aria-label="join (11 items)">join</a>
<a href="http://ifeve.com/tag/jvm/" class="tag-cloud-link tag-link-1019 tag-link-position-25" style="font-size: 12.710280373832pt;" aria-label="JVM (17 items)">JVM</a>
<a href="http://ifeve.com/tag/lock/" class="tag-cloud-link tag-link-17 tag-link-position-26" style="font-size: 14.280373831776pt;" aria-label="lock (23 items)">lock</a>
<a href="http://ifeve.com/tag/memory-barriers/" class="tag-cloud-link tag-link-75 tag-link-position-27" style="font-size: 9.8317757009346pt;" aria-label="Memory Barriers (10 items)">Memory Barriers</a>
<a href="http://ifeve.com/tag/netty/" class="tag-cloud-link tag-link-1027 tag-link-position-28" style="font-size: 13.233644859813pt;" aria-label="Netty (19 items)">Netty</a>
<a href="http://ifeve.com/tag/nio/" class="tag-cloud-link tag-link-1021 tag-link-position-29" style="font-size: 12.317757009346pt;" aria-label="NIO (16 items)">NIO</a>
<a href="http://ifeve.com/tag/oauth-2-0/" class="tag-cloud-link tag-link-380 tag-link-position-30" style="font-size: 8.6542056074766pt;" aria-label="OAuth 2.0 (8 items)">OAuth 2.0</a>
<a href="http://ifeve.com/tag/pattern-matching/" class="tag-cloud-link tag-link-167 tag-link-position-31" style="font-size: 8.6542056074766pt;" aria-label="pattern-matching (8 items)">pattern-matching</a>
<a href="http://ifeve.com/tag/ringbuffer/" class="tag-cloud-link tag-link-91 tag-link-position-32" style="font-size: 8pt;" aria-label="RingBuffer (7 items)">RingBuffer</a>
<a href="http://ifeve.com/tag/scala/" class="tag-cloud-link tag-link-1023 tag-link-position-33" style="font-size: 14.018691588785pt;" aria-label="Scala (22 items)">Scala</a>
<a href="http://ifeve.com/tag/slf4j/" class="tag-cloud-link tag-link-813 tag-link-position-34" style="font-size: 8.6542056074766pt;" aria-label="slf4j (8 items)">slf4j</a>
<a href="http://ifeve.com/tag/spark/" class="tag-cloud-link tag-link-634 tag-link-position-35" style="font-size: 12.710280373832pt;" aria-label="spark (17 items)">spark</a>
<a href="http://ifeve.com/tag/spark%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3/" class="tag-cloud-link tag-link-635 tag-link-position-36" style="font-size: 12.710280373832pt;" aria-label="spark官方文档 (17 items)">spark官方文档</a>
<a href="http://ifeve.com/tag/stm/" class="tag-cloud-link tag-link-199 tag-link-position-37" style="font-size: 10.747663551402pt;" aria-label="stm (12 items)">stm</a>
<a href="http://ifeve.com/tag/storm/" class="tag-cloud-link tag-link-351 tag-link-position-38" style="font-size: 17.158878504673pt;" aria-label="Storm (39 items)">Storm</a>
<a href="http://ifeve.com/tag/synchronization/" class="tag-cloud-link tag-link-216 tag-link-position-39" style="font-size: 11.92523364486pt;" aria-label="synchronization (15 items)">synchronization</a>
<a href="http://ifeve.com/tag/synchronized/" class="tag-cloud-link tag-link-15 tag-link-position-40" style="font-size: 9.8317757009346pt;" aria-label="Synchronized (10 items)">Synchronized</a>
<a href="http://ifeve.com/tag/thread/" class="tag-cloud-link tag-link-11 tag-link-position-41" style="font-size: 17.551401869159pt;" aria-label="thread (42 items)">thread</a>
<a href="http://ifeve.com/tag/tomcat/" class="tag-cloud-link tag-link-347 tag-link-position-42" style="font-size: 8.6542056074766pt;" aria-label="tomcat (8 items)">tomcat</a>
<a href="http://ifeve.com/tag/volatile/" class="tag-cloud-link tag-link-25 tag-link-position-43" style="font-size: 10.747663551402pt;" aria-label="volatile (12 items)">volatile</a>
<a href="http://ifeve.com/tag/%e5%a4%9a%e7%ba%bf%e7%a8%8b/" class="tag-cloud-link tag-link-197 tag-link-position-44" style="font-size: 8.6542056074766pt;" aria-label="多线程 (8 items)">多线程</a>
<a href="http://ifeve.com/tag/%e5%b9%b6%e5%8f%91%e8%af%91%e6%96%87%ef%bc%8cjava-%ef%bc%8cmaven/" class="tag-cloud-link tag-link-1034 tag-link-position-45" style="font-size: 16.11214953271pt;" aria-label="并发译文，Java ，Maven (32 items)">并发译文，Java ，Maven</a></div>
</div>
<div class="side_box widget_text" id="text-9">
			<div class="textwidget"><script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="6198104715" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_3_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;width:336px;height:280px;" height="280" frameborder="0" width="336"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


</div>
		</div>
</div>
<div id="side_middle" class="clearfix">
 <div id="side_left">
  <div class="side_box_short widget_archive" id="archives-2">
<h3 class="side_title">Archives</h3>
		<ul>
			<li><a href="http://ifeve.com/2017/07/">July 2017</a>&nbsp;(16)</li>
	<li><a href="http://ifeve.com/2017/06/">June 2017</a>&nbsp;(37)</li>
	<li><a href="http://ifeve.com/2017/05/">May 2017</a>&nbsp;(59)</li>
	<li><a href="http://ifeve.com/2017/04/">April 2017</a>&nbsp;(17)</li>
	<li><a href="http://ifeve.com/2017/03/">March 2017</a>&nbsp;(30)</li>
	<li><a href="http://ifeve.com/2017/02/">February 2017</a>&nbsp;(9)</li>
	<li><a href="http://ifeve.com/2017/01/">January 2017</a>&nbsp;(7)</li>
	<li><a href="http://ifeve.com/2016/12/">December 2016</a>&nbsp;(12)</li>
	<li><a href="http://ifeve.com/2016/11/">November 2016</a>&nbsp;(27)</li>
	<li><a href="http://ifeve.com/2016/10/">October 2016</a>&nbsp;(16)</li>
	<li><a href="http://ifeve.com/2016/09/">September 2016</a>&nbsp;(11)</li>
	<li><a href="http://ifeve.com/2016/08/">August 2016</a>&nbsp;(6)</li>
	<li><a href="http://ifeve.com/2016/07/">July 2016</a>&nbsp;(9)</li>
	<li><a href="http://ifeve.com/2016/06/">June 2016</a>&nbsp;(7)</li>
	<li><a href="http://ifeve.com/2016/05/">May 2016</a>&nbsp;(20)</li>
	<li><a href="http://ifeve.com/2016/04/">April 2016</a>&nbsp;(28)</li>
	<li><a href="http://ifeve.com/2016/03/">March 2016</a>&nbsp;(8)</li>
	<li><a href="http://ifeve.com/2016/02/">February 2016</a>&nbsp;(7)</li>
	<li><a href="http://ifeve.com/2016/01/">January 2016</a>&nbsp;(10)</li>
	<li><a href="http://ifeve.com/2015/12/">December 2015</a>&nbsp;(15)</li>
	<li><a href="http://ifeve.com/2015/11/">November 2015</a>&nbsp;(24)</li>
	<li><a href="http://ifeve.com/2015/10/">October 2015</a>&nbsp;(17)</li>
	<li><a href="http://ifeve.com/2015/09/">September 2015</a>&nbsp;(29)</li>
	<li><a href="http://ifeve.com/2015/08/">August 2015</a>&nbsp;(44)</li>
	<li><a href="http://ifeve.com/2015/07/">July 2015</a>&nbsp;(20)</li>
	<li><a href="http://ifeve.com/2015/06/">June 2015</a>&nbsp;(21)</li>
	<li><a href="http://ifeve.com/2015/05/">May 2015</a>&nbsp;(15)</li>
	<li><a href="http://ifeve.com/2015/04/">April 2015</a>&nbsp;(27)</li>
	<li><a href="http://ifeve.com/2015/03/">March 2015</a>&nbsp;(13)</li>
	<li><a href="http://ifeve.com/2015/02/">February 2015</a>&nbsp;(11)</li>
	<li><a href="http://ifeve.com/2015/01/">January 2015</a>&nbsp;(13)</li>
	<li><a href="http://ifeve.com/2014/12/">December 2014</a>&nbsp;(26)</li>
	<li><a href="http://ifeve.com/2014/11/">November 2014</a>&nbsp;(61)</li>
	<li><a href="http://ifeve.com/2014/10/">October 2014</a>&nbsp;(33)</li>
	<li><a href="http://ifeve.com/2014/09/">September 2014</a>&nbsp;(47)</li>
	<li><a href="http://ifeve.com/2014/08/">August 2014</a>&nbsp;(27)</li>
	<li><a href="http://ifeve.com/2014/07/">July 2014</a>&nbsp;(13)</li>
	<li><a href="http://ifeve.com/2014/06/">June 2014</a>&nbsp;(32)</li>
	<li><a href="http://ifeve.com/2014/05/">May 2014</a>&nbsp;(45)</li>
	<li><a href="http://ifeve.com/2014/04/">April 2014</a>&nbsp;(41)</li>
	<li><a href="http://ifeve.com/2014/03/">March 2014</a>&nbsp;(34)</li>
	<li><a href="http://ifeve.com/2014/02/">February 2014</a>&nbsp;(38)</li>
	<li><a href="http://ifeve.com/2014/01/">January 2014</a>&nbsp;(19)</li>
	<li><a href="http://ifeve.com/2013/12/">December 2013</a>&nbsp;(10)</li>
	<li><a href="http://ifeve.com/2013/11/">November 2013</a>&nbsp;(4)</li>
	<li><a href="http://ifeve.com/2013/10/">October 2013</a>&nbsp;(20)</li>
	<li><a href="http://ifeve.com/2013/09/">September 2013</a>&nbsp;(38)</li>
	<li><a href="http://ifeve.com/2013/08/">August 2013</a>&nbsp;(48)</li>
	<li><a href="http://ifeve.com/2013/07/">July 2013</a>&nbsp;(26)</li>
	<li><a href="http://ifeve.com/2013/06/">June 2013</a>&nbsp;(16)</li>
	<li><a href="http://ifeve.com/2013/05/">May 2013</a>&nbsp;(9)</li>
	<li><a href="http://ifeve.com/2013/04/">April 2013</a>&nbsp;(17)</li>
	<li><a href="http://ifeve.com/2013/03/">March 2013</a>&nbsp;(41)</li>
	<li><a href="http://ifeve.com/2013/02/">February 2013</a>&nbsp;(25)</li>
	<li><a href="http://ifeve.com/2013/01/">January 2013</a>&nbsp;(57)</li>
	<li><a href="http://ifeve.com/2012/12/">December 2012</a>&nbsp;(9)</li>
	<li><a href="http://ifeve.com/2012/10/">October 2012</a>&nbsp;(1)</li>
	<li><a href="http://ifeve.com/2012/08/">August 2012</a>&nbsp;(1)</li>
		</ul>
		</div>
 </div>
 <div id="side_right">
  <div class="side_box_short widget_links" id="linkcat-2">
<h3 class="side_title">友情链接</h3>

	<ul class="xoxo blogroll">
<li><a href="http://coolshell.cn/" rel="co-worker" target="_blank">coolshell</a></li>
<li><a href="http://blog.91gaoqing.com/" target="_blank">Programer. 大猫</a></li>
<li><a href="http://hugozhu.myalert.info/" rel="co-worker" target="_blank">一粟的博客</a></li>
<li><a href="http://blog.csdn.net/cutesource/" rel="acquaintance co-worker" target="_blank">志俊的博客</a></li>
<li><a href="http://www.zuidaima.com/">最代码</a></li>
<li><a href="http://diandianzhe.com/">点点折</a></li>
<li><a href="http://www.656463.com/">领悟书生</a></li>

	</ul>
</div>

<div class="side_box_short widget_categories" id="categories-2">
<h3 class="side_title">Categories</h3>
		<ul>
	<li class="cat-item cat-item-387"><a href="http://ifeve.com/category/framework/akka/">akka</a> (20)
</li>
	<li class="cat-item cat-item-415"><a href="http://ifeve.com/category/android/">Android</a> (3)
</li>
	<li class="cat-item cat-item-289"><a href="http://ifeve.com/category/c/">C++</a> (12)
</li>
	<li class="cat-item cat-item-366"><a href="http://ifeve.com/category/cpu-2/">CPU</a> (2)
</li>
	<li class="cat-item cat-item-73"><a href="http://ifeve.com/category/framework/">Framework</a> (52)
</li>
	<li class="cat-item cat-item-458"><a href="http://ifeve.com/category/go/">GO</a> (6)
</li>
	<li class="cat-item cat-item-617"><a href="http://ifeve.com/category/groovy/">groovy</a> (6)
</li>
	<li class="cat-item cat-item-310"><a href="http://ifeve.com/category/guava-2/">guava</a> (23)
</li>
	<li class="cat-item cat-item-69"><a href="http://ifeve.com/category/java/">JAVA</a> (677)
</li>
	<li class="cat-item cat-item-127"><a href="http://ifeve.com/category/jvm/">JVM</a> (37)
</li>
	<li class="cat-item cat-item-300"><a href="http://ifeve.com/category/linux/">linux</a> (8)
</li>
	<li class="cat-item cat-item-280"><a href="http://ifeve.com/category/netty/">Netty</a> (31)
</li>
	<li class="cat-item cat-item-632"><a href="http://ifeve.com/category/react/">react</a> (6)
</li>
	<li class="cat-item cat-item-623"><a href="http://ifeve.com/category/redis/">redis</a> (21)
</li>
	<li class="cat-item cat-item-166"><a href="http://ifeve.com/category/scala/">Scala</a> (11)
</li>
	<li class="cat-item cat-item-672"><a href="http://ifeve.com/category/spark/">spark</a> (19)
</li>
	<li class="cat-item cat-item-1011"><a href="http://ifeve.com/category/spring/">Spring</a> (13)
</li>
	<li class="cat-item cat-item-388"><a href="http://ifeve.com/category/storm/">storm</a> (44)
</li>
	<li class="cat-item cat-item-620"><a href="http://ifeve.com/category/thinking/">thinking</a> (3)
</li>
	<li class="cat-item cat-item-485"><a href="http://ifeve.com/category/velocity/">Velocity</a> (10)
</li>
	<li class="cat-item cat-item-279"><a href="http://ifeve.com/category/web/">Web</a> (18)
</li>
	<li class="cat-item cat-item-980"><a href="http://ifeve.com/category/zookeeper/">zookeeper</a> (1)
</li>
	<li class="cat-item cat-item-148"><a href="http://ifeve.com/category/notice/">公告</a> (5)
</li>
	<li class="cat-item cat-item-378"><a href="http://ifeve.com/category/bigdata/">大数据</a> (33)
</li>
	<li class="cat-item cat-item-138"><a href="http://ifeve.com/category/%e5%a5%bd%e6%96%87%e6%8e%a8%e8%8d%90/">好文推荐</a> (31)
</li>
	<li class="cat-item cat-item-244"><a href="http://ifeve.com/category/%e5%b9%b6%e5%8f%91%e4%b9%a6%e7%b1%8d/">并发书籍</a> (96)
</li>
	<li class="cat-item cat-item-29"><a href="http://ifeve.com/category/concurrency-translation/" title="发布国外并发编程相关文献译文。">并发译文</a> (391)
</li>
	<li class="cat-item cat-item-979"><a href="http://ifeve.com/category/%e6%84%9f%e6%82%9f/">感悟</a> (3)
</li>
	<li class="cat-item cat-item-7"><a href="http://ifeve.com/category/ask/" title="可以在这里发表并发编程的问题。如何发表？用QQ登陆，然后点击“新建文章”，管理员审核后就可以发表。">技术问答</a> (12)
</li>
	<li class="cat-item cat-item-147"><a href="http://ifeve.com/category/%e6%95%8f%e6%8d%b7%e7%ae%a1%e7%90%86/">敏捷管理</a> (6)
</li>
	<li class="cat-item cat-item-1"><a href="http://ifeve.com/category/talk-concurrent/">本站原创</a> (84)
</li>
	<li class="cat-item cat-item-367"><a href="http://ifeve.com/category/%e6%9e%b6%e6%9e%84/">架构</a> (28)
</li>
	<li class="cat-item cat-item-305"><a href="http://ifeve.com/category/%e6%b4%bb%e5%8a%a8/">活动</a> (6)
</li>
	<li class="cat-item cat-item-414"><a href="http://ifeve.com/category/%e7%bd%91%e7%bb%9c/">网络</a> (6)
</li>
		</ul>
</div>
 </div>
</div>
<div id="side_bottom">
 <div class="side_box widget_text" id="text-15">
			<div class="textwidget"><script async="" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/adsbygoogle.js"></script>
<!-- 摩天大楼 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-9394337417063147" data-ad-slot="6358703113" data-adsbygoogle-status="done"><ins id="aswift_4_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_4_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_4" name="aswift_4" style="left:0;position:absolute;top:0;width:300px;height:600px;" height="600" frameborder="0" width="300"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- 
<script type="text/javascript">
    /*自适应 创建于 June 30, 2016*/
    var cpro_id = "u2690738";

<script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/i.js"></script>
 -->

<!-- CNZZ -->
<script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/stat.php" language="JavaScript"></script><script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=5003572" target="_blank" title="站长统计"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/pic.gif" border="0" hspace="0" vspace="0"></a>
</div>
		</div>
</div>

  </div>
  
  <div id="footer">

<ul id="copyright">
    <li>Copyright ©&nbsp; <a href="http://ifeve.com/">并发编程网 – ifeve.com</a></li>
    <li>ICP号: <a href="http://www.miibeian.gov.cn/" target="_blank">浙ICP备12046809号</a></li>
 <li>	
<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602005873" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/a_007.html" style="float:left;">浙公网安备 33010602005873号</a></li>
   </ul>
		 
		 

 </div>

	
 </div><!-- END #main_content -->

  <p id="return_top" style="display: none;"><a href="#header">return top</a></p>
 
<link rel="stylesheet" id="yarppRelatedCss-css" href="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/related.css" type="text/css" media="all">
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/comment-reply.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"http:\/\/ifeve.com\/wp-content\/plugins\/wp-postratings","ajax_url":"http:\/\/ifeve.com\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 item at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src="http://ifeve.com/wp-content/plugins/wp-postratings/images/stars_crystal/rating_over.gif";;
/* ]]> */
</script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/postratings-js.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/ifeve.com\/wp-admin\/admin-ajax.php","post_id":"2167"};
/* ]]> */
</script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/postviews-cache.js"></script>
<script type="text/javascript" src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/wp-embed.js"></script>



<script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jquery.html"></script>

<script src="%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%20%7C%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%BD%91%20%E2%80%93%20ifeve.com_files/jquery_002.js"></script>

<!-- Dynamic page generated in 0.894 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2017-07-16 17:43:29 -->

<!-- Compression = gzip -->
<!-- super cache --><ins class="adsbygoogle" style="display: none; width: auto; height: auto;" data-adsbygoogle-status="done"><ins id="aswift_5_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent"><ins id="aswift_5_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_5" name="aswift_5" style="left:0;position:absolute;top:0;width:0px;height:0px;" height="0" frameborder="0" width="0"></iframe></ins></ins></ins></body></html>