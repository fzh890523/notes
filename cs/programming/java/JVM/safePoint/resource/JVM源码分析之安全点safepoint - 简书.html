<!DOCTYPE html>
<!--[if IE 6]><html class="ie lt-ie8"><![endif]-->
<!--[if IE 7]><html class="ie lt-ie8"><![endif]-->
<!--[if IE 8]><html class="ie ie8"><![endif]-->
<!--[if IE 9]><html class="ie ie9"><![endif]-->
<!--[if !IE]><!-->
<html><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">

  <!-- Start of Baidu Transcode -->
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta name="applicable-device" content="pc,mobile">
  <meta name="MobileOptimized" content="width">
  <meta name="HandheldFriendly" content="true">
  <meta name="mobile-agent" content="format=html5;url=http://www.jianshu.com/p/c79c5e02ebe6">
  <!-- End of Baidu Transcode -->

    <meta name="description" content="ç®€ä¹¦ å å°ç‹¼è½¬è½½è¯·æ³¨æ˜åŸåˆ›å‡ºå¤„ï¼Œè°¢è°¢ï¼ ä¸Šå‘¨æœ‰å¹¸å‚åŠ äº†ä¸€æ¬¡å…³äºJVMçš„å°èŒƒå›´åˆ†äº«ä¼šï¼Œå¬å®ŒRå¤§å¯¹è™šæ‹ŸæœºC2ç¼–è¯‘å™¨çš„è®²è§£ï¼Œæˆ‘çš„è†ç›–ä¸€ç›´æ˜¯è‚¿çš„ï¼Œèƒ½è®°ä½çš„å®åœ¨æœ‰ç‚¹å°‘ï¼Œèƒ½å¬è¿›å»ä¹Ÿä¸å¤š1ã€ä»€ä¹ˆæ—¶å€™è¿›è¡ŒC2ç¼–è¯‘ï¼Œå¦‚ä½•è¿›è¡ŒC2ç¼–è¯‘ï¼ˆè¿™ä¸ªå®åœ¨å¤ªå¤æ‚ï¼‰2ã€C2ç¼–è¯‘çš„æ—¶å€™ï¼Œæ˜¯å¯¹æ•´ä¸ªæ–¹æ³•ä½“è¿›è¡Œç¼–è¯‘ï¼Œè€Œä¸æ˜¯æŸä¸ªæ–¹æ³•æ®µ3ã€JVMä¸­çš„safepoint ä¸€ç›´éƒ½çŸ¥é“ï¼Œå½“å‘ç”ŸGCæ—¶ï¼Œæ­£åœ¨æ‰§è¡ŒJava codeçš„çº¿ç¨‹å¿…é¡»å…¨éƒ¨åœ...">

  <meta name="360-site-verification" content="604a14b53c6b871206001285921e81d8">
  <meta property="wb:webmaster" content="294ec9de89e7fadb">
  <meta property="qc:admins" content="104102651453316562112116375">
  <meta property="qc:admins" content="11635613706305617">
  <meta property="qc:admins" content="1163561616621163056375">
  <meta name="google-site-verification" content="cV4-qkUJZR6gmFeajx_UyPe47GW9vY6cnCrYtCHYNh4">
  <meta name="google-site-verification" content="HF7lfF8YEGs1qtCE-kPml8Z469e2RHhGajy6JPVy5XI">
  <meta http-equiv="mobile-agent" content="format=html5; url=http://www.jianshu.com/p/c79c5e02ebe6">

  <!-- Apple -->
  <meta name="apple-mobile-web-app-title" content="ç®€ä¹¦">

    <!--  Meta for Smart App Banner -->
  <meta name="apple-itunes-app" content="app-id=888237539, app-argument=jianshu://notes/11834889">
  <!-- End -->

  <!--  Meta for Twitter Card -->
  <meta content="summary" property="twitter:card">
  <meta content="@jianshucom" property="twitter:site">
  <meta content="JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint" property="twitter:title">
  <meta content="ç®€ä¹¦ å å°ç‹¼è½¬è½½è¯·æ³¨æ˜åŸåˆ›å‡ºå¤„ï¼Œè°¢è°¢ï¼ ä¸Šå‘¨æœ‰å¹¸å‚åŠ äº†ä¸€æ¬¡å…³äºJVMçš„å°èŒƒå›´åˆ†äº«ä¼šï¼Œå¬å®ŒRå¤§å¯¹è™šæ‹ŸæœºC2ç¼–è¯‘å™¨çš„è®²è§£ï¼Œæˆ‘çš„è†ç›–ä¸€ç›´æ˜¯è‚¿çš„ï¼Œèƒ½è®°ä½çš„å®åœ¨æœ‰ç‚¹å°‘ï¼Œèƒ½å¬è¿›å»ä¹Ÿä¸å¤š1ã€ä»€ä¹ˆæ—¶å€™è¿›è¡ŒC2ç¼–è¯‘ï¼Œå¦‚ä½•è¿›è¡ŒC2ç¼–è¯‘ï¼ˆè¿™ä¸ªå®åœ¨å¤ªå¤æ‚ï¼‰2ã€C2ç¼–è¯‘çš„æ—¶å€™ï¼Œæ˜¯å¯¹æ•´ä¸ªæ–¹æ³•ä½“è¿›è¡Œç¼–è¯‘ï¼Œè€Œä¸æ˜¯æŸä¸ªæ–¹æ³•æ®µ3ã€JVMä¸­çš„safepoint ä¸€ç›´éƒ½çŸ¥é“ï¼Œå½“å‘ç”ŸGCæ—¶ï¼Œæ­£åœ¨æ‰§è¡ŒJava codeçš„çº¿ç¨‹å¿…é¡»å…¨éƒ¨åœä¸‹æ¥ï¼Œæ‰å¯ä»¥è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™å°±æ˜¯ç†Ÿæ‚‰çš„STWï¼ˆstop the worldï¼‰ï¼Œä½†æ˜¯STWçš„èƒŒåå®ç°åŸç†ï¼Œæ¯”å¦‚è¿™äº›çº¿ç¨‹å¦‚ä½•æš‚åœã€åˆå¦‚ä½•æ¢å¤ï¼Ÿå°±æ¯”è¾ƒç–‘æƒ‘äº†ã€‚ ç„¶è€Œè¿™ä¸€åˆ‡çš„ä¸€åˆ‡ï¼Œéƒ½æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µsafepo..." property="twitter:description">
  <meta content="http://www.jianshu.com/p/c79c5e02ebe6" property="twitter:url">
  <!-- End -->

  <!--  Meta for OpenGraph -->
  <meta property="fb:app_id" content="865829053512461">
  <meta property="og:site_name" content="ç®€ä¹¦">
  <meta property="og:title" content="JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://www.jianshu.com/p/c79c5e02ebe6">
  <meta property="og:description" content="ç®€ä¹¦ å å°ç‹¼è½¬è½½è¯·æ³¨æ˜åŸåˆ›å‡ºå¤„ï¼Œè°¢è°¢ï¼ ä¸Šå‘¨æœ‰å¹¸å‚åŠ äº†ä¸€æ¬¡å…³äºJVMçš„å°èŒƒå›´åˆ†äº«ä¼šï¼Œå¬å®ŒRå¤§å¯¹è™šæ‹ŸæœºC2ç¼–è¯‘å™¨çš„è®²è§£ï¼Œæˆ‘çš„è†ç›–ä¸€ç›´æ˜¯è‚¿çš„ï¼Œèƒ½è®°ä½çš„å®åœ¨æœ‰ç‚¹å°‘ï¼Œèƒ½å¬è¿›å»ä¹Ÿä¸å¤š1ã€ä»€ä¹ˆæ—¶å€™è¿›è¡ŒC2ç¼–...">
  <!-- End -->

  <!--  Meta for Facebook Applinks -->
  <meta property="al:ios:url" content="jianshu://notes/11834889">
  <meta property="al:ios:app_store_id" content="888237539">
  <meta property="al:ios:app_name" content="ç®€ä¹¦">

  <meta property="al:android:url" content="jianshu://notes/11834889">
  <meta property="al:android:package" content="com.jianshu.haruki">
  <meta property="al:android:app_name" content="ç®€ä¹¦">
  <!-- End -->


    <title>JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint - ç®€ä¹¦</title>

  <meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="qBSYvo9rPpUMPXe2DrDS5Sj0K1gt+zXdkxUDgp8tfFOsiKxU9tYPDiKUKRwsEaFP6Y+wpImtQXizPb/2S8SlLg==">

  <link rel="stylesheet" media="all" href="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/web-1e5054a5d8733cfec67f.css">
  
  <link rel="stylesheet" media="all" href="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/entry-1e5054a5d8733cfec67f.css">

  <link href="http://cdn2.jianshu.io/assets/favicons/favicon-783beb88ed621ceab614de960376ac0c.ico" rel="icon">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/57-47624b2e2161e8eb144462c85db0a5ff.png" sizes="57x57">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/72-c00cde7cf98fc49e50cbb3ee1dcd5804.png" sizes="72x72">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/76-e8af0bdeaf1ba31e303b1fde8b5e66c4.png" sizes="76x76">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/114-f4c78569bbf1977e8382a5fd90c9237a.png" sizes="114x114">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/120-cf10c3711dba269522743729efe66bbc.png" sizes="120x120">
      <link rel="apple-touch-icon-precomposed" href="http://cdn2.jianshu.io/assets/apple-touch-icons/152-7bd60457b5f3ecbf1343f0e6241be4f8.png" sizes="152x152">
<link rel="stylesheet" href="blob:http://www.jianshu.com/46744b9f-b2db-9e47-91f2-0ab502b89349"><link rel="stylesheet" href="blob:http://www.jianshu.com/e16832ca-2537-2040-949c-c31d2d09570b"></head>

  <body class="reader-black-font" lang="zh-CN">
    <!-- å…¨å±€é¡¶éƒ¨å¯¼èˆªæ  -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="width-limit">
    <!-- å·¦ä¸Šæ–¹ Logo -->
    <a class="logo" href="http://www.jianshu.com/"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/logo-58fd04f6f0de908401aa561cda6a0688.png" alt="Logo"></a>

    <!-- å³ä¸Šè§’ -->
      <!-- ç™»å½•æ˜¾ç¤ºå†™æ–‡ç«  -->
      <a class="btn write-btn" target="_blank" href="http://www.jianshu.com/writer#/">
        <i class="iconfont ic-write"></i>å†™æ–‡ç« 
</a>
    <!-- å¦‚æœç”¨æˆ·ç™»å½•ï¼Œæ˜¾ç¤ºä¸‹æ‹‰èœå• -->
      <div class="user">
        <div data-hover="dropdown">
          <a class="avatar" href="http://www.jianshu.com/u/4b55ee401111"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/9-cceda3cf5072bcdd77e8ca4f21c40998.jpg" alt="120"></a>
        </div>
        <ul class="dropdown-menu">
          <li>
            <a href="http://www.jianshu.com/u/4b55ee401111">
              <i class="iconfont ic-navigation-profile"></i><span>æˆ‘çš„ä¸»é¡µ</span>
</a>          </li>
          <li>
            <!-- TODO bookmarks_path -->
            <a href="http://www.jianshu.com/bookmarks">
              <i class="iconfont ic-navigation-mark"></i><span>æ”¶è—çš„æ–‡ç« </span>
</a>          </li>
          <li>
            <a href="http://www.jianshu.com/users/4b55ee401111/liked_notes">
              <i class="iconfont ic-navigation-like"></i><span>å–œæ¬¢çš„æ–‡ç« </span>
</a>          </li>
          <li>
            <a href="http://www.jianshu.com/wallet">
              <i class="iconfont ic-navigation-wallet"></i><span>æˆ‘çš„é’±åŒ…</span>
</a>          </li>
          <li>
            <a href="http://www.jianshu.com/settings">
              <i class="iconfont ic-navigation-settings"></i><span>è®¾ç½®</span>
</a>          </li>
          <li>
            <a href="http://www.jianshu.com/faqs">
              <i class="iconfont ic-navigation-feedback"></i><span>å¸®åŠ©ä¸åé¦ˆ</span>
</a>          </li>
          <li>
            <a rel="nofollow" data-method="delete" href="http://www.jianshu.com/sign_out">
              <i class="iconfont ic-navigation-signout"></i><span>é€€å‡º</span>
</a>          </li>
        </ul>
      </div>

    <div class="style-mode"><a class="style-mode-btn"><i class="iconfont ic-navigation-mode"></i></a> <div class="popover-modal" style="left: 0px; display: none;"><div class="meta"><i class="iconfont ic-navigation-night"></i><span>å¤œé—´æ¨¡å¼</span></div> <div class="switch day-night-group"><a class="switch-btn">å¼€</a> <a class="switch-btn active">å…³</a></div> <hr> <div class="switch font-family-group"><a class="switch-btn font-song">å®‹ä½“</a> <a class="switch-btn font-hei active">é»‘ä½“</a></div> <div class="switch"><a class="switch-btn active">ç®€</a> <a class="switch-btn">ç¹</a></div></div></div>
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu" aria-expanded="false">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="nav navbar-nav">
            <li class="">
              <a href="http://www.jianshu.com/">
                <span class="menu-text">å‘ç°</span><i class="iconfont ic-navigation-discover menu-icon"></i>
</a>            </li>
            <li class="">
              <a href="http://www.jianshu.com/subscriptions">
                <span class="menu-text">å…³æ³¨</span><i class="iconfont ic-navigation-follow menu-icon"></i>
</a>            </li>
            <li class="notification"><a data-hover="dropdown" href="http://www.jianshu.com/notifications" class="notification-btn"><span class="menu-text">æ¶ˆæ¯</span> <i class="iconfont ic-navigation-notification menu-icon"></i> <!----> <!----></a> <ul class="dropdown-menu"><li><a href="http://www.jianshu.com/notifications#/comments"><i class="iconfont ic-comments"></i> <span>è¯„è®º</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/chats"><i class="iconfont ic-chats"></i> <span>ç®€ä¿¡</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/requests"><i class="iconfont ic-requests"></i> <span>æŠ•ç¨¿è¯·æ±‚</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/likes"><i class="iconfont ic-likes"></i> <span>å–œæ¬¢å’Œèµ</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/follows"><i class="iconfont ic-follows"></i> <span>å…³æ³¨</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/money"><i class="iconfont ic-money"></i> <span>èµèµ</span> <!----></a></li><li><a href="http://www.jianshu.com/notifications#/others"><i class="iconfont ic-others"></i> <span>å…¶ä»–æ¶ˆæ¯</span> <!----></a></li></ul></li>
          <li class="search">
            <form target="_blank" action="/search" accept-charset="UTF-8" method="get"><input name="utf8" value="âœ“" type="hidden">
              <input name="q" id="q" placeholder="æœç´¢" class="search-input" type="text">
              <a class="search-btn" href="javascript:void(null)"><i class="iconfont ic-search"></i></a>
              <!-- <div id="navbar-trending-search"></div> -->
</form>          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

    
<div class="note">
  <div class="post">
    <div class="article">
        <h1 class="title">JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint</h1>

        <!-- ä½œè€…åŒºåŸŸ -->
        <div class="author">
          <a class="avatar" href="http://www.jianshu.com/u/90ab66c248e6">
            <img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/e504c85fb1dc.png" alt="144">
</a>          <div class="info">
            <span class="tag">ä½œè€…</span>
            <span class="name"><a href="http://www.jianshu.com/u/90ab66c248e6">å å°ç‹¼</a></span>
            <!-- å…³æ³¨ç”¨æˆ·æŒ‰é’® -->
            <a class="btn btn-default following"><i class="iconfont ic-followed"></i><span>å·²å…³æ³¨</span></a>
            <!-- æ–‡ç« æ•°æ®ä¿¡æ¯ -->
            <div class="meta">
              <!-- å¦‚æœæ–‡ç« æ›´æ–°æ—¶é—´å¤§äºå‘å¸ƒæ—¶é—´ï¼Œé‚£ä¹ˆä½¿ç”¨ tooltip æ˜¾ç¤ºæ›´æ–°æ—¶é—´ -->
                <span class="publish-time">2017.04.30 14:47</span>
              <span class="wordage">å­—æ•° 1835</span>
            <span class="views-count">é˜…è¯» 1226</span><span class="comments-count">è¯„è®º 8</span><span class="likes-count">å–œæ¬¢ 18</span></div>
          </div>
          <!-- å¦‚æœæ˜¯å½“å‰ä½œè€…ï¼ŒåŠ å…¥ç¼–è¾‘æŒ‰é’® -->
        </div>
        <!-- -->

        <!-- æ–‡ç« å†…å®¹ -->
        <div data-note-content="" class="show-content">
          <blockquote><p>ç®€ä¹¦ <a href="http://www.jianshu.com/users/90ab66c248e6/latest_articles" target="_blank">å å°ç‹¼</a><br>è½¬è½½è¯·æ³¨æ˜åŸåˆ›å‡ºå¤„ï¼Œè°¢è°¢ï¼</p></blockquote>
<p>ä¸Šå‘¨æœ‰å¹¸å‚åŠ äº†ä¸€æ¬¡å…³äºJVMçš„å°èŒƒå›´åˆ†äº«ä¼šï¼Œå¬å®ŒRå¤§å¯¹è™šæ‹ŸæœºC2ç¼–è¯‘å™¨çš„è®²è§£ï¼Œæˆ‘çš„è†ç›–ä¸€ç›´æ˜¯è‚¿çš„ï¼Œèƒ½è®°ä½çš„å®åœ¨æœ‰ç‚¹å°‘ï¼Œèƒ½å¬è¿›å»ä¹Ÿä¸å¤š<br>1ã€ä»€ä¹ˆæ—¶å€™è¿›è¡ŒC2ç¼–è¯‘ï¼Œå¦‚ä½•è¿›è¡ŒC2ç¼–è¯‘ï¼ˆè¿™ä¸ªå®åœ¨å¤ªå¤æ‚ï¼‰<br>2ã€C2ç¼–è¯‘çš„æ—¶å€™ï¼Œæ˜¯å¯¹æ•´ä¸ªæ–¹æ³•ä½“è¿›è¡Œç¼–è¯‘ï¼Œè€Œä¸æ˜¯æŸä¸ªæ–¹æ³•æ®µ<br>3ã€JVMä¸­çš„safepoint</p>
<p>ä¸€ç›´éƒ½çŸ¥é“ï¼Œå½“å‘ç”ŸGCæ—¶ï¼Œæ­£åœ¨æ‰§è¡ŒJava codeçš„çº¿ç¨‹å¿…é¡»å…¨éƒ¨åœä¸‹æ¥ï¼Œæ‰å¯ä»¥è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™å°±æ˜¯ç†Ÿæ‚‰çš„STWï¼ˆstop the worldï¼‰ï¼Œä½†æ˜¯STWçš„èƒŒåå®ç°åŸç†ï¼Œæ¯”å¦‚è¿™äº›çº¿ç¨‹å¦‚ä½•æš‚åœã€åˆå¦‚ä½•æ¢å¤ï¼Ÿå°±æ¯”è¾ƒç–‘æƒ‘äº†ã€‚</p>
<div class="image-package">
<img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/2184951-877439e958624bfa.png" data-original-src="http://upload-images.jianshu.io/upload_images/2184951-877439e958624bfa.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="cursor: zoom-in;"><br><div class="image-caption"></div>
</div>
<p>ç„¶è€Œè¿™ä¸€åˆ‡çš„ä¸€åˆ‡ï¼Œéƒ½æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µsafepointï¼Œopenjdkçš„å®ç°ä½äº<code>openjdk/hotspot/src/share/vm/runtime/safepoint.cpp</code></p>
<h3>ä»€ä¹ˆæ˜¯safepoint</h3>
<p>safepointå¯ä»¥ç”¨åœ¨ä¸åŒåœ°æ–¹ï¼Œæ¯”å¦‚GCã€Deoptimizationï¼Œåœ¨Hotspot VMä¸­ï¼ŒGC safepointæ¯”è¾ƒå¸¸è§ï¼Œéœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„è®°å½•æ¯ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆã€å¯„å­˜å™¨ç­‰ä¸€äº›é‡è¦çš„æ•°æ®åŒºåŸŸé‡Œä»€ä¹ˆåœ°æ–¹åŒ…å«äº†GCç®¡ç†çš„æŒ‡é’ˆã€‚</p>
<p>ä»çº¿ç¨‹è§’åº¦çœ‹ï¼Œsafepointå¯ä»¥ç†è§£æˆæ˜¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›ç‰¹æ®Šä½ç½®ï¼Œå½“çº¿ç¨‹æ‰§è¡Œåˆ°è¿™äº›ä½ç½®çš„æ—¶å€™ï¼Œè¯´æ˜è™šæ‹Ÿæœºå½“å‰çš„çŠ¶æ€æ˜¯å®‰å…¨çš„ï¼Œå¦‚æœ
æœ‰éœ€è¦ï¼Œå¯ä»¥åœ¨è¿™ä¸ªä½ç½®æš‚åœï¼Œæ¯”å¦‚å‘ç”ŸGCæ—¶ï¼Œéœ€è¦æš‚åœæš‚åœæ‰€ä»¥æ´»åŠ¨çº¿ç¨‹ï¼Œä½†æ˜¯çº¿ç¨‹åœ¨è¿™ä¸ªæ—¶åˆ»ï¼Œè¿˜æ²¡æœ‰æ‰§è¡Œåˆ°ä¸€ä¸ªå®‰å…¨ç‚¹ï¼Œæ‰€ä»¥è¯¥çº¿ç¨‹åº”è¯¥ç»§ç»­æ‰§è¡Œï¼Œåˆ°è¾¾ä¸‹
ä¸€ä¸ªå®‰å…¨ç‚¹çš„æ—¶å€™æš‚åœï¼Œç­‰å¾…GCç»“æŸã€‚</p>
<h3>ä»€ä¹ˆåœ°æ–¹å¯ä»¥æ”¾safepoint</h3>
<p>ä¸‹é¢ä»¥Hotspotä¸ºä¾‹ï¼Œç®€å•çš„è¯´æ˜ä¸€ä¸‹ä»€ä¹ˆåœ°æ–¹ä¼šæ”¾ç½®safepoint<br>1ã€ç†è®ºä¸Šï¼Œåœ¨è§£é‡Šå™¨çš„æ¯æ¡å­—èŠ‚ç çš„è¾¹ç•Œéƒ½å¯ä»¥æ”¾ä¸€ä¸ª
safepointï¼Œä¸è¿‡æŒ‚åœ¨safepointçš„è°ƒè¯•ç¬¦å·ä¿¡æ¯è¦å ç”¨å†…å­˜ç©ºé—´ï¼Œå¦‚æœæ¯æ¡æœºå™¨ç åé¢éƒ½åŠ safepointçš„è¯ï¼Œéœ€è¦ä¿å­˜å¤§é‡çš„è¿è¡Œæ—¶æ•°
æ®ï¼Œæ‰€ä»¥è¦å°½é‡å°‘æ”¾ç½®safepointï¼Œåœ¨safepointä¼šç”Ÿæˆpollingä»£ç è¯¢é—®VMæ˜¯å¦è¦â€œè¿›å…¥safepointâ€ï¼Œpollingæ“ä½œ
ä¹Ÿæ˜¯æœ‰å¼€é”€çš„ï¼Œpollingæ“ä½œä¼šåœ¨åç»­è§£é‡Šã€‚</p>
<p>2ã€é€šè¿‡JITç¼–è¯‘çš„ä»£ç é‡Œï¼Œä¼šåœ¨æ‰€æœ‰æ–¹æ³•çš„è¿”å›ä¹‹å‰ï¼Œä»¥åŠæ‰€æœ‰écounted 
loopçš„å¾ªç¯ï¼ˆæ— ç•Œå¾ªç¯ï¼‰å›è·³ä¹‹å‰æ”¾ç½®ä¸€ä¸ªsafepointï¼Œä¸ºäº†é˜²æ­¢å‘ç”ŸGCéœ€è¦STWæ—¶ï¼Œè¯¥çº¿ç¨‹ä¸€ç›´ä¸èƒ½æš‚åœã€‚å¦å¤–ï¼ŒJITç¼–è¯‘å™¨åœ¨ç”Ÿæˆæœºå™¨ç çš„
åŒæ—¶ä¼šä¸ºæ¯ä¸ªsafepointç”Ÿæˆä¸€äº›â€œè°ƒè¯•ç¬¦å·ä¿¡æ¯â€ï¼Œä¸ºGCç”Ÿæˆçš„ç¬¦å·ä¿¡æ¯æ˜¯OopMapï¼ŒæŒ‡å‡ºæ ˆä¸Šå’Œå¯„å­˜å™¨é‡Œå“ªé‡Œæœ‰GCç®¡ç†çš„æŒ‡é’ˆã€‚</p>
<h3>çº¿ç¨‹å¦‚ä½•è¢«æŒ‚èµ·</h3>
<p>å¦‚æœè§¦å‘GCåŠ¨ä½œï¼ŒVM threadä¼šåœ¨<code>VMThread::loop()</code>æ–¹æ³•ä¸­è°ƒç”¨<code>SafepointSynchronize::begin()</code>æ–¹æ³•ï¼Œæœ€ç»ˆä½¿æ‰€æœ‰çš„çº¿ç¨‹éƒ½è¿›å…¥åˆ°safepointã€‚</p>
<pre class="hljs lasso"><code class="lasso"><span class="hljs-comment">// Roll all threads forward to a safepoint and suspend them all</span>
<span class="hljs-literal">void</span> SafepointSynchronize<span class="hljs-type">::begin</span>() {
  <span class="hljs-keyword">Thread</span>* myThread = <span class="hljs-keyword">Thread</span><span class="hljs-type">::current</span>();
  assert(myThread-&gt;is_VM_thread(), <span class="hljs-string">"Only VM thread may execute a safepoint"</span>);

  <span class="hljs-keyword">if</span> (PrintSafepointStatistics || PrintSafepointStatisticsTimeout &gt; <span class="hljs-number">0</span>) {
    _safepoint_begin_time = os<span class="hljs-type">::javaTimeNanos</span>();
    _ts_of_current_safepoint = tty-&gt;time_stamp().seconds();
  }</code></pre>
<p>åœ¨safepointå®ç°ä¸­ï¼Œæœ‰è¿™æ ·ä¸€æ®µæ³¨é‡Šï¼ŒJava threadså¯ä»¥æœ‰å¤šç§ä¸åŒçš„çŠ¶æ€ï¼Œæ‰€ä»¥æŒ‚èµ·çš„æœºåˆ¶ä¹Ÿä¸åŒï¼Œä¸€å…±åˆ—ä¸¾äº†5ä¸­æƒ…å†µï¼š<br></p><div class="image-package">
<img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/2184951-1359753fecd1352a.png" data-original-src="http://upload-images.jianshu.io/upload_images/2184951-1359753fecd1352a.png?imageMogr2/auto-orient/strip%7CimageView2/2" style="cursor: zoom-in;"><br><div class="image-caption"></div>
</div>
<h4>1ã€æ‰§è¡ŒJava code</h4>
<p>åœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶ä¼šæ£€æŸ¥safepointçŠ¶æ€ï¼Œå› ä¸ºåœ¨<code>begin</code>æ–¹æ³•ä¸­ä¼šè°ƒç”¨<code>Interpreter::notice_safepoints()</code>æ–¹æ³•ï¼Œé€šçŸ¥è§£é‡Šå™¨æ›´æ–°dispatch tableï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre class="hljs sqf"><code class="sqf">void TemplateInterpreter::notice_safepoints() {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable">_notice_safepoints</span>) {
    <span class="hljs-comment">// switch to safepoint dispatch table</span>
    <span class="hljs-variable">_notice_safepoints</span> = <span class="hljs-literal">true</span>;
    copy_table((address*)&amp;<span class="hljs-variable">_safept_table</span>, (address*)&amp;<span class="hljs-variable">_active_table</span>, <span class="hljs-built_in">sizeof</span>(<span class="hljs-variable">_active_table</span>) / <span class="hljs-built_in">sizeof</span>(address));
  }
}</code></pre>
<h4>2ã€æ‰§è¡Œnative code</h4>
<p>å¦‚æœVM threadå‘ç°ä¸€ä¸ªJava threadæ­£åœ¨æ‰§è¡Œnative codeï¼Œå¹¶ä¸ä¼šç­‰å¾…è¯¥Java threadé˜»å¡ï¼Œä¸è¿‡å½“è¯¥Java threadä»native codeè¿”å›æ—¶ï¼Œå¿…é¡»æ£€æŸ¥safepointçŠ¶æ€ï¼Œçœ‹æ˜¯å¦éœ€è¦è¿›è¡Œé˜»å¡ã€‚</p>
<p>è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªçŠ¶æ€ï¼šJava thread stateå’Œsafepoint stateï¼Œä¸¤è€…ä¹‹é—´æœ‰ç€ä¸¥æ ¼çš„è¯»å†™é¡ºåºï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡å†…å­˜å±éšœå®ç°ï¼Œä½†æ˜¯æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§ï¼ŒHotspoté‡‡ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œè°ƒç”¨<code>os::serialize_thread_states()</code>æŠŠæ¯ä¸ªçº¿ç¨‹çš„çŠ¶æ€ä¾æ¬¡å†™å…¥åˆ°åŒä¸€ä¸ªå†…å­˜é¡µä¸­ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre class="hljs lasso"><code class="lasso"><span class="hljs-comment">// Serialize all thread state variables</span>
<span class="hljs-literal">void</span> os<span class="hljs-type">::serialize_thread_states</span>() {
  <span class="hljs-comment">// On some platforms such as Solaris &amp; Linux, the time duration of the page</span>
  <span class="hljs-comment">// permission restoration is observed to be much longer than expected  due to</span>
  <span class="hljs-comment">// scheduler starvation problem etc. To avoid the long synchronization</span>
  <span class="hljs-comment">// time and expensive page trap spinning, 'SerializePageLock' is used to block</span>
  <span class="hljs-comment">// the mutator thread if such case is encountered. See bug 6546278 for details.</span>
  <span class="hljs-keyword">Thread</span><span class="hljs-type">::muxAcquire</span>(&amp;SerializePageLock, <span class="hljs-string">"serialize_thread_states"</span>);
  os<span class="hljs-type">::protect_memory</span>((char *)os<span class="hljs-type">::get_memory_serialize_page</span>(),
                     os<span class="hljs-type">::vm_page_size</span>(), MEM_PROT_READ);
  os<span class="hljs-type">::protect_memory</span>((char *)os<span class="hljs-type">::get_memory_serialize_page</span>(),
                     os<span class="hljs-type">::vm_page_size</span>(), MEM_PROT_RW);
  <span class="hljs-keyword">Thread</span><span class="hljs-type">::muxRelease</span>(&amp;SerializePageLock);
}</code></pre>
<p>é€šè¿‡VM threadæ‰§è¡Œä¸€ç³»åˆ—mprotect os callï¼Œä¿è¯ä¹‹å‰æ‰€æœ‰çº¿ç¨‹çŠ¶æ€çš„å†™å…¥å¯ä»¥è¢«é¡ºåºæ‰§è¡Œï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<h4>3ã€æ‰§è¡Œcomplied code</h4>
<p>å¦‚æœæƒ³è¿›å…¥safepointï¼Œåˆ™è®¾ç½®polling pageä¸å¯è¯»ï¼Œå½“Java threadå‘ç°è¯¥å†…å­˜é¡µä¸å¯è¯»æ—¶ï¼Œæœ€ç»ˆä¼šè¢«é˜»å¡æŒ‚èµ·ã€‚åœ¨<code>SafepointSynchronize::begin()</code>æ–¹æ³•ä¸­ï¼Œé€šè¿‡<code>os::make_polling_page_unreadable()</code>æ–¹æ³•è®¾ç½®polling pageä¸ºä¸å¯è¯»ã€‚</p>
<pre class="hljs cpp"><code class="cpp"><span class="hljs-keyword">if</span> (UseCompilerSafepoints &amp;&amp; DeferPollingPageLoopCount &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// Make polling safepoint aware</span>
    guarantee (PageArmed == <span class="hljs-number">0</span>, <span class="hljs-string">"invariant"</span>) ;
    PageArmed = <span class="hljs-number">1</span> ;
    os::make_polling_page_unreadable();
}</code></pre>
<p>æ–¹æ³•<code>make_polling_page_unreadable()</code>åœ¨ä¸åŒç³»ç»Ÿçš„å®ç°ä¸ä¸€æ ·</p>
<pre class="hljs groovy"><code class="groovy">linuxä¸‹å®ç°
<span class="hljs-comment">// Mark the polling page as unreadable</span>
<span class="hljs-keyword">void</span> <span class="hljs-string">os:</span>:make_polling_page_unreadable(<span class="hljs-keyword">void</span>) {
  <span class="hljs-keyword">if</span>( !guard_memory((<span class="hljs-keyword">char</span>*)_polling_page, <span class="hljs-string">Linux:</span>:page_size()) )
    fatal(<span class="hljs-string">"Could not disable polling page"</span>);
};

solarisä¸‹å®ç°
<span class="hljs-comment">// Mark the polling page as unreadable</span>
<span class="hljs-keyword">void</span> <span class="hljs-string">os:</span>:make_polling_page_unreadable(<span class="hljs-keyword">void</span>) {
  <span class="hljs-keyword">if</span>( mprotect((<span class="hljs-keyword">char</span> *)_polling_page, page_size, PROT_NONE) != <span class="hljs-number">0</span> )
    fatal(<span class="hljs-string">"Could not disable polling page"</span>);
};</code></pre>
<p>åœ¨JITç¼–è¯‘ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŠŠsafepointæ£€æŸ¥çš„æ“ä½œæ’å…¥åˆ°æœºå™¨ç æŒ‡ä»¤ä¸­ï¼Œæ¯”å¦‚ä¸‹é¢çš„æŒ‡ä»¤ï¼š</p>
<pre class="hljs x86asm"><code class="x86asm"><span class="hljs-number">0x01b6d627</span>: <span class="hljs-keyword">call</span>   <span class="hljs-number">0x01b2b210</span>         <span class="hljs-comment">; OopMap{[60]=Oop off=460}      </span>
                                       <span class="hljs-comment">;*invokeinterface size      </span>
                                       <span class="hljs-comment">; - Client1::main@113 (line 23)      </span>
                                       <span class="hljs-comment">;   {virtual_call}      </span>
 <span class="hljs-number">0x01b6d62c</span>: <span class="hljs-keyword">nop</span>                       <span class="hljs-comment">; OopMap{[60]=Oop off=461}      </span>
                                       <span class="hljs-comment">;*if_icmplt      </span>
                                       <span class="hljs-comment">; - Client1::main@118 (line 23)      </span>
 <span class="hljs-number">0x01b6d62d</span>: <span class="hljs-keyword">test</span>   %eax,<span class="hljs-number">0x160100</span>      <span class="hljs-comment">;   {poll}      </span>
 <span class="hljs-number">0x01b6d633</span>: <span class="hljs-keyword">mov</span>    <span class="hljs-number">0x50</span>(%esp),%esi      
 <span class="hljs-number">0x01b6d637</span>: <span class="hljs-keyword">cmp</span>    %eax,%esi</code></pre>
<p>test  %eax,0x160100 å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥polling pageæ˜¯å¦å¯è¯»çš„æ“ä½œï¼Œå¦‚æœä¸å¯è¯»ï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ç­‰å¾…ã€‚</p>
<h4>4ã€çº¿ç¨‹å¤„äºBlockçŠ¶æ€</h4>
<p>å³ä½¿çº¿ç¨‹å·²ç»æ»¡è¶³äº†block conditionï¼Œä¹Ÿè¦ç­‰åˆ°safepoint operationå®Œæˆï¼Œå¦‚GCæ“ä½œï¼Œæ‰èƒ½è¿”å›ã€‚</p>
<h4>5ã€çº¿ç¨‹æ­£åœ¨è½¬æ¢çŠ¶æ€</h4>
<p>ä¼šå»æ£€æŸ¥safepointçŠ¶æ€ï¼Œå¦‚æœéœ€è¦é˜»å¡ï¼Œå°±æŠŠè‡ªå·±æŒ‚èµ·ã€‚  </p>
<h4>æœ€ç»ˆå®ç°</h4>
<p>å½“çº¿ç¨‹è®¿é—®åˆ°è¢«ä¿æŠ¤çš„å†…å­˜åœ°å€æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªSIGSEGVä¿¡å·ï¼Œè¿›è€Œè§¦å‘JVMçš„signal handleræ¥é˜»å¡è¿™ä¸ªçº¿ç¨‹ï¼ŒThe GC 
thread can protect some memory to which all threads in the process can 
write (using the mprotect system call) so they no longer can. Upon 
accessing this temporarily forbidden memory, a signal handler kicks inã€‚</p>
<p>å†çœ‹çœ‹åº•å±‚æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªSIGSEGVä¿¡å·ï¼Œå®ç°ä½äº<code>hotspot/src/os_cpu/linux_x86/vm/os_linux_x86.cpp</code></p>
<pre class="hljs lasso"><code class="lasso"><span class="hljs-comment">// Check to see if we caught the safepoint code in the</span>
<span class="hljs-comment">// process of write protecting the memory serialization page.</span>
<span class="hljs-comment">// It write enables the page immediately after protecting it</span>
<span class="hljs-comment">// so we can just return to retry the write.</span>
<span class="hljs-keyword">if</span> ((sig == SIGSEGV) &amp;&amp;
    os<span class="hljs-type">::is_memory_serialize_page</span>(<span class="hljs-keyword">thread</span>, (address) info-&gt;si_addr)) {
  <span class="hljs-comment">// Block current thread until the memory serialize page permission restored.</span>
  os<span class="hljs-type">::block_on_serialize_page_trap</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}</code></pre>
<p>æ‰§è¡Œ<code>os::block_on_serialize_page_trap()</code>æŠŠå½“å‰çº¿ç¨‹é˜»å¡æŒ‚èµ·ã€‚</p>
<h3>çº¿ç¨‹å¦‚ä½•æ¢å¤</h3>
<p>æœ‰äº†<code>begin</code>æ–¹æ³•ï¼Œè‡ªç„¶æœ‰å¯¹åº”çš„<code>end</code>æ–¹æ³•ï¼Œåœ¨<code>SafepointSynchronize::end()</code>ä¸­ï¼Œä¼šæœ€ç»ˆå”¤é†’æ‰€æœ‰æŒ‚èµ·ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¤§æ¦‚å®ç°å¦‚ä¸‹ï¼š<br>1ã€é‡æ–°è®¾ç½®pooling pageä¸ºå¯è¯»</p>
<pre class="hljs cpp"><code class="cpp">  <span class="hljs-keyword">if</span> (PageArmed) {
    <span class="hljs-comment">// Make polling safepoint aware</span>
    os::make_polling_page_readable();
    PageArmed = <span class="hljs-number">0</span> ;
  }</code></pre>
<p>2ã€è®¾ç½®è§£é‡Šå™¨ä¸ºignore_safepointsï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<pre class="hljs sqf"><code class="sqf"><span class="hljs-comment">// switch from the dispatch table which notices safepoints back to the</span>
<span class="hljs-comment">// normal dispatch table.  So that we can notice single stepping points,</span>
<span class="hljs-comment">// keep the safepoint dispatch table if we are single stepping in JVMTI.</span>
<span class="hljs-comment">// Note that the should_post_single_step test is exactly as fast as the</span>
<span class="hljs-comment">// JvmtiExport::_enabled test and covers both cases.</span>
void TemplateInterpreter::ignore_safepoints() {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable">_notice_safepoints</span>) {
    <span class="hljs-keyword">if</span> (!JvmtiExport::should_post_single_step()) {
      <span class="hljs-comment">// switch to normal dispatch table</span>
      <span class="hljs-variable">_notice_safepoints</span> = <span class="hljs-literal">false</span>;
      copy_table((address*)&amp;<span class="hljs-variable">_normal_table</span>, (address*)&amp;<span class="hljs-variable">_active_table</span>, <span class="hljs-built_in">sizeof</span>(<span class="hljs-variable">_active_table</span>) / <span class="hljs-built_in">sizeof</span>(address));
    }
  }
}</code></pre>
<p>3ã€å”¤é†’æ‰€æœ‰æŒ‚èµ·ç­‰å¾…çš„çº¿ç¨‹</p>
<pre class="hljs php"><code class="php"><span class="hljs-comment">// Start suspended threads</span>
    <span class="hljs-keyword">for</span>(JavaThread *current = Threads::first(); current; current = current-&gt;next()) {
      <span class="hljs-comment">// A problem occurring on Solaris is when attempting to restart threads</span>
      <span class="hljs-comment">// the first #cpus - 1 go well, but then the VMThread is preempted when we get</span>
      <span class="hljs-comment">// to the next one (since it has been running the longest).  We then have</span>
      <span class="hljs-comment">// to wait for a cpu to become available before we can continue restarting</span>
      <span class="hljs-comment">// threads.</span>
      <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> This causes the performance of the VM to degrade when active and with</span>
      <span class="hljs-comment">// large numbers of threads.  Apparently this is due to the synchronous nature</span>
      <span class="hljs-comment">// of suspending threads.</span>
      <span class="hljs-comment">//</span>
      <span class="hljs-comment">// TODO-<span class="hljs-doctag">FIXME:</span> the comments above are vestigial and no longer apply.</span>
      <span class="hljs-comment">// Furthermore, using solaris' schedctl in this particular context confers no benefit</span>
      <span class="hljs-keyword">if</span> (VMThreadHintNoPreempt) {
        os::hint_no_preempt();
      }
      ThreadSafepointState* cur_state = current-&gt;safepoint_state();
      assert(cur_state-&gt;type() != ThreadSafepointState::_running, <span class="hljs-string">"Thread not suspended at safepoint"</span>);
      cur_state-&gt;restart();
      assert(cur_state-&gt;is_running(), <span class="hljs-string">"safepoint state has not been reset"</span>);
    }</code></pre>
<h3>å¯¹JVMæ€§èƒ½æœ‰ä»€ä¹ˆå½±å“</h3>
<p>é€šè¿‡è®¾ç½®JVMå‚æ•° <code>-XX:+PrintGCApplicationStoppedTime</code>ï¼Œ å¯ä»¥æ‰“å‡ºç³»ç»Ÿåœæ­¢çš„æ—¶é—´ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<pre class="hljs applescript"><code class="applescript">Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0051000</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0041930</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0051210</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0050940</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0058720</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">5.1298200</span> seconds
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0197290</span> seconds  
Total <span class="hljs-built_in">time</span> <span class="hljs-keyword">for</span> which <span class="hljs-built_in">application</span> threads were stopped: <span class="hljs-number">0.0087590</span> seconds</code></pre>
<p>ä»ä¸Šé¢æ•°æ®å¯ä»¥å‘ç°ï¼Œæœ‰ä¸€æ¬¡æš‚åœæ—¶é—´ç‰¹åˆ«é•¿ï¼Œè¾¾åˆ°äº†5ç§’å¤šï¼Œè¿™åœ¨çº¿ä¸Šç¯å¢ƒè‚¯å®šæ˜¯æ— æ³•å¿å—çš„ï¼Œé‚£ä¹ˆæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªå¤§æ¦‚ç‡çš„åŸå› æ˜¯å½“å‘ç”ŸGCæ—¶ï¼Œæœ‰çº¿ç¨‹è¿Ÿè¿Ÿè¿›å…¥ä¸åˆ°safepointè¿›è¡Œé˜»å¡ï¼Œå¯¼è‡´å…¶ä»–å·²ç»åœæ­¢çš„çº¿ç¨‹ä¹Ÿä¸€ç›´ç­‰å¾…ï¼ŒVM 
Threadä¹Ÿåœ¨ç­‰å¾…æ‰€æœ‰çš„Javaçº¿ç¨‹æŒ‚èµ·æ‰èƒ½å¼€å§‹GCï¼Œè¿™é‡Œéœ€è¦åˆ†æä¸šåŠ¡ä»£ç ä¸­æ˜¯å¦å­˜åœ¨æœ‰ç•Œçš„å¤§å¾ªç¯é€»è¾‘ï¼Œå¯èƒ½åœ¨JITä¼˜åŒ–æ—¶ï¼Œè¿™äº›å¾ªç¯æ“ä½œæ²¡æœ‰æ’å…¥
safepointæ£€æŸ¥ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š<br><a href="http://blog.csdn.net/iter_zc/article/details/41892567" target="_blank">èŠèŠJVMï¼ˆä¹ï¼‰ç†è§£è¿›å…¥safepointæ—¶å¦‚ä½•è®©Javaçº¿ç¨‹å…¨éƒ¨é˜»å¡</a><br><a href="https://www.zhihu.com/question/29268019" target="_blank">ç°ä»£JVMä¸­çš„Safe Regionå’ŒSafe Pointåˆ°åº•æ˜¯å¦‚ä½•å®šä¹‰å’Œåˆ’åˆ†çš„?
</a><br><a href="http://stackoverflow.com/questions/20134769/how-to-get-java-stacks-when-jvm-cant-reach-a-safepoint" target="_blank">How to get Java stacks when JVM can't reach a safepoint</a><br><a href="http://blog.ragozin.info/2012/10/safepoints-in-hotspot-jvm.html" target="_blank">Safepoints in HotSpot JVM</a></p>

        </div>
        <!--  -->

        <div class="show-foot">
          <a class="notebook" href="http://www.jianshu.com/nb/12554212">
            <i class="iconfont ic-search-notebook"></i> <span>JVMæºç åˆ†æ</span>
</a>          <div class="copyright" data-toggle="tooltip" data-html="true" data-original-title="è½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œå¹¶æ ‡æ³¨â€œç®€ä¹¦ä½œè€…â€ã€‚">
            Â© è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰
          </div>
          <div class="modal-wrap" data-report-note="">
            <a id="report-modal">ä¸¾æŠ¥æ–‡ç« </a>
          </div>
        </div>
    </div>

    <!-- æ–‡ç« åº•éƒ¨ä½œè€…ä¿¡æ¯ -->
      <div class="follow-detail">
        <div class="info">
          <a class="avatar" href="http://www.jianshu.com/u/90ab66c248e6">
            <img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/e504c85fb1dc.png" alt="144">
</a>          <a class="btn btn-default following"><i class="iconfont ic-followed"></i><span>å·²å…³æ³¨</span></a>
          <a class="title" href="http://www.jianshu.com/u/90ab66c248e6">å å°ç‹¼</a>
            <i class="iconfont ic-man"></i>
        <p>å†™äº† 130241 å­—ï¼Œè¢« 5784 äººå…³æ³¨ï¼Œè·å¾—äº† 4674 ä¸ªå–œæ¬¢</p></div>
          <div class="signature">å¦‚æœè¯»å®Œè§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œæ¬¢è¿ç‚¹èµåŠ å…³æ³¨

å¾®ä¿¡å…¬ä¼—å· å å°ç‹¼çš„åšå®¢
http://upload-images.jianshu.io/upload_images/2184951-2079ac376dbc9c0c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240


æ¨èä¸€ä¸ªå¹²è´§ç¤¾åŒº
Spring For All ç¤¾åŒºï¼ˆhttp://spring4all.comï¼‰</div>
      </div>

      <div class="support-author"><p>å¦‚æœè§‰å¾—æˆ‘çš„æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·éšæ„èµèµã€‚æ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</p> <div class="btn btn-pay">èµèµæ”¯æŒ</div> <!----> <!----> <!----></div>

    <div class="meta-bottom">
      <div class="like"><div class="btn like-group"><div class="btn-like"><a><i class="iconfont ic-like"></i>å–œæ¬¢</a></div> <div class="modal-wrap"><a>18</a></div></div> <!----></div>
      <div class="share-group">
        <a class="share-circle" data-action="weixin-share" data-toggle="tooltip" data-original-title="åˆ†äº«åˆ°å¾®ä¿¡">
          <i class="iconfont ic-wechat"></i>
        </a>
        <a class="share-circle" data-toggle="tooltip" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=1881139527',u=z||d.location,p=['&amp;url=',e(u),'&amp;title=',e(t||d.title),'&amp;source=',e(r),'&amp;sourceUrl=',e(l),'&amp;content=',c||'gb2312','&amp;pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','http://cwb.assets.jianshu.io/notes/images/11834889/weibo/image_c106a40389f6.jpg',%20'%E6%8E%A8%E8%8D%90%20@%E5%8D%A0%E5%B0%8F%E9%83%8E%20%E7%9A%84%E6%96%87%E7%AB%A0%E3%80%8AJVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%E3%80%8B%EF%BC%88%20%E5%88%86%E4%BA%AB%E8%87%AA%20@%E7%AE%80%E4%B9%A6%20%EF%BC%89','http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weibo','%E9%A1%B5%E9%9D%A2%E7%BC%96%E7%A0%81gb2312|utf-8%E9%BB%98%E8%AE%A4gb2312'));" data-original-title="åˆ†äº«åˆ°å¾®åš">
          <i class="iconfont ic-weibo"></i>
        </a>
          <a class="share-circle" data-toggle="tooltip" href="http://cwb.assets.jianshu.io/notes/images/11834889/weibo/image_c106a40389f6.jpg" target="_blank" data-original-title="ä¸‹è½½é•¿å¾®åšå›¾ç‰‡">
            <i class="iconfont ic-picture"></i>
          </a>
        <a class="share-circle more-share" tabindex="0" data-toggle="popover" data-placement="top" data-html="true" data-trigger="focus" href="javascript:void(0);" data-content="
          &lt;ul class=&quot;share-list&quot;&gt;
            &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=qzone')+'&amp;title='+e('æ¨è å å°ç‹¼ çš„æ–‡ç« ã€ŠJVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepointã€‹'),x=function(){if(!window.open(r,'qzone','toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-zone&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°QQç©ºé—´&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://twitter.com/share?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=twitter')+'&amp;text='+e('æ¨è å å°ç‹¼ çš„æ–‡ç« ã€ŠJVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepointã€‹ï¼ˆ åˆ†äº«è‡ª @jianshucom ï¼‰')+'&amp;related='+e('jianshucom'),x=function(){if(!window.open(r,'twitter','toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-twitter&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Twitter&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://www.facebook.com/dialog/share?app_id=483126645039390&amp;display=popup&amp;href=http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=facebook',x=function(){if(!window.open(r,'facebook','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-facebook&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Facebook&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://plus.google.com/share?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=google_plus'),x=function(){if(!window.open(r,'google_plus','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-google&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Google+&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:'',r='http://www.douban.com/recommend/?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=douban')+'&amp;title='+e('JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint')+'&amp;sel='+e(s)+'&amp;v=1',x=function(){if(!window.open(r,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r+'&amp;r=1'};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-douban&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°è±†ç“£&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        " data-original-title="" title="">æ›´å¤šåˆ†äº«</a>
      </div>
    </div>
    <div><div id="comment-list" class="comment-list"><div><form class="new-comment"><a class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/9-cceda3cf5072bcdd77e8ca4f21c40998_002.jpg"></a> <textarea placeholder="å†™ä¸‹ä½ çš„è¯„è®º..."></textarea> <!----></form></div> <div id="normal-comment-list" class="normal-comment-list"><div><div><div class="top"><span>8æ¡è¯„è®º</span> <a class="author-only">åªçœ‹ä½œè€…</a> <a class="close-btn" style="display: none;">å…³é—­è¯„è®º</a> <div class="pull-right"><a class="active">æŒ‰å–œæ¬¢æ’åº</a><a class="">æŒ‰æ—¶é—´æ­£åº</a><a class="">æŒ‰æ—¶é—´å€’åº</a></div></div></div> <!----> <!----> <div class="comments-placeholder" style="display: none;"><div class="author"><div class="avatar"></div> <div class="info"><div class="name"></div> <div class="meta"></div></div></div> <div class="text"></div> <div class="text animation-delay"></div> <div class="tool-group"><i class="iconfont ic-zan-active"></i><div class="zan"></div> <i class="iconfont ic-list-comments"></i><div class="zan"></div></div></div> <div id="comment-10469363" class="comment"><div><div class="author"><a href="http://www.jianshu.com/u/5b22384ae03b" target="_blank" class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/8870f54ba05e.jpg"></a> <div class="info"><a href="http://www.jianshu.com/u/5b22384ae03b" target="_blank" class="name">è½è½cxy</a> <!----> <div class="meta"><span>2æ¥¼ Â· 2017.04.30 15:51</span></div></div></div> <div class="comment-wrap"><p>æ”¾å‡ä¹Ÿåœ¨é’»ç ”æŠ€æœ¯çš„å°ç‹¼ğŸº</p> <div class="tool-group"><a><i class="iconfont ic-zan"></i> <span>1äººèµ</span></a> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div></div> <div class="sub-comment-list"><div id="comment-10469381" class="sub-comment"><p><a href="http://www.jianshu.com/u/90ab66c248e6" target="_blank">å å°ç‹¼</a>ï¼š
          <span><a href="http://www.jianshu.com/users/5b22384ae03b" class="maleskine-author" target="_blank" data-user-slug="5b22384ae03b">@è½è½cxy</a> å“ˆå“ˆï¼ŒæŠ€æœ¯ä¸èƒ½åœ</span></p> <div class="sub-tool-group"><span>2017.04.30 15:53</span> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div> <div class="sub-comment more-comment"><a class="add-comment-btn"><i class="iconfont ic-subcomment"></i> <span>æ·»åŠ æ–°è¯„è®º</span></a> <!----> <!----> <!----></div> <!----></div></div><div id="comment-10487400" class="comment"><div><div class="author"><a href="http://www.jianshu.com/u/90bb5aacf3ff" target="_blank" class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/89f7b1b9-5542-45c4-af72-48d1d60d0715.png"></a> <div class="info"><a href="http://www.jianshu.com/u/90bb5aacf3ff" target="_blank" class="name">ä’•æ„º</a> <!----> <div class="meta"><span>3æ¥¼ Â· 2017.05.01 11:05</span></div></div></div> <div class="comment-wrap"><p>è¿™ç ”ç©¶çš„å¥½æ·±ï¼Œæš‚æ—¶åªèƒ½è†œæ‹œäº†</p> <div class="tool-group"><a><i class="iconfont ic-zan"></i> <span>èµ</span></a> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div></div> <div class="sub-comment-list hide"><!----> <!----></div></div><div id="comment-10520766" class="comment"><div><div class="author"><a href="http://www.jianshu.com/u/52ce170cb0ca" target="_blank" class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/163a7231-7211-48e4-9d7b-cad9d075d2f4.JPG"></a> <div class="info"><a href="http://www.jianshu.com/u/52ce170cb0ca" target="_blank" class="name">é²¸æ¯_Leon</a> <!----> <div class="meta"><span>4æ¥¼ Â· 2017.05.02 17:37</span></div></div></div> <div class="comment-wrap"><p>çœ‹å¾—æˆ‘çš„è†ç›–ä¹Ÿç¢äº†</p> <div class="tool-group"><a><i class="iconfont ic-zan"></i> <span>èµ</span></a> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div></div> <div class="sub-comment-list hide"><!----> <!----></div></div><div id="comment-10520788" class="comment"><div><div class="author"><a href="http://www.jianshu.com/u/52ce170cb0ca" target="_blank" class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/163a7231-7211-48e4-9d7b-cad9d075d2f4.JPG"></a> <div class="info"><a href="http://www.jianshu.com/u/52ce170cb0ca" target="_blank" class="name">é²¸æ¯_Leon</a> <!----> <div class="meta"><span>5æ¥¼ Â· 2017.05.02 17:38</span></div></div></div> <div class="comment-wrap"><p>æä¸ªå»ºè®®ï¼Œè‹±æ–‡æ•°å­—ç‰¹æ®Šç¬¦å·ï¼Œæœ€å¥½å‰åå„åŠ ä¸€ä¸ªè‹±æ–‡åŠè§’ç©ºæ ¼ï¼Œä»è€Œå’Œä¸­æ–‡æ˜æ˜¾åœ°åˆ†éš”å¼€ï¼Œé˜…è¯»ä½“éªŒä¼šæ›´å¥½ã€‚</p> <div class="tool-group"><a><i class="iconfont ic-zan"></i> <span>èµ</span></a> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div></div> <div class="sub-comment-list"><div id="comment-10521426" class="sub-comment"><p><a href="http://www.jianshu.com/u/90ab66c248e6" target="_blank">å å°ç‹¼</a>ï¼š
          <span><a href="http://www.jianshu.com/users/52ce170cb0ca" class="maleskine-author" target="_blank" data-user-slug="52ce170cb0ca">@Leon_é²¸æ¯</a> å¥½çš„ï¼Œå¤šè°¢æé†’</span></p> <div class="sub-tool-group"><span>2017.05.02 18:08</span> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div> <div class="sub-comment more-comment"><a class="add-comment-btn"><i class="iconfont ic-subcomment"></i> <span>æ·»åŠ æ–°è¯„è®º</span></a> <!----> <!----> <!----></div> <!----></div></div><div id="comment-12479138" class="comment"><div><div class="author"><a href="http://www.jianshu.com/u/4b0ece0e146d" target="_blank" class="avatar"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/13-394c31a9cb492fcb39c27422ca7d2815.jpg"></a> <div class="info"><a href="http://www.jianshu.com/u/4b0ece0e146d" target="_blank" class="name">è€è¡²ç”¨æ¸…æ‰¬</a> <!----> <div class="meta"><span>6æ¥¼ Â· 2017.07.04 18:10</span></div></div></div> <div class="comment-wrap"><p>ã€‚ã€‚ã€‚è¿˜æ²¡çœ‹ï¼Œå…ˆæ”¶è—äº†ï¼Œæ„Ÿè§‰åˆè¦çœ‹ä¸æ‡‚äº†</p> <div class="tool-group"><a><i class="iconfont ic-zan"></i> <span>èµ</span></a> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div></div> <div class="sub-comment-list"><div id="comment-12481972" class="sub-comment"><p><a href="http://www.jianshu.com/u/90ab66c248e6" target="_blank">å å°ç‹¼</a>ï¼š
          <span><a href="http://www.jianshu.com/users/4b0ece0e146d" class="maleskine-author" target="_blank" data-user-slug="4b0ece0e146d">@è€è¡²ç”¨æ¸…æ‰¬</a> è¿™ä¸ªç•¥éš¾</span></p> <div class="sub-tool-group"><span>2017.07.04 19:48</span> <a><i class="iconfont ic-comment"></i> <span>å›å¤</span></a> <a class="report"><span>ä¸¾æŠ¥</span></a> <!----></div></div> <div class="sub-comment more-comment"><a class="add-comment-btn"><i class="iconfont ic-subcomment"></i> <span>æ·»åŠ æ–°è¯„è®º</span></a> <!----> <!----> <!----></div> <!----></div></div></div></div> <!----> <div><!----></div></div></div>
  </div>

  <div class="side-tool"><ul><li data-placement="left" data-toggle="tooltip" data-container="body" data-original-title="å›åˆ°é¡¶éƒ¨" style=""><a class="function-button"><i class="iconfont ic-backtop"></i></a></li> <li data-placement="left" data-toggle="tooltip" data-container="body" data-original-title="å°†æ–‡ç« åŠ å…¥ä¸“é¢˜"><a class="js-submit-button"><i class="iconfont ic-addcollectionmodal"></i></a> <!----></li> <li data-placement="left" data-toggle="tooltip" data-container="body" data-original-title="æ”¶è—æ–‡ç« "><a class="function-button"><i class="iconfont ic-mark"></i></a></li> <li data-placement="left" data-toggle="tooltip" data-container="body" data-original-title="åˆ†äº«æ–‡ç« "><a tabindex="0" role="button" data-toggle="popover" data-placement="left" data-html="true" data-trigger="focus" href="javascript:void(0);" data-content="&lt;ul class='share-list'&gt;
                &lt;li&gt;&lt;a class=&quot;weixin-share&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-weixin&quot;&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°å¾®ä¿¡&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=1881139527',u=z||d.location,p=['&amp;url=',e(u),'&amp;title=',e(t||d.title),'&amp;source=',e(r),'&amp;sourceUrl=',e(l),'&amp;content=',c||'gb2312','&amp;pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','http://cwb.assets.jianshu.io/notes/images/11834889/weibo/image_c106a40389f6.jpg', 'æ¨è @å å°éƒ çš„æ–‡ç« ã€ŠJVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepointã€‹ï¼ˆ åˆ†äº«è‡ª @ç®€ä¹¦ ï¼‰','http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weibo','é¡µé¢ç¼–ç gb2312|utf-8é»˜è®¤gb2312'));&quot;&gt;&lt;i class='social-icon-sprite social-icon-weibo'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°å¾®åš&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;http://cwb.assets.jianshu.io/notes/images/11834889/weibo/image_c106a40389f6.jpg&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;social-icon-sprite social-icon-picture&quot;&gt;&lt;/i&gt;&lt;span&gt;ä¸‹è½½é•¿å¾®åšå›¾ç‰‡&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=qzone')+'&amp;title='+e('æ¨è å å°ç‹¼ çš„æ–‡ç« ã€ŠJVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepointã€‹'),x=function(){if(!window.open(r,'qzone','toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class='social-icon-sprite social-icon-zone'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°QQç©ºé—´&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://twitter.com/share?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=twitter')+'&amp;text='+e('æ¨è å å°ç‹¼ çš„æ–‡ç« ã€ŠJVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepointã€‹ï¼ˆ åˆ†äº«è‡ª @jianshucom ï¼‰')+'&amp;related='+e('jianshucom'),x=function(){if(!window.open(r,'twitter','toolbar=0,resizable=1,scrollbars=yes,status=1,width=600,height=600'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class='social-icon-sprite social-icon-twitter'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Twitter&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://www.facebook.com/dialog/share?app_id=483126645039390&amp;display=popup&amp;href=http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=facebook',x=function(){if(!window.open(r,'facebook','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class='social-icon-sprite social-icon-facebook'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Facebook&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,r='https://plus.google.com/share?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=google_plus'),x=function(){if(!window.open(r,'google_plus','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})();&quot;&gt;&lt;i class='social-icon-sprite social-icon-google'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°Google+&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:'',r='http://www.douban.com/recommend/?url='+e('http://www.jianshu.com/p/c79c5e02ebe6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=douban')+'&amp;title='+e('JVMæºç åˆ†æä¹‹å®‰å…¨ç‚¹safepoint')+'&amp;sel='+e(s)+'&amp;v=1',x=function(){if(!window.open(r,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r+'&amp;r=1'};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()&quot;&gt;&lt;i class='social-icon-sprite social-icon-douban'&gt;&lt;/i&gt;&lt;span&gt;åˆ†äº«åˆ°è±†ç“£&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
              &lt;/ul&gt;" data-original-title="" title="" class="function-button"><i class="iconfont ic-share"></i></a> <!----></li></ul></div>
</div>
<div class="note-bottom">
  <div><div class="main"><div class="title">è¢«ä»¥ä¸‹ä¸“é¢˜æ”¶å…¥ï¼Œå‘ç°æ›´å¤šç›¸ä¼¼å†…å®¹</div> <!----> <div class="include-collection"><div class="modal-wrap add-collection-wrap"><a class="add-collection"><i class="iconfont ic-follow"></i>æ”¶å…¥æˆ‘çš„ä¸“é¢˜</a></div> <a href="http://www.jianshu.com/c/addfce4ca518?utm_source=desktop&amp;utm_medium=notes-included-collection" target="_blank" class="item"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/1470643432.jpg"><div class="name">javaè¿›é˜¶å¹²è´§</div></a><a href="http://www.jianshu.com/c/NEt52a?utm_source=desktop&amp;utm_medium=notes-included-collection" target="_blank" class="item"><img src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/computer_guy.jpg"><div class="name">ç¨‹åºå‘˜</div></a> <!----></div></div> <!----> <!----></div>
  <div class="recommend-note"><div class="meta"><div class="title">æ›´å¤šç²¾å½©å†…å®¹</div> <div class="roll"></div></div> <div class="list"><div class="note"><a target="_blank" href="http://www.jianshu.com/p/ffc6fd82e32b?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="cover" style="background-image: url(&quot;//upload-images.jianshu.io/upload_images/2184951-d9cb43b57e0dfd11.png?imageMogr2/auto-orient/strip|imageView2/1/w/300/h/240&quot;);"></a> <a target="_blank" href="http://www.jianshu.com/p/ffc6fd82e32b?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="title">Nettyæºç åˆ†æä¹‹acceptè¿‡ç¨‹</a> <p class="description">æœ¬
ç« èŠ‚åˆ†ææœåŠ¡ç«¯å¦‚ä½•acceptå®¢æˆ·ç«¯çš„connectè¯·æ±‚ã€‚ 
åœ¨Nettyæºç åˆ†æä¹‹NioEventLoopç« èŠ‚ä¸­ï¼Œå·²ç»åˆ†æäº†NioEventLoopçš„å·¥ä½œæœºåˆ¶ï¼Œå½“æœ‰å®¢æˆ·ç«¯connectè¯·
æ±‚ï¼Œselectorå¯ä»¥è¿”å›å…¶å¯¹åº”çš„SelectionKeyï¼Œæ–¹æ³•processSelectedKeysè¿›è¡Œåç»­çš„å¤„ç†ã€‚ 
é»˜è®¤é‡‡ç”¨ä¼˜åŒ–è¿‡çš„SelectedSelectionKeySetä¿å­˜æœ‰äº‹ä»¶å‘ç”Ÿçš„selectedKeyã€‚1ã€
SelectedSelectionKeySetå†…éƒ¨ä½¿ç”¨ä¸¤ä¸ªå¤§å°ä¸º1024çš„SelectionKeyæ•°ç»„keysAå’ŒkeysBä¿å­˜
selectedKeyã€‚2ã€æŠŠSelectedSe...</p> <a target="_blank" href="http://www.jianshu.com/u/90ab66c248e6?utm_campaign=maleskine&amp;utm_content=user&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="author"><div class="avatar" style="background-image: url(&quot;http://upload.jianshu.io/users/upload_avatars/2184951/e504c85fb1dc.jpg&quot;);"></div> <span class="name">å å°ç‹¼</span></a></div><div class="note"><!----> <a target="_blank" href="http://www.jianshu.com/p/29c20f0684d0?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="title">JVMæºç åˆ†æä¹‹è€å¹´ä»£TenuredGenerationçš„åƒåœ¾å›æ”¶ç®—æ³•å®ç°</a> <p class="description">ç®€
ä¹¦ å å°ç‹¼è½¬è½½è¯·æ³¨æ˜åŸåˆ›å‡ºå¤„ï¼Œè°¢è°¢ï¼ çœ‹å¾—è¶Šå¤šï¼Œæ‡‚çš„è¶Šå°‘ï¼Œè¿˜å¹´è½»ï¼Œå¤šå­¦ä¹ ï¼ 
æ¥ç€ä¸Šæ–‡ã€ŠJVMæºç åˆ†æä¹‹æ–°ç”Ÿä»£DefNewGenerationçš„å®ç°ã€‹ï¼Œæœ¬æ–‡å¯¹è€å¹´ä»£TenuredGenerationçš„åƒåœ¾å›æ”¶ç®—æ³•è¿›è¡Œåˆ†æã€‚
 TenuredGeneration 
è€å¹´ä»£TenuredGenerationä½¿ç”¨æ ‡è®°-å‹ç¼©-æ¸…ç†ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå°†æ ‡è®°å¯¹è±¡ç§»åŠ¨åˆ°å †çš„å¦ä¸€ç«¯ï¼ŒåŒæ—¶æ›´æ–°å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œç®—æ³•çš„å…·ä½“å®ç°
ä½äºTenuredGeneration::collect()æ–¹æ³• 
è°ƒç”¨çˆ¶ç±»çš„OneContigSpaceCardGenerationçš„collect()æ–¹æ³•ï¼Œå®ç°å¦‚ä¸‹ å…¶ä¸­GenMarkSw...</p> <a target="_blank" href="http://www.jianshu.com/u/90ab66c248e6?utm_campaign=maleskine&amp;utm_content=user&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="author"><div class="avatar" style="background-image: url(&quot;http://upload.jianshu.io/users/upload_avatars/2184951/e504c85fb1dc.jpg&quot;);"></div> <span class="name">å å°ç‹¼</span></a></div><div class="note"><a target="_blank" href="http://www.jianshu.com/p/3f60e6553aa5?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="cover" style="background-image: url(&quot;//upload-images.jianshu.io/upload_images/1996023-6fe74c3121274b53.png?imageMogr2/auto-orient/strip|imageView2/1/w/300/h/240&quot;);"></a> <a target="_blank" href="http://www.jianshu.com/p/3f60e6553aa5?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="title">æ‡‚å¾—ä»€ä¹ˆæ˜¯èŒä¸šæŠ€èƒ½è½¬ç§»ï¼ŒåŠ©ä½ å¤§èƒ†è·³æ§½</a> <p class="description">èŒ
åœºä¸­æ‰“æ‹¼å¤šå¹´ï¼Œé­é‡åˆ°äº†å¦‚ä¸‹ä¸¤ç§èŒåœºå›°æƒ‘ï¼š 
ä¸€ç§æ˜¯ï¼Œç°åœ¨çš„å·¥ä½œï¼Œæ‰€æ¶‰åŠçš„è¡Œä¸šå’ŒèŒä½ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è‡ªå·±è¦ç»ˆèº«ä»äº‹çš„ï¼Œå¦‚æœä¸æ˜¯çš„è¯ï¼Œè‡ªå·±æ˜¯å¦å°±æ²¡æœ‰å¿…è¦åŠªåŠ›åšå¥½ï¼Œåªéœ€è¦å‹‰å¼ºåº”ä»˜è¿‡å»ï¼Ÿ 
ä¸€ç§æ˜¯ï¼Œç°åœ¨çš„å·¥ä½œï¼Œè‡ªå·±åŠªåŠ›å¹²åˆ°æœ€å¥½ï¼Œè¦æ˜¯æœªæ¥è¿™ä¸ªè¡Œæ¶ˆå¤±äº†ï¼Œæˆ–è€…è¿™ä¸ªå·¥ç§éšç€æ—¶ä»£çš„å‘å±•ï¼Œä¸éœ€è¦äº†ï¼Œé‚£æˆ‘ç°åœ¨è¿™æ ·åŠªåŠ›æœ‰ç”¨å—ï¼Ÿ 
é¢å¯¹ä¸Šé¢çš„ä¸¤ç§å›°æƒ‘ï¼Œä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº«ä¸‹æœ€è¿‘åœ¨èŒåœºç ”ç©¶ä¸­æ¶‰åŠåˆ°çš„ä¸€ä¸ªä¸“é¢˜ï¼šèŒä¸šæŠ€èƒ½è½¬ç§»ï¼Œä¹Ÿæœ‰çš„èµ„æ–™ä¸Šè¯´æˆï¼šèŒä¸šæŠ€èƒ½è½¬ç§»ã€‚ 
ä¸ç®¡æ˜¯è¿ç§»è¿˜æ˜¯è½¬ç§»ï¼Œä¸ªäººè®¤ä¸ºæœ¬è´¨æ˜¯ä¸€è‡´çš„ï¼Œå’±ä»¬å§‘ä¸”ä»¥èŒä¸šæŠ€èƒ½è½¬ç§»æ¥æ¢è®¨å§ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯èŒä¸šæŠ€èƒ½è½¬ç§»ï¼Ÿ 
æœ‰å­¦è¯´è®¤ä¸ºï¼ŒèŒä¸šæŠ€èƒ½è½¬ç§»æ˜¯ä»ä¸€ä¸ªè¡Œä¸šè½¬å…¥åˆ°å¦å¤–ä¸€ä¸ªè¡Œä¸šï¼Œè€Œä¸éœ€è¦ä»æ¥æ¥...</p> <a target="_blank" href="http://www.jianshu.com/u/2796f2d6e198?utm_campaign=maleskine&amp;utm_content=user&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="author"><div class="avatar" style="background-image: url(&quot;http://upload.jianshu.io/users/upload_avatars/1996023/a1e3ab6c-6929-4da5-879a-90b54c26627e.jpg&quot;);"></div> <span class="name">ä½³å¿ƒæœ‰çº¦</span></a></div><div class="note"><a target="_blank" href="http://www.jianshu.com/p/535fd0a8a296?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="cover" style="background-image: url(&quot;//upload-images.jianshu.io/upload_images/2542851-c22166fb01ccd186.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/300/h/240&quot;);"></a> <a target="_blank" href="http://www.jianshu.com/p/535fd0a8a296?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="title">è¶Šæ¥è¶Šå¤šçš„äººï¼Œå¼€å§‹è§‰å¾—è¯»ç ”æ˜¯ä¸€æ¡ä¸å½’è·¯</a> <p class="description">æ–‡
/æ€€å·¦åŒå­¦ 01 ä¸ºä»€ä¹ˆå¾ˆå¤šäººè§‰å¾—è¯»ç ”æ— ç”¨ï¼Œè®¤ä¸ºé‚£æ˜¯ä¸€æ¡ä¸å½’è·¯å‘¢ï¼Ÿ ç­”ï¼šåˆ«æ‰¯äº†ï¼Œè·¯æœ¬èº«æ²¡æœ‰å¯¹é”™ï¼Œå½’æ ¹åˆ°åº•ï¼Œè¿˜æ˜¯è‡ªå·±ä¸è¡Œã€‚ 02 
å‰å¤©ç»™æ™“å…°è¡¥è¯¾æ—¶ï¼Œå¥¹è¯´é…·æš‘éš¾è€ï¼Œåœ¨å­¦æ ¡å¤‡è€ƒçš„æ¯å¤©ï¼Œæ„Ÿè§‰éƒ½è¦çƒ­åŒ–ã€‚æˆ‘æè®®å›å®¶ä¼‘æ¯ï¼Œå¹å¹ç©ºè°ƒåƒç‚¹è¥¿ç“œï¼Œå¥¹è¯´ç®—äº†ï¼Œå°±åœ¨å­¦æ ¡å§ï¼Œä¸ºäº†è€ƒç ”ï¼Œæ‹¼ä¸€æŠŠã€‚ 
å¥¹æ˜¯æˆ‘å¸¦çš„ä¸€ä¸ªå¤§ä¸‰çš„å­¦ç”Ÿï¼Œæ—¢è¸å®åˆå¯çˆ±ï¼Œæ²¡äº‹çš„æ—¶å€™ï¼Œè¿˜å–œæ¬¢è°ƒä¾ƒæˆ‘ï¼šâ€œæ€€è€å¸ˆï¼Œä½ æ€ä¹ˆé‚£ä¹ˆèƒ½åƒï¼Œä½ æ˜¯çŒªå—ï¼Ÿæ€€è€å¸ˆï¼Œä½ ä¸æ˜¯è¯´æ¯å¤©å”±æ­Œå—ï¼Œä½ çš„æ­Œå‘¢ï¼Ÿæ€€è€
å¸ˆï¼Œæœ‰æ—¶å€™æˆ‘è§‰å¾—ä½ å¾ˆå‚»å¾ˆå¤©çœŸå•Šâ€¦â€¦â€ 
å…¶å®å¥¹ä¹Ÿæœ‰å¾ˆå¤šçƒ¦æ¼ï¼Œå­¦æ ¡é¢†å¯¼æ‰¾å¥¹è°ˆè¯ï¼Œå¸Œæœ›å¥¹æ¢ä¸€ä¸ªéš¾åº¦ä½ç‚¹çš„å­¦æ ¡ï¼Œå‘æˆ‘è¯‰è‹¦æ—¶ï¼Œæˆ‘é—®ï¼šâ€œåˆ«ç®¡ä»–ä»¬ï¼Œä½ è‡ªå·±å¿ƒé‡Œæ˜¯æ€ä¹ˆæƒ³çš„ï¼Ÿâ€ 
å¥¹è¯´ï¼šâ€œæˆ‘å°±å–œæ¬¢æŠ¥è€ƒ...</p> <a target="_blank" href="http://www.jianshu.com/u/62478ec15b74?utm_campaign=maleskine&amp;utm_content=user&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="author"><div class="avatar" style="background-image: url(&quot;http://upload.jianshu.io/users/upload_avatars/2542851/0dca220dd6bb.jpeg&quot;);"></div> <span class="name">æ€€å·¦åŒå­¦</span></a></div><div class="note"><a target="_blank" href="http://www.jianshu.com/p/3133b2b3d400?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="cover" style="background-image: url(&quot;//upload-images.jianshu.io/upload_images/1217754-5ba22b2f82c4cfc6?imageMogr2/auto-orient/strip|imageView2/1/w/300/h/240&quot;);"></a> <a target="_blank" href="http://www.jianshu.com/p/3133b2b3d400?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="title">è¿™5æœ¬ä¹¦å°†å½»åº•é¢ è¦†ä½ çš„è®¤çŸ¥</a> <p class="description">æ–‡|
éº¦å®¶ç†æƒ³è°· æœ¬æ–‡åŸåˆ›ï¼Œè½¬è½½è¯·è”ç³» / ã€Šä¹Œåˆä¹‹ä¼—ã€‹ å±…æ–¯å¡”å¤«Â·å‹’åº è‘— è±†ç“£è¯„åˆ†8.3åˆ†ï¼Œä¸€æœ¬ç ”ç©¶äººç±»çš„ç¾¤ä½“è¡Œä¸ºä¸å¯ä¸è¯»çš„ä½³ä½œã€‚ 
æ²¡æœ‰ä¸€ç‰‡é›ªèŠ±ä¼šè®¤ä¸ºæ˜¯è‡ªå·±é€ æˆäº†é›ªå´©ã€‚ 
è¿™å¥è¯æ‰€è¯´çš„å…¶å®æ˜¯â€œè´£ä»»åˆ†æ‘Šæ•ˆåº”â€ã€‚å°±åƒå‰æ®µæ—¶é—´ç½‘ä¸Šå¾ˆç«çš„å°‘å¥³äºŒæ¬¡ç¢¾å‹äº‹ä»¶ï¼Œç°åœºé‚£ä¹ˆå¤šå›´è§‚ç¾¤ä¼—ï¼Œå´æ²¡æœ‰äººä¼¸å‡ºæ´æ‰‹ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯è¿™ç¾¤äººæ€ä¹ˆ
è¿™ä¹ˆå†·æ¼ è¿™ä¹ˆé“å¾·æ²¦ä¸§ï¼Œä½†æ˜¯è¿™æœ¬ä¹¦å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¹Ÿå¯èƒ½åªæ˜¯å› ä¸ºâ€œè´£ä»»åˆ†æ‘Šæ•ˆåº”â€ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½åœ¨ç­‰ç€åˆ«äººå…ˆå‡ºæ‰‹ï¼Œä»–è‡ªå·±çš„è´£ä»»æ„Ÿå´ç›¸åº”å‡å¼±äº†ã€‚ 
è¿™æœ¬ä¹¦è¿˜å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“ä¸ªä½“å¤„åœ¨é›†ä½“å½“ä¸­çš„æ—¶å€™ï¼Œä»–çš„æ€è€ƒèƒ½åŠ›å’Œåˆ¤æ–­èƒ½åŠ›éƒ½ä¼šä¸‹é™ï¼Œè¿™æ—¶å€™ï¼Œä»–å¾€å¾€ä¼šåšå‡ºä¸€äº›ä¸æ­£ç¡®çš„äº‹ï¼Œé™·å…¥ä¸€ç§é›†ä½“æ— æ„è¯†çš„çŠ¶æ€ï¼Œå˜
æˆ...</p> <a target="_blank" href="http://www.jianshu.com/u/009eac2d558e?utm_campaign=maleskine&amp;utm_content=user&amp;utm_medium=pc_all_hots&amp;utm_source=recommendation" class="author"><div class="avatar" style="background-image: url(&quot;http://upload.jianshu.io/users/upload_avatars/1217754/0c7b873894df&quot;);"></div> <span class="name">éº¦å®¶ç†æƒ³è°·</span></a></div></div></div>
</div>

    <script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/push.js"></script><script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/hm.js"></script><script async="" src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/analytics.js"></script><script type="application/json" data-name="page-data">{"user_signed_in":true,"locale":"zh-CN","os":"mac","read_mode":"day","read_font":"font2","current_user":{"id":5282510,"nickname":"yonka","slug":"4b55ee401111","avatar":"http://cdn2.jianshu.io/assets/default_avatar/9-cceda3cf5072bcdd77e8ca4f21c40998.jpg","unread_counts":{"chats":0,"total":0},"has_editable_collection":false},"note_show":{"is_author":false,"is_following_author":true,"is_liked_note":false,"uuid":"8f80544a-2156-4894-bd2d-19db8ed2fa23"},"note":{"id":11834889,"slug":"c79c5e02ebe6","user_id":2184951,"notebook_id":12554212,"commentable":true,"likes_count":18,"views_count":1226,"public_wordage":1835,"comments_count":8,"total_rewards_count":0,"is_author":false,"author":{"nickname":"å å°ç‹¼","total_wordage":130241,"followers_count":5784,"total_likes_count":4674}}}</script>
    
    <script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/babel-polyfill-a9ca93d3a83b3a1f92da.js"></script>
    <script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/web-base-1e5054a5d8733cfec67f.js"></script>
<script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/web-0773ed4b5a6b652bd765.js"></script>
    
    <script src="JVM%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8B%E5%AE%89%E5%85%A8%E7%82%B9safepoint%20-%20%E7%AE%80%E4%B9%A6_files/entry-cc051170909eea2bebb4.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35169517-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?0c0e9d9b1e7d617b3e6842e85b9fb068";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
</script>

  

<!----><!----></body></html>