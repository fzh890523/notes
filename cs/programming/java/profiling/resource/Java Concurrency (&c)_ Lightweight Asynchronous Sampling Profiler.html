<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/static/v1/widgets/763856997-widget_css_bundle.css' />
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='http://jeremymanson.blogspot.co.id/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Java Concurrency (&amp;c) - Atom" href="http://jeremymanson.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Java Concurrency (&amp;c) - RSS" href="http://jeremymanson.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Java Concurrency (&amp;c) - Atom" href="https://www.blogger.com/feeds/8405107760807432973/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Java Concurrency (&amp;c) - Atom" href="http://jeremymanson.blogspot.com/feeds/1227336553526918679/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html' property='og:url'/>
<meta content='Lightweight Asynchronous Sampling Profiler' property='og:title'/>
<meta content='I finally got off of my lazy elbows and wrote a proof-of-concept sampling profiler for public consumption based on the Hotspot JVM&#39;s AsyncGe...' property='og:description'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Java Concurrency (&amp;c): Lightweight Asynchronous Sampling Profiler</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Minima Stretch
Date:     26 Feb 2004
----------------------------------------------- */

/* Use this with templates/template-twocol.html */
body {
background:#ffffff;
margin:0;
color:#333333;
font:x-small Georgia Serif;
font-size/* */:/**/small;
font-size: /**/small;
text-align: center;
}
a:link {
color:#5588aa;
text-decoration:none;
}
a:visited {
color:#999999;
text-decoration:none;
}
a:hover {
color:#cc6600;
text-decoration:underline;
}
a img {
border-width:0;
}
/* Header
-----------------------------------------------
*/
#header-wrapper {
margin:0 2% 10px;
border:1px solid #cccccc;
}
#header {
margin: 5px;
border: 1px solid #cccccc;
text-align: center;
color:#666666;
}
#header-inner {
background-position: center;
margin-left: auto;
margin-right: auto;
}
#header h1 {
margin:5px 5px 0;
padding:15px 20px .25em;
line-height:1.2em;
text-transform:uppercase;
letter-spacing:.2em;
font: normal normal 200% Georgia, Serif;
}
#header a {
color:#666666;
text-decoration:none;
}
#header a:hover {
color:#666666;
}
#header .description {
margin:0 5px 5px;
padding:0 20px 15px;
text-transform:uppercase;
letter-spacing:.2em;
line-height: 1.4em;
font: normal normal 78% 'Trebuchet MS', Trebuchet, Arial, Verdana, Sans-serif;
color: #999999;
}
#header img {
margin-left: auto;
margin-right: auto;
}
/* Outer-Wrapper
----------------------------------------------- */
#outer-wrapper {
margin:0;
padding:10px;
text-align:left;
font: normal normal 100% Georgia, Serif;
}
#main-wrapper {
margin-left: 2%;
width: 67%;
float: left;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#sidebar-wrapper {
margin-right: 2%;
width: 25%;
float: right;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2 {
margin:1.5em 0 .75em;
font:normal normal 78% 'Trebuchet MS',Trebuchet,Arial,Verdana,Sans-serif;
line-height: 1.4em;
text-transform:uppercase;
letter-spacing:.2em;
color:#999999;
}
/* Posts
-----------------------------------------------
*/
h2.date-header {
margin:1.5em 0 .5em;
}
.post {
margin:.5em 0 1.5em;
border-bottom:1px dotted #cccccc;
padding-bottom:1.5em;
}
.post h3 {
margin:.25em 0 0;
padding:0 0 4px;
font-size:140%;
font-weight:normal;
line-height:1.4em;
color:#cc6600;
}
.post h3 a, .post h3 a:visited, .post h3 strong {
display:block;
text-decoration:none;
color:#cc6600;
font-weight:normal;
}
.post h3 strong, .post h3 a:hover {
color:#333333;
}
.post-body {
margin:0 0 .75em;
line-height:1.6em;
}
.post-body blockquote {
line-height:1.3em;
}
.post-footer {
margin: .75em 0;
color:#999999;
text-transform:uppercase;
letter-spacing:.1em;
font: normal normal 78% 'Trebuchet MS', Trebuchet, Arial, Verdana, Sans-serif;
line-height: 1.4em;
}
.comment-link {
margin-left:.6em;
}
.post img, table.tr-caption-container {
padding:4px;
border:1px solid #cccccc;
}
.tr-caption-container img {
border: none;
padding: 0;
}
.post blockquote {
margin:1em 20px;
}
.post blockquote p {
margin:.75em 0;
}
/* Comments
----------------------------------------------- */
#comments h4 {
margin:1em 0;
font-weight: bold;
line-height: 1.4em;
text-transform:uppercase;
letter-spacing:.2em;
color: #999999;
}
#comments-block {
margin:1em 0 1.5em;
line-height:1.6em;
}
#comments-block .comment-author {
margin:.5em 0;
}
#comments-block .comment-body {
margin:.25em 0 0;
}
#comments-block .comment-footer {
margin:-.25em 0 2em;
line-height: 1.4em;
text-transform:uppercase;
letter-spacing:.1em;
}
#comments-block .comment-body p {
margin:0 0 .75em;
}
.deleted-comment {
font-style:italic;
color:gray;
}
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/* Sidebar Content
----------------------------------------------- */
.sidebar {
color: #666666;
line-height: 1.5em;
}
.sidebar ul {
list-style:none;
margin:0 0 0;
padding:0 0 0;
}
.sidebar li {
margin:0;
padding-top:0;
padding-right:0;
padding-bottom:.25em;
padding-left:15px;
text-indent:-15px;
line-height:1.5em;
}
.sidebar .widget, .main .widget {
border-bottom:1px dotted #cccccc;
margin:0 0 1.5em;
padding:0 0 1.5em;
}
.main .Blog {
border-bottom-width: 0;
}
/* Profile
----------------------------------------------- */
.profile-img {
float: left;
margin-top: 0;
margin-right: 5px;
margin-bottom: 5px;
margin-left: 0;
padding: 4px;
border: 1px solid #cccccc;
}
.profile-data {
margin:0;
text-transform:uppercase;
letter-spacing:.1em;
font: normal normal 78% 'Trebuchet MS', Trebuchet, Arial, Verdana, Sans-serif;
color: #999999;
font-weight: bold;
line-height: 1.6em;
}
.profile-datablock {
margin:.5em 0 .5em;
}
.profile-textblock {
margin: 0.5em 0;
line-height: 1.6em;
}
.profile-link {
font: normal normal 78% 'Trebuchet MS', Trebuchet, Arial, Verdana, Sans-serif;
text-transform: uppercase;
letter-spacing: .1em;
}
/* Footer
----------------------------------------------- */
#footer {
width:660px;
clear:both;
margin:0 auto;
padding-top:15px;
line-height: 1.6em;
text-transform:uppercase;
letter-spacing:.1em;
text-align: center;
}

--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=8405107760807432973&amp;zx=5920eae1-72c4-4418-9990-7bbd1e40c4d2' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=8405107760807432973&amp;zx=5920eae1-72c4-4418-9990-7bbd1e40c4d2' rel='stylesheet'/></noscript>
</head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d8405107760807432973\x26blogName\x3dJava+Concurrency+(%26c)\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttp://jeremymanson.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://jeremymanson.blogspot.com/\x26targetPostID\x3d1227336553526918679\x26blogPostOrPageUrl\x3dhttp://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html\x26vt\x3d-3598445652539350606',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div id='outer-wrapper'><div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='#main'>skip to main </a> |
      <a href='#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://jeremymanson.blogspot.co.id/'>
Java Concurrency (&amp;c)
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>Jeremy Manson's blog, which goes into great detail either about concurrency in Java, or anything else that the author happens to feel is interesting or relevant to the target audience.</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol no-items section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Tuesday, July 9, 2013</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='8405107760807432973' itemprop='blogId'/>
<meta content='1227336553526918679' itemprop='postId'/>
<a name='1227336553526918679'></a>
<h3 class='post-title entry-title' itemprop='name'>
Lightweight Asynchronous Sampling Profiler
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-1227336553526918679' itemprop='description articleBody'>
I finally got off of my lazy elbows and wrote a proof-of-concept sampling profiler for public consumption based on the Hotspot JVM's <a href="http://jeremymanson.blogspot.com/2007/05/profiling-with-jvmtijvmpi-sigprof-and.html">AsyncGetCallTrace</a> interface.  

<p>The benefit of using this interface to write a profiler is that it can gather stack traces asynchronously.  This avoids the inaccuracies of only being able to profile code at safe points, and the overhead of having to stop the JVM to gather a stack trace.  The result is a more accurate profiler that avoids the 10-20% overhead of something like hprof.  For a more thorough explanation as to why this is interesting, see <a href="http://jeremymanson.blogspot.com/2010/07/why-many-profilers-have-serious.html">my 2010 writeup on the subject</a>.

<p>Another feature of the profiler is that it will tell you what stack traces <b>are being</b> executed, rather than, like many sampling Java profilers, what stack traces <b>could be</b> executed.  That is, with traditional profilers, if you stop the VM and ask it for stack traces, it will tell you all of the stack traces from all of the threads that are not currently blocked.  This profiler tells you the stack trace from the thread that got interrupted when you asked for the stack trace.  The tradeoff is reasonably important if you are trying to think about thread starvation and scheduling; with this approach, you get to see what isn't being scheduled.  With the "get everything" approach, you get more samples, so there is a meaningful benefit to both approaches.

<p><a href="https://code.google.com/p/lightweight-java-profiler/">Code is here</a>.  I'm not likely to invest a great deal of time in making it wonderful, but patches from interested parties are welcome.

<p><i>Edited to add:</i> Some of the commenters below wonder why the stack trace grabber can't print out the stack traces when it gets them.  The answer to this lies in what I meant when I called this function <i>asynchronous</i>.  I was a little (deliberately) vague on what "asynchronous" means.  When I say that the timer that goes off to grab a stack trace interrupts a running thread asynchronously, I mean that it can interrupt the thread <b>at any point</b>.  The thread can be in the middle of GC, or the middle of adding a frame to the stack, or in the middle of acquiring a lock.  The reader can imagine that writing something <i>asynchronous-safe</i> is somewhat more tricky than writing something thread-safe: not only do you have to worry about what <b>other</b> threads are doing, you also have to worry about what <b>the current</b> thread is doing.

<p>Needless to say, there are a lot of things you can't (or shouldn't) do asynchronously.  For example, you can't call <tt>malloc</tt>, because if the thread is already in the middle of executing malloc when you interrupt it, you can destroy malloc's internal data structures.  In fact, for the standard C library functions, the POSIX standard specifies a list of functions that have to be async-safe (see <tt>man 7 signal</tt> for the list, if you are curious).  Note that functions like <tt>printf</tt> are not async-safe, so you can't call them asynchronously.  As far as I know, AsyncGetCallTrace is pretty much the only non-trivial async-safe JNI/JVMTI call.  Others, including the <a href="http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#GetStackTrace">standard JVMTI stack trace gathering function</a> and the <a href="http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#GetMethodName">functions that make sense out of what AsyncGetCallTrace returns</a>, are not async-safe, and are likely to crash your program if you try to call them asynchronously.

<p>For this programming exercise, I was lazy, and printed the stack traces at VM exit.  That doesn't mean that a sufficiently clever approach can't get the stack traces incrementally.  A separate, synchronous thread can read the data that was written out asynchronously.  You can't use a standard blocking lock to protect the data, though, because standard lock implementations aren't async-safe.  You could use a spin lock, but you would have to be careful about the async handler interrupting a thread that holds the spin lock.  In that case, the async handler won't be able to acquire the lock, so it would have to do a trylock and give up if it can't complete the acquire.  There are also clever things you can do with atomic operations if you apply some creativity; I'll leave those as an exercise for the reader.
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://www.blogger.com/profile/04241094734813086257' itemprop='url'/>
<a class='g-profile' href='https://www.blogger.com/profile/04241094734813086257' rel='author' title='author profile'>
<span itemprop='name'>Jeremy Manson</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html' itemprop='url'/>
<a class='timestamp-link' href='http://jeremymanson.blogspot.co.id/2013/07/lightweight-asynchronous-sampling.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2013-07-09T13:55:00-07:00'>1:55 PM</abbr></a>
</span>
<span class='reaction-buttons'>
</span>
<span class='post-comment-link'>
</span>
<span class='post-backlinks post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post.g?blogID=8405107760807432973&postID=1227336553526918679' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-1254066360'>
<a href='https://www.blogger.com/post-edit.g?blogID=8405107760807432973&postID=1227336553526918679&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='https://resources.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>26 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author ' id='c7735673898296847709'>
<a name='c7735673898296847709'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13356492408674730254" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7735673898296847709-13356492408674730254"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Adam Hawthorne">

</a></span></div>
<a href='https://www.blogger.com/profile/13356492408674730254' rel='nofollow'>Adam Hawthorne</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7735673898296847709'>
<p>
Hi Jeremy,<br /><br />Having some trouble building on a Mac.  Tried with default Apple g++-4.2 and it failed with a large number of &quot;unsupported options&quot;.  Installed MacPorts gcc48 and it errors with:<br /><br />lightweight-java-profiler-read-only/src/globals.h:56:16: error: typedef &#39;VerifySizesAreEqual&#39; locally defined but not used [-Werror=unused-local-typedefs]<br />   typedef char VerifySizesAreEqual[sizeof(Dest) == sizeof(Source) ? 1 : -1];<br />                ^<br />cc1plus: all warnings being treated as errors<br /><br />What version did you build with?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1373469745231#c7735673898296847709' title='comment permalink'>
July 10, 2013 at 8:22 AM
</a>
<span class='item-control blog-admin pid-1771404246'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7735673898296847709' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c6925327011217970970'>
<a name='c6925327011217970970'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6925327011217970970-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6925327011217970970'>
<p>
I&#39;ve only tested on Linux (Ubuntu Precise).  A mac port may require various patches.  In fact, I have no idea if it will even work!<br /><br />Having said that, I&#39;ve fixed that particular error, so feel free to try again.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1373477278424#c6925327011217970970' title='comment permalink'>
July 10, 2013 at 10:27 AM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=6925327011217970970' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c3708637286154394635'>
<a name='c3708637286154394635'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3708637286154394635-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3708637286154394635'>
<p>
Oh, and I didn&#39;t answer your question: I built with gcc 4.6.3.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1373490903683#c3708637286154394635' title='comment permalink'>
July 10, 2013 at 2:15 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=3708637286154394635' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c387422472397638938'>
<a name='c387422472397638938'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/07916070952536241199" rel="nofollow" onclick="" class="avatar-hovercard" id="av-387422472397638938-07916070952536241199"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Oleg Mazurov">

</a></span></div>
<a href='https://www.blogger.com/profile/07916070952536241199' rel='nofollow'>Oleg Mazurov</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-387422472397638938'>
<p>
Hi Jeremy,<br /><br />It&#39;s good to see somebody has figured AGCT out. I&#39;m the engineer behind its use in Sun Studio Analyzer. Though that is now a thing of the past. One tidbit: having been implemented on top of essential low level mechanisms in HotSpot, AGCT becomes naturally available on every platform HS is ported to.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374006340331#c387422472397638938' title='comment permalink'>
July 16, 2013 at 1:25 PM
</a>
<span class='item-control blog-admin pid-1299836987'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=387422472397638938' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c4164774323952729443'>
<a name='c4164774323952729443'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4164774323952729443-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4164774323952729443'>
<p>
Hi Oleg!  Thanks for doing it, because it saved us an enormous amount of time and effort.  We should talk some time...
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374007064133#c4164774323952729443' title='comment permalink'>
July 16, 2013 at 1:37 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=4164774323952729443' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2167370979211175741'>
<a name='c2167370979211175741'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/16657552696382525525" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2167370979211175741-16657552696382525525"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Mike Dunlavey">

</a></span></div>
<a href='https://www.blogger.com/profile/16657552696382525525' rel='nofollow'>Mike Dunlavey</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2167370979211175741'>
<p>
I just posted a comment on your 2010 post. I&#39;m glad you are doing stack sampling. I&#39;ve had a lot to say on this: http://scicomp.stackexchange.com/a/2719/1262<br />It isn&#39;t that a lot of stack samples are needed. It&#39;s that you only need a small number, but the ones you do get need to be examined carefully, not just blindly summarized.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374695406104#c2167370979211175741' title='comment permalink'>
July 24, 2013 at 12:50 PM
</a>
<span class='item-control blog-admin pid-1669149880'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=2167370979211175741' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7615870787596306491'>
<a name='c7615870787596306491'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10879424013679277912" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7615870787596306491-10879424013679277912"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Romain G">

</a></span></div>
<a href='https://www.blogger.com/profile/10879424013679277912' rel='nofollow'>Romain G</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7615870787596306491'>
<p>
Hi, <br /><br />Thx for this it looks interesting !<br />I&#39;ve compiled it and passed it as a Java option, but it looks like in my case stack traces are only gathered when the VM is shut down. Until the VM shutdown is requested, the stacks.txt file stays empty. Is there an other way to trigger the stack collection ? I&#39;ve tried with OpenJDK 1.7.0.25 provided as a Fedora RPM.<br /><br />I also needed to make these small modifications to compile on Fedora 19, GCC 4.8.1 : <br />One is to compile it, the other is regarding the stacks.txt file path which is apparently missing a &#39;/&#39; between the path and the filename.<br /><br />Let me know,<br />Cheers,<br />Romain.<br /><br />Index: Makefile<br />===================================================================<br />--- Makefile    (revision 5)<br />+++ Makefile    (working copy)<br />@@ -8,7 +8,8 @@<br /> CC=g++<br /> AGENT=liblagent.so<br /> LIBS=-ldl<br />-BITS?=32<br />+#BITS?=32<br />+BITS?=64<br /> BUILD_DIR ?= $(shell mkdir build-$(BITS) 2&gt; /dev/null ; echo build-$(BITS))<br /> SRC_DIR:=${PWD}/src<br /> OPT?=-O2<br />Index: src/entry.cc<br />===================================================================<br />--- src/entry.cc        (revision 5)<br />+++ src/entry.cc        (working copy)<br />@@ -1,6 +1,7 @@<br /> #include <br /> #include <br /> #include <br />+#include <br /> <br /> #include <br /> <br />@@ -191,6 +192,7 @@<br />       exit(0);<br />     }<br />     size_t pathlen = strlen(path);<br />+    strncat(path, &quot;/&quot;, PATH_MAX - pathlen);<br />     strncat(path, kDefaultOutFile, PATH_MAX - pathlen);<br />     Globals::OutFile = fopen(path, &quot;w+&quot;);<br />   }<br />
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374841672626#c7615870787596306491' title='comment permalink'>
July 26, 2013 at 5:27 AM
</a>
<span class='item-control blog-admin pid-1243385455'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7615870787596306491' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7796541727109320603'>
<a name='c7796541727109320603'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13356492408674730254" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7796541727109320603-13356492408674730254"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Adam Hawthorne">

</a></span></div>
<a href='https://www.blogger.com/profile/13356492408674730254' rel='nofollow'>Adam Hawthorne</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7796541727109320603'>
<p>
&gt; I&#39;ve only tested on Linux (Ubuntu Precise). A mac port<br />&gt; may require various patches. In fact, I have no idea if<br />&gt; it will even work!<br />&gt; <br />&gt; Having said that, I&#39;ve fixed that particular error, so <br />&gt; feel free to try again.<br /><br />Sorry for the late reply - no notification:(<br /><br />Anyway, thanks, I did actually get further on my own to the point where it was building the library, but it failed with a segfault immediately.  I haven&#39;t had time to revisit it since, but we have some performance testing that needs exactly this kind of tool, so I&#39;ll be trying again on a Linux box soon.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374850318484#c7796541727109320603' title='comment permalink'>
July 26, 2013 at 7:51 AM
</a>
<span class='item-control blog-admin pid-1771404246'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7796541727109320603' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5272099215053438762'>
<a name='c5272099215053438762'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/01311785395632708833" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5272099215053438762-01311785395632708833"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Alexandre de Champeaux">

</a></span></div>
<a href='https://www.blogger.com/profile/01311785395632708833' rel='nofollow'>Alexandre de Champeaux</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5272099215053438762'>
<p>
Hi Jeremy,<br /><br />Thanks for sharing the code.<br />I have been trying to implement a real time version of it, but encountered an issue : calling jvmti-&gt;GetMethodName in the handler of the SIGPROF signal ends up triggering a segmentation fault. Any leads on why it is safe to call it on vm death, but not while executing?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374854475118#c5272099215053438762' title='comment permalink'>
July 26, 2013 at 9:01 AM
</a>
<span class='item-control blog-admin pid-1537981326'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=5272099215053438762' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c386459315690859833'>
<a name='c386459315690859833'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-386459315690859833-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-386459315690859833'>
<p>
@Romain: can you send me the patch via email?  Blogger thought the the &gt; and &lt; chars in your post were HTML tags, and stripped them out.<br /><br />I&#39;ll update the post with more detail on what &quot;asynchronous&quot; implies in terms of what you can invoke and what you can&#39;t, since that seems to be a source of confusion.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374856731498#c386459315690859833' title='comment permalink'>
July 26, 2013 at 9:38 AM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=386459315690859833' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c3040535791237562951'>
<a name='c3040535791237562951'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3040535791237562951-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3040535791237562951'>
<p>
I&#39;ve updated the post with an explanation of why things like printf and JNI/JVMTI invocations crash your programs.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1374858930344#c3040535791237562951' title='comment permalink'>
July 26, 2013 at 10:15 AM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=3040535791237562951' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8288735811282913894'>
<a name='c8288735811282913894'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://bestrowingmachinereviews.us/2013/08/15/how-to-use-a-rower-1/" rel="nofollow" onclick=""><img src="//img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" title="Cesar">

</a></span></div>
<a href='http://bestrowingmachinereviews.us/2013/08/15/how-to-use-a-rower-1/' rel='nofollow'>Cesar</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8288735811282913894'>
<span class='deleted-comment'>This comment has been removed by a blog administrator.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1377222909426#c8288735811282913894' title='comment permalink'>
August 22, 2013 at 6:55 PM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=8288735811282913894' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7757904005827174384'>
<a name='c7757904005827174384'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/08049781702053733725" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7757904005827174384-08049781702053733725"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//1.bp.blogspot.com/_eqTybbjvDQg/SaphWp4mB5I/AAAAAAAAAAU/fa5aXJ86w1c/S45-s35/17702353_5c31a01322_t.jpg" title="burtonator">

<noscript><img src="//1.bp.blogspot.com/_eqTybbjvDQg/SaphWp4mB5I/AAAAAAAAAAU/fa5aXJ86w1c/S45-s35/17702353_5c31a01322_t.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/08049781702053733725' rel='nofollow'>burtonator</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7757904005827174384'>
<p>
This is really interesting and I might end up diving in here and seeing what I can do to improve this.<br /><br />I&#39;ve wanted this for a LONG time.<br /><br />My thinking is something along the lines of continuous integration and continuous delivery and I&#39;m been cautiously referring to it as continuous profiling.<br /><br />Basically the idea that you asynchronously gather stack traces from a running app and build up a profile on a production application.<br /><br />This way your app developers can easily see your profile at any time. <br /><br />Maybe having a web interface or API for obtaining the profile data for visualization.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1377451928814#c7757904005827174384' title='comment permalink'>
August 25, 2013 at 10:32 AM
</a>
<span class='item-control blog-admin pid-1494800357'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7757904005827174384' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5801648887439807260'>
<a name='c5801648887439807260'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5801648887439807260-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5801648887439807260'>
<p>
@burtonator - what you propose is very similar to how we use this technology at Google.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1377454954517#c5801648887439807260' title='comment permalink'>
August 25, 2013 at 11:22 AM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=5801648887439807260' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c347937523173704660'>
<a name='c347937523173704660'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/16657552696382525525" rel="nofollow" onclick="" class="avatar-hovercard" id="av-347937523173704660-16657552696382525525"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Mike Dunlavey">

</a></span></div>
<a href='https://www.blogger.com/profile/16657552696382525525' rel='nofollow'>Mike Dunlavey</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-347937523173704660'>
<p>
@burtonator: I&#39;m with you all the way up to &quot;build up a profile on a production application&quot;. That sounds like some kind of summarization (into call tree, graph, whatever). My take is that the summarization is where the rich information in the samples themselves is lost. If the goal is to find bottlenecks, the high measurement precision you get with lots of samples is being bought at the expense of actually finding bottlenecks to fix, because the measurements don&#39;t tell you what&#39;s being done that you don&#39;t need. 
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1377549607598#c347937523173704660' title='comment permalink'>
August 26, 2013 at 1:40 PM
</a>
<span class='item-control blog-admin pid-1669149880'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=347937523173704660' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7865363971669985228'>
<a name='c7865363971669985228'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://blogs.zoltran.com" rel="nofollow" onclick=""><img src="//img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" title="Zoltan Farkas">

</a></span></div>
<a href='http://blogs.zoltran.com' rel='nofollow'>Zoltan Farkas</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7865363971669985228'>
<p>
Good work! <br />This might complement the tools that I developed for continuous profiling (www.spf4j.org). Serializing the stack samples to protobuf format supported by spf4j is all that needs to be done... <br />I have recently made some progress in visualizing the samples and improved on brendan greg&#39;s flame graphs(http://dtrace.org/blogs/brendan/2011/12/16/flame-graphs/) see detail in my latest blog: http://blogs.zoltran.com.<br /><br />actually <br /><br />keep up the good work!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378057857994#c7865363971669985228' title='comment permalink'>
September 1, 2013 at 10:50 AM
</a>
<span class='item-control blog-admin pid-665009887'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7865363971669985228' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6969354713944135241'>
<a name='c6969354713944135241'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13403082247059421847" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6969354713944135241-13403082247059421847"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="Zoltan Farkas">

</a></span></div>
<a href='https://www.blogger.com/profile/13403082247059421847' rel='nofollow'>Zoltan Farkas</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6969354713944135241'>
<p>
if somebody would write some code to summarize the stack samples into the protobuffer format: http://code.google.com/p/spf4j/source/browse/trunk/spf4j-core/src/main/proto/proto_sample_nodes.proto, they could be visualized with the spf4j UI: http://code.google.com/p/spf4j/downloads/list... I am throwing this idea out in case somebody has more time than I do...
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378347622872#c6969354713944135241' title='comment permalink'>
September 4, 2013 at 7:20 PM
</a>
<span class='item-control blog-admin pid-334294007'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=6969354713944135241' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c1318413803464319748'>
<a name='c1318413803464319748'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1318413803464319748-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1318413803464319748'>
<p>
@Zoltan - I&#39;m not likely to have time to do it, so anyone else around here who wants to do it should just let me know.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378361550148#c1318413803464319748' title='comment permalink'>
September 4, 2013 at 11:12 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=1318413803464319748' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4835868749335863745'>
<a name='c4835868749335863745'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/10504698344833366308" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4835868749335863745-10504698344833366308"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh4.googleusercontent.com/-6wJNWOtYggs/AAAAAAAAAAI/AAAAAAAAAEU/r_2ZdJI-Erg/s35-c/photo.jpg" title="Arno Haase">

<noscript><img src="//lh4.googleusercontent.com/-6wJNWOtYggs/AAAAAAAAAAI/AAAAAAAAAEU/r_2ZdJI-Erg/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/10504698344833366308' rel='nofollow'>Arno Haase</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4835868749335863745'>
<p>
Great stuff, thanks for sharing!<br><br />One thing is bugging me though: Profiler::Handle seems to sample just the thread that happened to be interrupted by the signal. Am I missing something? Is there some underlying mechanism at the OS level that distributes the signals evenly across the JVM&#39;s threads?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378763626226#c4835868749335863745' title='comment permalink'>
September 9, 2013 at 2:53 PM
</a>
<span class='item-control blog-admin pid-1746663734'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=4835868749335863745' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c6804136194536649268'>
<a name='c6804136194536649268'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6804136194536649268-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6804136194536649268'>
<p>
@Arno - Whether this works depends on the OS.  It works just fine on Linux, where the OS sends the signal to whatever happens to be on the processor at the time the signal fires. OS X always sends the signal to the main thread, which is annoying - I have a workaround, but I haven&#39;t had a chance to debug it yet.<br />
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378786145909#c6804136194536649268' title='comment permalink'>
September 9, 2013 at 9:09 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=6804136194536649268' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2179888895180775075'>
<a name='c2179888895180775075'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/10504698344833366308" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2179888895180775075-10504698344833366308"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh4.googleusercontent.com/-6wJNWOtYggs/AAAAAAAAAAI/AAAAAAAAAEU/r_2ZdJI-Erg/s35-c/photo.jpg" title="Arno Haase">

<noscript><img src="//lh4.googleusercontent.com/-6wJNWOtYggs/AAAAAAAAAAI/AAAAAAAAAEU/r_2ZdJI-Erg/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/10504698344833366308' rel='nofollow'>Arno Haase</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2179888895180775075'>
<p>
That makes sense. But I was wondering about distribution across cores on multicore CPUs, with JVM threads potentially biased towards or bound to a specific CPU.<br />
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378791772577#c2179888895180775075' title='comment permalink'>
September 9, 2013 at 10:42 PM
</a>
<span class='item-control blog-admin pid-1746663734'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=2179888895180775075' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c4854216964507665403'>
<a name='c4854216964507665403'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4854216964507665403-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4854216964507665403'>
<p>
I recall asking a kernel expert about that at one point, but I don&#39;t recall what the answer was.  It was certainly good enough for us at Google.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1378793742046#c4854216964507665403' title='comment permalink'>
September 9, 2013 at 11:15 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=4854216964507665403' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1178850595943465993'>
<a name='c1178850595943465993'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03282744418949682458" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1178850595943465993-03282744418949682458"><img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35" width="35" height="35" alt="" title="comain">

</a></span></div>
<a href='https://www.blogger.com/profile/03282744418949682458' rel='nofollow'>comain</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1178850595943465993'>
<p>
Jeremy, good job.<br />Regarding the incremental part, I think we can use two buffers and an atomic indicator. Let the async writer to swap the buffers periodically. Do you think that will work?<br /><br />Also, there is no native stack, do you have any hint on implementing this?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1379991720980#c1178850595943465993' title='comment permalink'>
September 23, 2013 at 8:02 PM
</a>
<span class='item-control blog-admin pid-1039926977'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=1178850595943465993' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c7601187691500504407'>
<a name='c7601187691500504407'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7601187691500504407-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7601187691500504407'>
<p>
@comain: <br /><br />1) Thanks.<br /><br />2) Having two arrays and a CAS is the right kind of thing.  You have to figure out what to do with the first array once you&#39;ve switched to the second, because you have to decode it synchronously.<br /><br />3) We solved the native method issue internally by adjusting the JVM to return the PCs for native frames.  That&#39;s not such a great solution for tools vendors, although it is fine if you control the JVM.  We&#39;re planning on OSSing that patch in a few months (once we bring it up to date with JDK8/Hotspot 25).<br /><br />If you can&#39;t do that, one possibility is to grab native stack frames at the same time and use some heuristics to line them up with the Java frames.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1379998072522#c7601187691500504407' title='comment permalink'>
September 23, 2013 at 9:47 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=7601187691500504407' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c9347494571440293'>
<a name='c9347494571440293'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="//img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9347494571440293'>
<p>
I want to store the values of all the state variables whenever any exception is generating in a java program. I am current trying to find a way with jvmti. Can you help me out with something ?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1487162493237#c9347494571440293' title='comment permalink'>
February 15, 2017 at 4:41 AM
</a>
<span class='item-control blog-admin pid-1916486009'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=9347494571440293' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2377419200096017256'>
<a name='c2377419200096017256'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/04241094734813086257" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2377419200096017256-04241094734813086257"><img src="https://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" title="Jeremy Manson">

<noscript><img src="//3.bp.blogspot.com/_Kd3ZRwid36g/SartGilspGI/AAAAAAAAABM/bYwFAyjfM_U/S45-s35/MyPicture.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/04241094734813086257' rel='nofollow'>Jeremy Manson</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2377419200096017256'>
<p>
Not sure you can do that with JVMTI.  One thing to do would be to use bytecode rewriting to add exception handlers that store relevant local information.  I believe that Quasar does something like that for implementing continuations.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html?showComment=1487195574919#c2377419200096017256' title='comment permalink'>
February 15, 2017 at 1:52 PM
</a>
<span class='item-control blog-admin pid-1254066360'>
<a class='comment-delete' href='https://www.blogger.com/delete-comment.g?blogID=8405107760807432973&postID=2377419200096017256' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class='comment-footer'>
<a href='https://www.blogger.com/comment.g?blogID=8405107760807432973&postID=1227336553526918679' onclick=''>Post a Comment</a>
</p>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://jeremymanson.blogspot.co.id/2015/12/why-i-dont-like-systemgc.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://jeremymanson.blogspot.co.id/2012/02/transactional-hardware-on-x86.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://jeremymanson.blogspot.co.id/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://jeremymanson.blogspot.com/feeds/1227336553526918679/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
<script type='text/javascript'>
    window.___gcfg = { 'lang': 'en' };
  </script>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2015/'>
2015
</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2015/12/'>
December
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2013/'>
2013
</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='hierarchy'>
<li class='archivedate expanded'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy toggle-open'>

        &#9660;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2013/07/'>
July
</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://jeremymanson.blogspot.co.id/2013/07/lightweight-asynchronous-sampling.html'>Lightweight Asynchronous Sampling Profiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2012/'>
2012
</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2012/02/'>
February
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2011/'>
2011
</a>
<span class='post-count' dir='ltr'>(3)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2011/06/'>
June
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2011/05/'>
May
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2011/04/'>
April
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2010/'>
2010
</a>
<span class='post-count' dir='ltr'>(5)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2010/08/'>
August
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2010/02/'>
February
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2010/01/'>
January
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/'>
2009
</a>
<span class='post-count' dir='ltr'>(7)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/12/'>
December
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/09/'>
September
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/07/'>
July
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/06/'>
June
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/04/'>
April
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2009/02/'>
February
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/'>
2008
</a>
<span class='post-count' dir='ltr'>(15)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/12/'>
December
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/11/'>
November
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/10/'>
October
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/08/'>
August
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/07/'>
July
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/05/'>
May
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/04/'>
April
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/03/'>
March
</a>
<span class='post-count' dir='ltr'>(3)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2008/02/'>
February
</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/'>
2007
</a>
<span class='post-count' dir='ltr'>(25)</span>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/08/'>
August
</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/06/'>
June
</a>
<span class='post-count' dir='ltr'>(6)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/05/'>
May
</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/04/'>
April
</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul class='hierarchy'>
<li class='archivedate collapsed'>
<a class='toggle' href='javascript:void(0)'>
<span class='zippy'>

        &#9658;&#160;
      
</span>
</a>
<a class='post-count-link' href='http://jeremymanson.blogspot.co.id/2007/03/'>
March
</a>
<span class='post-count' dir='ltr'>(8)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8405107760807432973&widgetType=BlogArchive&widgetId=BlogArchive1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target='configBlogArchive1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget Profile' data-version='1' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<a href='https://www.blogger.com/profile/04241094734813086257'><img alt='My photo' class='profile-img' height='80' src='//3.bp.blogspot.com/_Kd3ZRwid36g/SPQ45cHj9UI/AAAAAAAAAAM/9BkGwSDrYX4/S220-s80/MyPicture.jpg' width='68'/></a>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://www.blogger.com/profile/04241094734813086257' rel='author' style='background-image: url(//www.blogger.com/img/logo-16.png);'>
Jeremy Manson
</a>
</dt>
<dd class='profile-textblock'>I'm a programming languages and software engineering guy who works at Google. Nothing I say represents the views of my employer, of course.
<br>
I was one of the authors on JSR-133, the revision of the JLS that dealt with threads and synchronization.  I often use this blog to address frequently asked questions about threading.</dd>
</dl>
<a class='profile-link' href='https://www.blogger.com/profile/04241094734813086257' rel='author'>View my complete profile</a>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8405107760807432973&widgetType=Profile&widgetId=Profile1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target='configProfile1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget Subscribe' data-version='1' id='Subscribe1'>
<div style='white-space:nowrap'>
<h2 class='title'>Subscribe To This Blog</h2>
<div class='widget-content'>
<div class='subscribe-wrapper subscribe-type-POST'>
<div class='subscribe expanded subscribe-type-POST' id='SW_READER_LIST_Subscribe1POST' style='display:none;'>
<div class='top'>
<span class='inner' onclick='return(_SW_toggleReaderList(event, "Subscribe1POST"));'>
<img class='subscribe-dropdown-arrow' src='https://img2.blogblog.com/img/widgets/arrow_dropdown.gif'/>
<img align='absmiddle' alt='' border='0' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
Posts
</span>
<div class='feed-reader-links'>
<a class='feed-reader-link' href='https://www.netvibes.com/subscribe.php?url=http%3A%2F%2Fjeremymanson.blogspot.com%2Ffeeds%2Fposts%2Fdefault' target='_blank'>
<img src='https://img1.blogblog.com/img/widgets/subscribe-netvibes.png'/>
</a>
<a class='feed-reader-link' href='https://add.my.yahoo.com/content?url=http%3A%2F%2Fjeremymanson.blogspot.com%2Ffeeds%2Fposts%2Fdefault' target='_blank'>
<img src='https://img1.blogblog.com/img/widgets/subscribe-yahoo.png'/>
</a>
<a class='feed-reader-link' href='http://jeremymanson.blogspot.com/feeds/posts/default' target='_blank'>
<img align='absmiddle' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
                  Atom
                </a>
</div>
</div>
<div class='bottom'></div>
</div>
<div class='subscribe' id='SW_READER_LIST_CLOSED_Subscribe1POST' onclick='return(_SW_toggleReaderList(event, "Subscribe1POST"));'>
<div class='top'>
<span class='inner'>
<img class='subscribe-dropdown-arrow' src='https://img2.blogblog.com/img/widgets/arrow_dropdown.gif'/>
<span onclick='return(_SW_toggleReaderList(event, "Subscribe1POST"));'>
<img align='absmiddle' alt='' border='0' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
Posts
</span>
</span>
</div>
<div class='bottom'></div>
</div>
</div>
<div class='subscribe-wrapper subscribe-type-PER_POST'>
<div class='subscribe expanded subscribe-type-PER_POST' id='SW_READER_LIST_Subscribe1PER_POST' style='display:none;'>
<div class='top'>
<span class='inner' onclick='return(_SW_toggleReaderList(event, "Subscribe1PER_POST"));'>
<img class='subscribe-dropdown-arrow' src='https://img2.blogblog.com/img/widgets/arrow_dropdown.gif'/>
<img align='absmiddle' alt='' border='0' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
Comments
</span>
<div class='feed-reader-links'>
<a class='feed-reader-link' href='https://www.netvibes.com/subscribe.php?url=http%3A%2F%2Fjeremymanson.blogspot.com%2Ffeeds%2F1227336553526918679%2Fcomments%2Fdefault' target='_blank'>
<img src='https://img1.blogblog.com/img/widgets/subscribe-netvibes.png'/>
</a>
<a class='feed-reader-link' href='https://add.my.yahoo.com/content?url=http%3A%2F%2Fjeremymanson.blogspot.com%2Ffeeds%2F1227336553526918679%2Fcomments%2Fdefault' target='_blank'>
<img src='https://img1.blogblog.com/img/widgets/subscribe-yahoo.png'/>
</a>
<a class='feed-reader-link' href='http://jeremymanson.blogspot.com/feeds/1227336553526918679/comments/default' target='_blank'>
<img align='absmiddle' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
                  Atom
                </a>
</div>
</div>
<div class='bottom'></div>
</div>
<div class='subscribe' id='SW_READER_LIST_CLOSED_Subscribe1PER_POST' onclick='return(_SW_toggleReaderList(event, "Subscribe1PER_POST"));'>
<div class='top'>
<span class='inner'>
<img class='subscribe-dropdown-arrow' src='https://img2.blogblog.com/img/widgets/arrow_dropdown.gif'/>
<span onclick='return(_SW_toggleReaderList(event, "Subscribe1PER_POST"));'>
<img align='absmiddle' alt='' border='0' class='feed-icon' src='https://img1.blogblog.com/img/icon_feed12.png'/>
Comments
</span>
</span>
</div>
<div class='bottom'></div>
</div>
</div>
<div style='clear:both'></div>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8405107760807432973&widgetType=Subscribe&widgetId=Subscribe1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("Subscribe1"));' target='configSubscribe1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget AdSense' data-version='1' id='AdSense1'>
<div class='widget-content'>
<script type="text/javascript"><!--
google_ad_client="pub-7404595746739662";
google_ad_host="pub-1556223355139109";
google_ad_host_channel="00000";
google_ad_width=180;
google_ad_height=150;
google_ad_format="180x150_as";
google_ad_type="text";
google_color_border="336699";
google_color_bg="FFFFFF";
google_color_link="0000FF";
google_color_url="008000";
google_color_text="000000";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=8405107760807432973&widgetType=AdSense&widgetId=AdSense1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("AdSense1"));' target='configAdSense1' title='Edit'>
<img alt='' height='18' src='https://resources.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<!-- end content-wrapper -->
<div id='footer-wrapper'>
<div class='footer no-items section' id='footer'></div>
</div>
</div></div>
<!-- end outer-wrapper -->
<script type='text/javascript'>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type='text/javascript'>
var pageTracker = _gat._getTracker("UA-1938684-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script src='https://apis.google.com/js/plusone.js' type='text/javascript'></script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/3863139539-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY4YnHH8apqpQGOlnx3W-sEiYBkD3g:1500731174921';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d8405107760807432973','//jeremymanson.blogspot.co.id/2013/07/lightweight-asynchronous-sampling.html','8405107760807432973');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '8405107760807432973', 'title': 'Java Concurrency (\x26amp;c)', 'url': 'http://jeremymanson.blogspot.co.id/2013/07/lightweight-asynchronous-sampling.html', 'canonicalUrl': 'http://jeremymanson.blogspot.com/2013/07/lightweight-asynchronous-sampling.html', 'homepageUrl': 'http://jeremymanson.blogspot.co.id/', 'searchUrl': 'http://jeremymanson.blogspot.co.id/search', 'canonicalHomepageUrl': 'http://jeremymanson.blogspot.com/', 'blogspotFaviconUrl': 'http://jeremymanson.blogspot.co.id/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Java Concurrency (\x26amp;c) - Atom\x22 href\x3d\x22http://jeremymanson.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Java Concurrency (\x26amp;c) - RSS\x22 href\x3d\x22http://jeremymanson.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Java Concurrency (\x26amp;c) - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/8405107760807432973/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Java Concurrency (\x26amp;c) - Atom\x22 href\x3d\x22http://jeremymanson.blogspot.com/feeds/1227336553526918679/comments/default\x22 /\x3e\n', 'meTag': '', 'openIdOpTag': '', 'adsenseClientId': 'ca-pub-7404595746739662', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': true, 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/d11edf3f68fa7b7e', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': 'Share to Google+', 'target': 'googleplus'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '1227336553526918679', 'pageName': 'Lightweight Asynchronous Sampling Profiler', 'pageTitle': 'Java Concurrency (\x26amp;c): Lightweight Asynchronous Sampling Profiler'}}, {'name': 'features', 'data': {'unsupported_browser_message': 'false', 'lightbox_img_parsing': 'false', 'sharing_get_link_dialog': 'false'}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': 'Custom', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Lightweight Asynchronous Sampling Profiler', 'description': 'I finally got off of my lazy elbows and wrote a proof-of-concept sampling profiler for public consumption based on the Hotspot JVM\x27s AsyncGe...', 'url': 'http://jeremymanson.blogspot.co.id/2013/07/lightweight-asynchronous-sampling.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 1227336553526918679}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/2709796370-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_SubscribeView', new _WidgetInfo('Subscribe1', 'sidebar', null, document.getElementById('Subscribe1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense1', 'sidebar', null, document.getElementById('AdSense1'), {}, 'displayModeFull'));
</script>
</body>
</html>